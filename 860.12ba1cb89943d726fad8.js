"use strict";(self.webpackChunklamasat=self.webpackChunklamasat||[]).push([[860],{3860:(v,p,o)=>{o.r(p),o.d(p,{AuthModule:()=>L});var h=o(8583),s=o(3679),g=o(4655),e=o(8939),t=o(7716),r=o(1988),d=o(1188);function l(i,m){1&i&&t._UZ(0,"img",26)}function c(i,m){1&i&&(t.TgZ(0,"div",27),t._uU(1," wrong user name or password "),t.qZA())}const a=function(){return["/employee/all"]},U=[{path:"login",component:(()=>{class i{constructor(n,u,f,y){this._router=n,this._formBuilder=u,this._userService=f,this._storageService=y,this.failed=!1,this.loading=!1,this.inititalForm()}ngOnInit(){this.inititalForm()}inititalForm(){this.loginForm=this._formBuilder.group({username:[null,s.kI.required],password:[null,s.kI.required]})}Submit(n){this.loginForm.valid&&(this.loading=!0,this._userService.loginUser(n).pipe((0,e.x)(()=>{this.loading=!1})).subscribe(u=>{this.saveUser(u.data),this._router.navigate(["employee/all"])},u=>{this.failed=!0}))}saveUser(n){this.user=n,console.warn("User from response",this.user),this._storageService.setToken(this.user.token),this._userService.setLocalStorageUser(this.user)}}return i.\u0275fac=function(n){return new(n||i)(t.Y36(g.F0),t.Y36(s.qu),t.Y36(r.K),t.Y36(d.V))},i.\u0275cmp=t.Xpm({type:i,selectors:[["app-login"]],decls:37,vars:5,consts:[["lang","en"],["charset","UTF-8"],["http-equiv","X-UA-Compatible","content","IE=edge"],["name","viewport","content","width=device-width, initial-scale=1.0"],[1,"container"],[1,"row","login-page"],[1,"col-md-6"],[1,"img=left"],["src","assets/Login/Login Pic.svg","alt",""],[1,"card","p-4"],[1,"title"],["width","200","src","assets/Login/Login Logo.svg","alt",""],[1,"mt-3"],[3,"formGroup","ngSubmit"],[1,"row","align-items-baseline"],[1,"col-md-1"],["src","assets/Login/Username Icon.svg","alt",""],[1,"col-md-11"],["placeholder","User Name","type","text","formControlName","username","required","",1,"form-control"],[1,"row","align-items-baseline","mt-3"],["src","assets/Login/Password Icon.svg","alt",""],["placeholder","Password","type","password","formControlName","password","required","",1,"form-control"],[3,"routerLink"],["type","submit",1,"btn","btn-primary","mt-3","w-100"],["width","30","src","assets/Spinner-1s-257px.svg","alt","",4,"ngIf"],["class","text-danger",4,"ngIf"],["width","30","src","assets/Spinner-1s-257px.svg","alt",""],[1,"text-danger"]],template:function(n,u){1&n&&(t.TgZ(0,"html",0),t.TgZ(1,"head"),t._UZ(2,"meta",1),t._UZ(3,"meta",2),t._UZ(4,"meta",3),t.TgZ(5,"title"),t._uU(6,"Lamast"),t.qZA(),t.qZA(),t.TgZ(7,"body"),t.TgZ(8,"div",4),t.TgZ(9,"div",5),t.TgZ(10,"div",6),t.TgZ(11,"div",7),t._UZ(12,"img",8),t.qZA(),t.qZA(),t.TgZ(13,"div",6),t.TgZ(14,"div",9),t.TgZ(15,"div",10),t._UZ(16,"img",11),t.TgZ(17,"h1",12),t._uU(18,"Welcome Back !"),t.qZA(),t.TgZ(19,"p"),t._uU(20,"Please login to your account to access"),t.qZA(),t.qZA(),t.TgZ(21,"form",13),t.NdJ("ngSubmit",function(){return u.Submit(u.loginForm.value)}),t.TgZ(22,"div",14),t.TgZ(23,"div",15),t._UZ(24,"img",16),t.qZA(),t.TgZ(25,"div",17),t._UZ(26,"input",18),t.qZA(),t.qZA(),t.TgZ(27,"div",19),t.TgZ(28,"div",15),t._UZ(29,"img",20),t.qZA(),t.TgZ(30,"div",17),t._UZ(31,"input",21),t.qZA(),t.qZA(),t.TgZ(32,"a",22),t.TgZ(33,"button",23),t.YNc(34,l,1,0,"img",24),t._uU(35," Login "),t.qZA(),t.qZA(),t.YNc(36,c,2,0,"div",25),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA()),2&n&&(t.xp6(21),t.Q6J("formGroup",u.loginForm),t.xp6(11),t.Q6J("routerLink",t.DdM(4,a)),t.xp6(2),t.Q6J("ngIf",u.loading),t.xp6(2),t.Q6J("ngIf",u.failed))},directives:[s._Y,s.JL,s.sg,s.Fj,s.JJ,s.u,s.Q7,g.yS,h.O5],styles:[".title[_ngcontent-%COMP%]{align-items:center;display:flex;flex-direction:column}.card[_ngcontent-%COMP%]{box-shadow:0 0 15px;border-radius:20px}.login-page[_ngcontent-%COMP%]{top:90px;position:relative}"]}),i})()}];let A=(()=>{class i{}return i.\u0275fac=function(n){return new(n||i)},i.\u0275mod=t.oAB({type:i}),i.\u0275inj=t.cJS({imports:[[g.Bz.forChild(U)],g.Bz]}),i})(),L=(()=>{class i{}return i.\u0275fac=function(n){return new(n||i)},i.\u0275mod=t.oAB({type:i}),i.\u0275inj=t.cJS({imports:[[h.ez,s.u5,s.UX,A],g.Bz]}),i})()},3927:(v,p,o)=>{o.d(p,{s:()=>s});var h=o(1841);class s{constructor(e,t,r="http://localhost:4200/backend"){this.http=e,this.entityname=t,this.baseURL=r,this.apiURL=`${this.baseURL}/${this.entityname}`}createEntity(e,t){return this.http.post(this.apiURL+t,e)}createEntityDownload(e,t){return this.http.post(this.apiURL+t,e,{responseType:"arraybuffer"})}readEntities(e,t){const r=new h.LE({fromObject:e});return this.http.get(this.apiURL+t,{params:r})}readEntity(e,t){const r=this.joinEntityUrl(e,t);return this.http.get(r)}updateEntity(e,t,r){const d=this.joinEntityUrl(e,r);return this.http.put(this.apiURL+d,t)}updateQueryEntity(e,t){return this.http.put(this.apiURL+t,e)}deleteEntity(e,t,r){const d=this.joinEntityUrl(e,r),l=new h.LE({fromObject:t});return this.http.delete(d,{params:l})}joinEntityUrl(e,t){return e?[this.apiURL+t,e].join("/"):[this.apiURL+t].join("/")}}},1988:(v,p,o)=>{o.d(p,{K:()=>d});var h=o(9765),s=o(3927);class g extends s.s{constructor(c){super(c,"api")}AuthLogin(c){return this.createEntity(c,"/login")}GetNewNameModel(c){return this.readEntity(void 0,"/get/name/"+c)}}var e=o(7716),t=o(1841),r=o(1188);let d=(()=>{class l{constructor(a,Z){this._storageService=Z,this.localStorageUser=new h.xQ,this.authActions=new g(a)}loginUser(a){return this.authActions.AuthLogin(a)}setLocalStorageUser(a){this._storageService.setLocalObject("user",a),this.localStorageUser.next(a)}getUser(){return this.localStorageUser.asObservable()}logout(){this._storageService.removeToken(),this._storageService.removeLocalObject("user"),this.localStorageUser.next(null)}getNewNamesModel(a){return this.authActions.GetNewNameModel(a)}}return l.\u0275fac=function(a){return new(a||l)(e.LFG(t.eN),e.LFG(r.V))},l.\u0275prov=e.Yz7({token:l,factory:l.\u0275fac,providedIn:"root"}),l})()}}]);