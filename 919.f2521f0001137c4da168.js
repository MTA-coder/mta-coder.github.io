"use strict";(self.webpackChunklamasat=self.webpackChunklamasat||[]).push([[919],{8919:($,y,l)=>{l.r(y),l.d(y,{EmployeeModule:()=>j});var c=l(8583),r=l(3679),p=l(4655),g=l(8939),e=l(7716),v=l(7749),T=l(4260),A=l(3927);class b extends A.s{constructor(i){super(i,"employee")}createEmployee(i){return this.createEntity(i,"/create")}readEmployees(){return this.readEntities(void 0,"/all")}findEmployee(i){return this.readEntity(i,"/find")}deleteEmployee(i){return this.deleteEntity(i,void 0,"/delete")}updateEmployee(i,t){return this.updateQueryEntity(t,"/update/"+i)}}var E=l(205),x=l(5304),q=l(1841);let Z=(()=>{class o{constructor(t){this.employeeRequests=new b(t)}getAllEmployees(){return this.employeeRequests.readEmployees().pipe((0,x.K)(t=>(0,E._)(t)))}addEmployee(t){return this.employeeRequests.createEmployee(t)}getDetailsEmployee(t){return this.employeeRequests.findEmployee(t)}removeEmployee(t){return this.employeeRequests.deleteEmployee(t)}updateInfoEmployee(t,n){return this.employeeRequests.updateEmployee(t,n)}}return o.\u0275fac=function(t){return new(t||o)(e.LFG(q.eN))},o.\u0275prov=e.Yz7({token:o,factory:o.\u0275fac,providedIn:"root"}),o})();function C(o,i){1&o&&(e.ynx(0),e.TgZ(1,"button",43),e._UZ(2,"img",44),e._uU(3," Edit "),e.qZA(),e.BQk())}function U(o,i){1&o&&(e.ynx(0),e._UZ(1,"img",48),e.BQk())}function F(o,i){1&o&&e._uU(0," Save ")}function I(o,i){if(1&o&&(e.TgZ(0,"button",45),e._UZ(1,"img",46),e.YNc(2,U,2,0,"ng-container",6),e.YNc(3,F,1,0,"ng-template",null,47,e.W1O),e.qZA()),2&o){const t=e.MAs(4),n=e.oxw();e.xp6(2),e.Q6J("ngIf",n.loading)("ngIfElse",t)}}function N(o,i){if(1&o&&(e.TgZ(0,"option",49),e._uU(1),e.qZA()),2&o){const t=i.$implicit;e.Q6J("value",t.id),e.xp6(1),e.hij(" ",t.name,"")}}function M(o,i){if(1&o&&(e.TgZ(0,"option",49),e._uU(1),e.qZA()),2&o){const t=i.$implicit;e.Q6J("value",t),e.xp6(1),e.Oqu(t)}}function w(o,i){if(1&o&&(e.TgZ(0,"option",49),e._uU(1),e.qZA()),2&o){const t=i.$implicit;e.Q6J("value",t.id),e.xp6(1),e.Oqu(t.name)}}function S(o,i){if(1&o){const t=e.EpF();e.TgZ(0,"div",50),e.TgZ(1,"label"),e._uU(2),e.qZA(),e.TgZ(3,"input",51),e.NdJ("change",function(a){return e.CHM(t).$implicit.value=a.target.value}),e.qZA(),e.qZA()}if(2&o){const t=i.$implicit,n=e.oxw();e.xp6(2),e.hij("",t.type," Percentage"),e.xp6(1),e.Q6J("value",t.value)("disabled",n.isDisabled)}}let f=(()=>{class o{constructor(t,n,a,s,m,R){this._formBuilder=t,this._departmentService=n,this._branchService=a,this._employeeService=s,this._activeRoute=m,this._router=R,this.percentageType=[],this.loading=!1,this.department=[],this.branch=[],this.gender=["male","female"],this.part="Add",this.percentageType=[{type:"Design",value:0},{type:"Providers",value:0},{type:"Special Work",value:0},{type:"Fast Work",value:0},{type:"Shipment",value:0}]}ngOnInit(){this.InitialForm(),this.fetchData(),this.subscripeRoute()}subscripeRoute(){this._activeRoute.params.subscribe(t=>{this.employeeId=+t.employeeId,this.isUpdated=null!=t.employeeId,this.isUpdated&&this.initialValueForm(),String(window.location.href).includes("form")?(this.isDisabled=!1,this.employeeForm.enable(),this.part="Edit"):String(window.location.href).includes("form")&&!this.isUpdated?this.part="Add":(this.isDisabled=!0,this.employeeForm.disable(),this.part="Info")})}initialValueForm(){this._employeeService.getDetailsEmployee(this.employeeId).subscribe(t=>{var n=t.data;this.employee=n,this.percentageType=[];var a=JSON.parse(n.salary_percentege);null!=a&&a.forEach(s=>{this.percentageType.push({type:s.type,value:s.value})}),this.employeeForm.patchValue({full_name:n.full_name,department_id:n.department.id,branch_id:n.branch.id,birthday:n.birthday,gender:n.gender,phone:n.phone,address:n.address,type_salary:n.type_salary,default_salary:n.default_salary,national_number:n.national_number,salary_percentege:this.percentageType,username:n.users[0].username,password:n.users[0].password,note:n.note})})}fetchData(){this.fetchDepartments(),this.fetchBranches()}fetchBranches(){this._branchService.getAllBranches().subscribe(t=>this.branch=t.data)}fetchDepartments(){this._departmentService.getAllDepartments().subscribe(t=>this.department=t.data)}InitialForm(){this.employeeForm=this._formBuilder.group({full_name:[null,r.kI.required],department_id:[null,r.kI.required],branch_id:[null,r.kI.required],birthday:[null,r.kI.required],username:[null,r.kI.required],gender:[null,r.kI.required],password:[null,[r.kI.required,r.kI.minLength(4),r.kI.maxLength(20)]],phone:[null,r.kI.required],address:[null],note:[null],default_salary:[0,[r.kI.min(0),r.kI.required]],user_scope:["user"],national_number:[null,[r.kI.nullValidator,r.kI.minLength(4),r.kI.maxLength(20)]],salary_percentege:[this.percentageType]})}Submit(t){this.isDisabled?(this.employeeForm.enable(),this.isDisabled=!1,this.part="Edit"):(this.loading=!0,this.isUpdated?this._employeeService.updateInfoEmployee(this.employeeId,this.employeeForm.value).pipe((0,g.x)(()=>{this.loading=!1})).subscribe(n=>{this._router.navigateByUrl("employee/all")}):this._employeeService.addEmployee(t).pipe((0,g.x)(()=>{this.loading=!1})).subscribe(n=>{this._router.navigateByUrl("employee/all")}))}}return o.\u0275fac=function(t){return new(t||o)(e.Y36(r.qu),e.Y36(v.n),e.Y36(T.b),e.Y36(Z),e.Y36(p.gz),e.Y36(p.F0))},o.\u0275cmp=e.Xpm({type:o,selectors:[["app-employee-form"]],decls:92,vars:8,consts:[[1,"nav_title_header","fs-4","fw-bold","text-center"],[1,"container"],[2,"margin-left","12rem","margin-top","6rem"],[3,"formGroup","ngSubmit"],[1,"d-flex","flex-row-reverse"],[1,"p-2"],[4,"ngIf","ngIfElse"],["elseTemplate",""],[1,"card","p-4",2,"border-radius","20px"],[1,"row"],[1,"col-md-6"],["for","fullname"],[1,"text-danger"],["type","text","id","fullname","formControlName","full_name",1,"form-control"],["for","department"],[1,"test",2,"position","inherit"],[1,"select-arrow"],["id","department","formControlName","department_id",1,"form-control"],[3,"value",4,"ngFor","ngForOf"],[1,"row","mt-4"],[1,"col-md-3"],["for","birth"],["type","date","id","birth","formControlName","birthday",1,"form-control"],["for","gender"],["name","","id","gender","formControlName","gender",1,"form-control"],["for","username"],["type","text","id","username","formControlName","username",1,"form-control"],["for","nationId"],["type","text","id","nationId","formControlName","national_number",1,"form-control"],["for","password"],["type","password","id","password","formControlName","password",1,"form-control"],["for","phone"],["type","text","id","phone","formControlName","phone",1,"form-control"],["for","branch"],["name","","id","branch","formControlName","branch_id",1,"form-control"],["for","address"],["type","text","id","address","formControlName","address",1,"form-control"],["for","basic_salary"],["type","number","min","0","id","basic_salary","formControlName","default_salary",1,"form-control"],["class","col-md-4 mt-4",4,"ngFor","ngForOf"],[1,"col-md-12"],["for","note"],["type","text","id","note","formControlName","note","rows","7",1,"form-control"],[1,"btn","btn-danger"],["src","assets/action-data/edit W.svg","width","20"],[1,"btn","btn-success"],["src","assets/action-data/save.svg","width","20"],["saveTemplate",""],["width","30","src","assets/Spinner-1s-257px.svg","alt",""],[3,"value"],[1,"col-md-4","mt-4"],["type","number","min","0","max","100",1,"form-control",3,"value","disabled","change"]],template:function(t,n){if(1&t&&(e.TgZ(0,"div",0),e._uU(1),e.qZA(),e.TgZ(2,"div",1),e.TgZ(3,"section",2),e.TgZ(4,"form",3),e.NdJ("ngSubmit",function(){return n.Submit(n.employeeForm.value)}),e.TgZ(5,"div",4),e.TgZ(6,"div",5),e.YNc(7,C,4,0,"ng-container",6),e.YNc(8,I,5,2,"ng-template",null,7,e.W1O),e.qZA(),e.qZA(),e.TgZ(10,"div",8),e.TgZ(11,"div",9),e.TgZ(12,"div",10),e.TgZ(13,"label",11),e._uU(14,"Full Name "),e.TgZ(15,"span",12),e._uU(16,"*"),e.qZA(),e.qZA(),e._UZ(17,"input",13),e.qZA(),e.TgZ(18,"div",10),e.TgZ(19,"label",14),e._uU(20,"Department "),e.TgZ(21,"span",12),e._uU(22,"*"),e.qZA(),e.qZA(),e.TgZ(23,"div",15),e.TgZ(24,"div",16),e.TgZ(25,"select",17),e.YNc(26,N,2,2,"option",18),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.TgZ(27,"div",19),e.TgZ(28,"div",20),e.TgZ(29,"label",21),e._uU(30,"Date of Birth "),e.TgZ(31,"span",12),e._uU(32,"*"),e.qZA(),e.qZA(),e._UZ(33,"input",22),e.qZA(),e.TgZ(34,"div",20),e.TgZ(35,"label",23),e._uU(36,"Gender "),e.TgZ(37,"span",12),e._uU(38,"*"),e.qZA(),e.qZA(),e.TgZ(39,"div",16),e.TgZ(40,"select",24),e.YNc(41,M,2,2,"option",18),e.qZA(),e.qZA(),e.qZA(),e.TgZ(42,"div",10),e.TgZ(43,"label",25),e._uU(44,"Username "),e.TgZ(45,"span",12),e._uU(46,"*"),e.qZA(),e.qZA(),e._UZ(47,"input",26),e.qZA(),e.qZA(),e.TgZ(48,"div",19),e.TgZ(49,"div",10),e.TgZ(50,"label",27),e._uU(51,"National ID"),e.qZA(),e._UZ(52,"input",28),e.qZA(),e.TgZ(53,"div",10),e.TgZ(54,"label",29),e._uU(55,"Password "),e.TgZ(56,"span",12),e._uU(57,"*"),e.qZA(),e.qZA(),e._UZ(58,"input",30),e.qZA(),e.qZA(),e.TgZ(59,"div",19),e.TgZ(60,"div",10),e.TgZ(61,"label",31),e._uU(62,"Phone "),e.TgZ(63,"span",12),e._uU(64,"*"),e.qZA(),e.qZA(),e._UZ(65,"input",32),e.qZA(),e.TgZ(66,"div",10),e.TgZ(67,"label",33),e._uU(68,"Branch "),e.TgZ(69,"span",12),e._uU(70,"*"),e.qZA(),e.qZA(),e.TgZ(71,"div",16),e.TgZ(72,"select",34),e.YNc(73,w,2,2,"option",18),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.TgZ(74,"div",19),e.TgZ(75,"div",10),e.TgZ(76,"label",35),e._uU(77,"Address"),e.qZA(),e._UZ(78,"input",36),e.qZA(),e.TgZ(79,"div",10),e.TgZ(80,"label",37),e._uU(81,"Basic Salary "),e.TgZ(82,"span",12),e._uU(83,"*"),e.qZA(),e.qZA(),e._UZ(84,"input",38),e.qZA(),e.qZA(),e.TgZ(85,"div",9),e.YNc(86,S,4,3,"div",39),e.qZA(),e.TgZ(87,"div",19),e.TgZ(88,"div",40),e.TgZ(89,"label",41),e._uU(90,"Note"),e.qZA(),e._UZ(91,"textarea",42),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA()),2&t){const a=e.MAs(9);e.xp6(1),e.hij("Employee > ",n.part,""),e.xp6(3),e.Q6J("formGroup",n.employeeForm),e.xp6(3),e.Q6J("ngIf",n.isDisabled)("ngIfElse",a),e.xp6(19),e.Q6J("ngForOf",n.department),e.xp6(15),e.Q6J("ngForOf",n.gender),e.xp6(32),e.Q6J("ngForOf",n.branch),e.xp6(13),e.Q6J("ngForOf",n.percentageType)}},directives:[r._Y,r.JL,r.sg,c.O5,r.Fj,r.JJ,r.u,r.EJ,c.sg,r.qQ,r.wV,r.YN,r.Kr],styles:['@charset "UTF-8";label[_ngcontent-%COMP%]{font-size:13px;margin-bottom:10px}.select-arrow[_ngcontent-%COMP%]{position:relative}.select-arrow[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]{-webkit-appearance:none;-moz-appearance:none;appearance:none}.select-arrow[_ngcontent-%COMP%]:after{position:absolute;top:9px;right:24px;content:"\\25b6";transform:rotate(90deg)}']}),o})();var d=l(7238),D=l(8259),u=l.n(D),h=l(1494),_=l(4885);function O(o,i){if(1&o&&(e.TgZ(0,"div",9),e.TgZ(1,"p",10),e._uU(2),e.qZA(),e.qZA()),2&o){const t=i.$implicit;e.xp6(1),e.Q6J("mat-sort-header",t),e.xp6(1),e.Oqu(t)}}function J(o,i){1&o&&(e.TgZ(0,"div",11),e._UZ(1,"mat-spinner"),e.qZA())}function Y(o,i){if(1&o&&(e.ynx(0),e._uU(1),e.BQk()),2&o){const t=e.oxw().$implicit;e.xp6(1),e.hij("",t.department.name," ")}}function B(o,i){1&o&&e._uU(0,"No Exsit")}function k(o,i){if(1&o){const t=e.EpF();e.TgZ(0,"div",12),e.TgZ(1,"div",13),e.TgZ(2,"div",14),e._uU(3),e.qZA(),e.TgZ(4,"div",14),e._uU(5),e.qZA(),e.TgZ(6,"div",14),e._uU(7),e.qZA(),e.TgZ(8,"div",14),e.YNc(9,Y,2,1,"ng-container",15),e.YNc(10,B,1,0,"ng-template",null,16,e.W1O),e.qZA(),e.TgZ(12,"div",14),e._uU(13),e.qZA(),e.TgZ(14,"div",17),e.TgZ(15,"img",18),e.NdJ("click",function(){const s=e.CHM(t).$implicit;return e.oxw().GetEmployeeInfo(s.id)}),e.qZA(),e._UZ(16,"div",19),e.TgZ(17,"img",20),e.NdJ("click",function(){const s=e.CHM(t).$implicit;return e.oxw().routeToEdit(s.id)}),e.qZA(),e._UZ(18,"div",19),e.TgZ(19,"img",21),e.NdJ("click",function(){const s=e.CHM(t).$implicit;return e.oxw().DeleteEmployee(s.id)}),e.qZA(),e.qZA(),e.qZA(),e.qZA()}if(2&o){const t=i.$implicit,n=e.MAs(11),a=e.oxw();e.Q6J("@in",a.DataState),e.xp6(3),e.Oqu(t.full_name),e.xp6(2),e.Oqu(t.phone),e.xp6(2),e.Oqu(t.gender),e.xp6(2),e.Q6J("ngIf",null!=t.department)("ngIfElse",n),e.xp6(4),e.Oqu(t.branch.name)}}const Q=[{path:"all",component:(()=>{class o{constructor(t,n){this._employeeService=t,this._router=n,this.loadingItems=!1,this.DataState="void",this.datasource=[],this.headers=["Name","Mobile","Gender","Department","Branch","Settings"],this.sortedData=this.datasource.slice()}ngOnInit(){this.fetchData()}fetchData(){this.getEmployees()}getEmployees(){this.loadingItems=!0,this._employeeService.getAllEmployees().pipe((0,g.x)(()=>{this.loadingItems=!1})).subscribe(t=>{this.datasource=t.data,this.sortedData=this.datasource.slice(),this.DataState="in"})}GetEmployeeInfo(t){this._router.navigate(["employee/find",t])}DeleteEmployee(t){u().fire({title:"Are you sure?",text:"You will not be able to recover this imaginary file!",icon:"warning",showCancelButton:!0,confirmButtonText:"Yes, delete it!",cancelButtonText:"No, keep it"}).then(n=>{n.isConfirmed?this._employeeService.removeEmployee(t).subscribe(a=>{u().fire("Deleted!","Your imaginary file has been deleted.","success"),this.getEmployees()}):n.dismiss===u().DismissReason.cancel&&u().fire("Cancelled","Your imaginary file is safe :)","error")})}routeToAdd(){this._router.navigate(["/employee/form"])}routeToEdit(t){this._router.navigate(["/employee/form",t])}sortData(t){const n=this.datasource.slice();this.sortedData=t.active&&""!==t.direction?n.sort((a,s)=>{const m="asc"===t.direction;switch(t.active){case"Name":return this.compare(a.Name,s.Name,m);case"Mobile":return this.compare(a.Mobile,s.Mobile,m);case"Gender":return this.compare(a.Gender,s.Gender,m);case"Department":return this.compare(a.Department,s.Department,m);case"Branch":return this.compare(a.Branch,s.Branch,m);case"Settings":return this.compare(a.Settings,s.Settings,m);default:return 0}}):n}compare(t,n,a){return(t<n?-1:1)*(a?1:-1)}}return o.\u0275fac=function(t){return new(t||o)(e.Y36(Z),e.Y36(p.F0))},o.\u0275cmp=e.Xpm({type:o,selectors:[["app-main"]],decls:12,vars:3,consts:[[1,"nav_title_header","fs-4","fw-bold","text-center"],[1,"container"],[1,"d-flex","flex-row-reverse"],[1,"btn","btn-success","mb-3","btn-add",3,"click"],["matSort","",3,"matSortChange"],[1,"row"],["class","col-md-2","style","text-align: center;font-weight: bold;font-size: 17px;",4,"ngFor","ngForOf"],["class","spinner",4,"ngIf"],["class","card mt-3 p-2","style","border-radius: 20px;",4,"ngFor","ngForOf"],[1,"col-md-2",2,"text-align","center","font-weight","bold","font-size","17px"],[3,"mat-sort-header"],[1,"spinner"],[1,"card","mt-3","p-2",2,"border-radius","20px"],[1,"row",2,"text-align","center","align-items","center"],[1,"col-md-2"],[4,"ngIf","ngIfElse"],["elseTemplate",""],[1,"col-md-2",2,"display","flex","justify-content","space-evenly"],["mat-raised-button","","matTooltip","info","matTooltipPosition","above","src","assets/action-data/Group 317.svg","width","29",2,"cursor","pointer",3,"click"],[1,"vl"],["mat-raised-button","","matTooltip","edit","matTooltipPosition","above","src","assets/action-data/edit.svg","width","29",2,"cursor","pointer",3,"click"],["mat-raised-button","","matTooltip","delete","matTooltipPosition","above","src","assets/action-data/delete.svg","width","25",2,"cursor","pointer",3,"click"]],template:function(t,n){1&t&&(e.TgZ(0,"div",0),e._uU(1,"Employee"),e.qZA(),e.TgZ(2,"div",1),e.TgZ(3,"section"),e.TgZ(4,"div",2),e.TgZ(5,"button",3),e.NdJ("click",function(){return n.routeToAdd()}),e._uU(6,"+ Add New Employee"),e.qZA(),e.qZA(),e.TgZ(7,"div",4),e.NdJ("matSortChange",function(s){return n.sortData(s)}),e.TgZ(8,"div",5),e.YNc(9,O,3,2,"div",6),e.qZA(),e.YNc(10,J,2,0,"div",7),e.YNc(11,k,20,7,"div",8),e.qZA(),e.qZA(),e.qZA()),2&t&&(e.xp6(9),e.Q6J("ngForOf",n.headers),e.xp6(1),e.Q6J("ngIf",n.loadingItems),e.xp6(1),e.Q6J("ngForOf",n.sortedData))},directives:[h.YE,c.sg,c.O5,h.nU,_.$g],styles:["section[_ngcontent-%COMP%]{margin-left:12rem;margin-top:6rem}.card[_ngcontent-%COMP%]{box-shadow:-1px 2px 6px}.vl[_ngcontent-%COMP%]{border-left:2px solid;height:35px}.spinner[_ngcontent-%COMP%]{position:absolute;left:50%;right:50%;top:50%;z-index:1000}.mat-sort-header-container[_ngcontent-%COMP%]{justify-content:center!important}"],data:{animation:[(0,d.X$)("in",[(0,d.SB)("in",(0,d.oB)({opacity:1,transform:"translateY(0)"})),(0,d.eR)("void=>*",[(0,d.oB)({opacity:0,transform:"translateY(100px)"}),(0,d.jt)(1e3)])])]}}),o})()},{path:"form",component:f},{path:"form/:employeeId",component:f},{path:"find/:employeeId",component:f}];let P=(()=>{class o{}return o.\u0275fac=function(t){return new(t||o)},o.\u0275mod=e.oAB({type:o}),o.\u0275inj=e.cJS({imports:[[p.Bz.forChild(Q)],p.Bz]}),o})(),j=(()=>{class o{}return o.\u0275fac=function(t){return new(t||o)},o.\u0275mod=e.oAB({type:o}),o.\u0275inj=e.cJS({imports:[[c.ez,r.UX,r.u5,P,h.JX,_.Cq],p.Bz]}),o})()}}]);