"use strict";(self.webpackChunklamasat=self.webpackChunklamasat||[]).push([[207],{5207:(T,m,o)=>{o.r(m),o.d(m,{ArchiveModule:()=>L});var h=o(8583),g=o(4655),u=o(3679),i=o(8939),s=o(959),d=o(8818),t=o(7716),n=o(627),v=o(6926),A=o(8295),x=o(9983),y=o(6627),S=o(1095),f=o(3220),D=o(7441),U=o(9692),G=o(1494),C=o(2458),O=o(5058);function I(r,c){if(1&r&&(t.TgZ(0,"mat-option",33),t._uU(1),t.qZA()),2&r){const e=c.$implicit;t.Q6J("value",e),t.xp6(1),t.hij("",e," ")}}function F(r,c){1&r&&(t.TgZ(0,"div",34),t.TgZ(1,"div",35),t._uU(2,"there is no DATA"),t.qZA(),t.qZA())}function E(r,c){1&r&&t._UZ(0,"ngx-skeleton-loader",36)}function q(r,c){if(1&r&&(t.TgZ(0,"div",37),t.TgZ(1,"div",38),t.TgZ(2,"div",7),t._uU(3),t.qZA(),t.TgZ(4,"div",7),t._uU(5),t.qZA(),t.TgZ(6,"div",7),t._uU(7),t.qZA(),t.TgZ(8,"div",7),t._uU(9),t.qZA(),t.qZA(),t.qZA()),2&r){const e=c.$implicit,a=t.oxw();t.Q6J("@in",a.DataState),t.xp6(3),t.Oqu(e.name),t.xp6(2),t.Oqu(e.state),t.xp6(2),t.Oqu(e.order.length),t.xp6(2),t.Oqu(e.created_at)}}const N=function(){return[5,10,25]};let b=(()=>{class r{constructor(e,a,p){this._fb=e,this._groupService=a,this._helperService=p,this.headers=["Name","State","Orders_Count","Date"],this.states=["open","inprogress","done"],this.loadingItems=!1,this.dataSource=[],this.sortedData=this.dataSource.slice(),this.DataState="void",this.DataFilterState="out",this.lastWeek=this._helperService.formatDate(this._helperService.modifyDate(new Date,7,!1),!1),this.today=this._helperService.formatDate(new Date,!1)}ngOnInit(){this.fetchData(),this.initialControls()}fetchData(){this.fetchGroups()}fetchGroups(){this.loadingItems=!0;var e=new FormData;e.append("from_date",this.lastWeek),e.append("to_date",this.today),e.append("limit","10"),e.append("page","1"),this._groupService.getGroupsPagination(e).pipe((0,i.x)(()=>this.loadingItems=!1)).subscribe(a=>{this.lengthDATA=a.data.total,this.dataSource=a.data.data.map(this._helperService.ReadDateClearly).slice(),this.sortedData=this.dataSource.slice()})}initialControls(){this.initFilterForm()}initFilterForm(){this.filterForm=this._fb.group({from_date:[Date.now(),u.kI.required],to_date:[Date.now(),u.kI.required],name:[null,u.kI.nullValidator],state:[null,u.kI.nullValidator],note:[null,u.kI.nullValidator],limit:[10,u.kI.required],page:[1,u.kI.required]})}filterGroups(e=10,a=1){this.pipeFilterForm(e,a),this._groupService.getGroupsPagination(this.filterForm.value).pipe((0,i.x)(()=>this.loadingItems=!1)).subscribe(p=>{this.dataSource=p.data.data.map(this._helperService.ReadDateClearly),this.lengthDATA=p.data.total,this.sortedData=this.dataSource.slice()})}pipeFilterForm(e,a){this.filterForm.patchValue({from_date:this._helperService.formatDate(this.filterForm.controls.from_date.value,!1),to_date:this._helperService.formatDate(this.filterForm.controls.to_date.value,!1),limit:e,page:a}),this.loadingItems=!0}sortData(e){const a=this.dataSource.slice();this.sortedData=e.active&&""!==e.direction?a.sort((p,l)=>{const Z="asc"===e.direction;switch(e.active){case"Name":return this.compare(p.Name,l.Name,Z);case"State":return this.compare(p.State,l.State,Z);case"Orders_Count":return this.compare(p.Orders_Count,l.Orders_Count,Z);case"Date":return this.compare(p.Date,l.Date,Z);default:return 0}}):a}compare(e,a,p){return(e<a?-1:1)*(p?1:-1)}}return r.\u0275fac=function(e){return new(e||r)(t.Y36(u.qu),t.Y36(n.l),t.Y36(v.s))},r.\u0275cmp=t.Xpm({type:r,selectors:[["app-archive-group"]],decls:65,vars:12,consts:[[1,"nav-title-header","fs-4","fw-bold","text-center"],[1,"container"],[1,"row","d-flex","align-items-baseline"],[1,"col-md-9"],["appearance","outline",1,"w-100"],["matInput","","placeholder","search.."],["matSuffix",""],[1,"col-md-3"],["mat-raised-button","",1,"w-100",3,"click"],[1,"card","p-3","mt-3",2,"border-radius","25px",3,"formGroup"],[1,"row"],[1,"col-md-4"],[3,"rangePicker"],["matStartDate","","formControlName","from_date","placeholder","Start date"],["matEndDate","","formControlName","to_date","placeholder","End date"],["matSuffix","",3,"for"],["picker",""],["type","text","matInput","","placeholder","Group Name...","formControlName","name"],["formControlName","state"],[3,"value",4,"ngFor","ngForOf"],[1,"row","mt-2"],[1,"col-md-8"],["rows","2","type","text","matInput","","placeholder","Group Number...","formControlName","note"],["type","submit","mat-raised-button","","color","primary",1,"text-uppercase","w-100","h-75",3,"click"],[3,"length","pageSize","pageSizeOptions","page"],["matSort","",1,"mt-3",3,"matSortChange"],["mat-sort-header","Number",1,"col-md-3","d-flex","justify-content-center",2,"text-align","center","font-weight","bold","font-size","17px"],["mat-sort-header","Name",1,"col-md-3","d-flex","justify-content-center",2,"text-align","center","font-weight","bold","font-size","17px"],["mat-sort-header","Orders_Count",1,"col-md-3","d-flex","justify-content-center",2,"text-align","center","font-weight","bold","font-size","17px"],["mat-sort-header","Date",1,"col-md-3","d-flex","justify-content-center",2,"text-align","center","font-weight","bold","font-size","17px"],["class","row p-5 text-center",4,"ngIf"],["count","10",4,"ngIf"],["class","card mt-3 p-3","style","border-radius: 20px; box-shadow: -1px 2px 6px 0px",4,"ngFor","ngForOf"],[3,"value"],[1,"row","p-5","text-center"],[1,"col-md-12","text-uppercase"],["count","10"],[1,"card","mt-3","p-3",2,"border-radius","20px","box-shadow","-1px 2px 6px 0px"],[1,"row",2,"text-align","center","align-items","center"]],template:function(e,a){if(1&e&&(t.TgZ(0,"div",0),t._uU(1,"Archive > Group"),t.qZA(),t.TgZ(2,"div",1),t.TgZ(3,"section"),t.TgZ(4,"div",2),t.TgZ(5,"div",3),t.TgZ(6,"mat-form-field",4),t.TgZ(7,"mat-label"),t._uU(8,"Search Group"),t.qZA(),t._UZ(9,"input",5),t.TgZ(10,"mat-hint"),t._uU(11,"Press Enter to search"),t.qZA(),t.TgZ(12,"mat-icon",6),t._uU(13,"search"),t.qZA(),t.qZA(),t.qZA(),t.TgZ(14,"div",7),t.TgZ(15,"button",8),t.NdJ("click",function(){return a.DataFilterState="in"==a.DataFilterState?"out":"in"}),t._uU(16," Advance Search "),t.TgZ(17,"mat-icon",6),t._uU(18,"settings_input_component"),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.TgZ(19,"div",9),t.TgZ(20,"div",10),t.TgZ(21,"div",11),t.TgZ(22,"mat-form-field",4),t.TgZ(23,"mat-label"),t._uU(24,"Date Range"),t.qZA(),t.TgZ(25,"mat-date-range-input",12),t._UZ(26,"input",13),t._UZ(27,"input",14),t.qZA(),t._UZ(28,"mat-datepicker-toggle",15),t._UZ(29,"mat-date-range-picker",null,16),t.qZA(),t.qZA(),t.TgZ(31,"div",11),t.TgZ(32,"mat-form-field",4),t.TgZ(33,"mat-label"),t._uU(34,"Group Name"),t.qZA(),t._UZ(35,"input",17),t.qZA(),t.qZA(),t.TgZ(36,"div",11),t.TgZ(37,"mat-form-field",4),t.TgZ(38,"mat-label"),t._uU(39,"State"),t.qZA(),t.TgZ(40,"mat-select",18),t.YNc(41,I,2,2,"mat-option",19),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.TgZ(42,"div",20),t.TgZ(43,"div",21),t.TgZ(44,"mat-form-field",4),t.TgZ(45,"mat-label"),t._uU(46,"Group Note"),t.qZA(),t._UZ(47,"textarea",22),t.qZA(),t.qZA(),t.TgZ(48,"div",11),t.TgZ(49,"button",23),t.NdJ("click",function(){return a.filterGroups()}),t._uU(50," Get Data "),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.TgZ(51,"mat-paginator",24),t.NdJ("page",function(l){return a.filterGroups(l.pageSize,l.pageIndex+1)}),t.qZA(),t.TgZ(52,"div",25),t.NdJ("matSortChange",function(l){return a.sortData(l)}),t.TgZ(53,"div",10),t.TgZ(54,"div",26),t._uU(55," Name "),t.qZA(),t.TgZ(56,"div",27),t._uU(57," State "),t.qZA(),t.TgZ(58,"div",28),t._uU(59," Orders Count "),t.qZA(),t.TgZ(60,"div",29),t._uU(61," Created Date "),t.qZA(),t.qZA(),t.YNc(62,F,3,0,"div",30),t.YNc(63,E,1,0,"ngx-skeleton-loader",31),t.YNc(64,q,10,5,"div",32),t.qZA(),t.qZA(),t.qZA()),2&e){const p=t.MAs(30);t.xp6(19),t.Q6J("formGroup",a.filterForm)("@slideInOut",a.DataFilterState),t.xp6(6),t.Q6J("rangePicker",p),t.xp6(3),t.Q6J("for",p),t.xp6(13),t.Q6J("ngForOf",a.states),t.xp6(10),t.Q6J("length",a.lengthDATA)("pageSize",10)("pageSizeOptions",t.DdM(11,N)),t.xp6(11),t.Q6J("ngIf",0==a.lengthDATA&&!a.loadingItems),t.xp6(1),t.Q6J("ngIf",a.loadingItems),t.xp6(1),t.Q6J("ngForOf",a.sortedData)}},directives:[A.KE,A.hX,x.Nt,A.bx,y.Hw,A.R9,S.lW,u.JL,u.sg,f.wx,f.zY,u.Fj,u.JJ,u.u,f.By,f.nW,f._g,D.gD,h.sg,U.NW,G.YE,G.nU,h.O5,C.ey,O.xr],styles:[".card[_ngcontent-%COMP%]{box-shadow:-1px 2px 6px}.vl[_ngcontent-%COMP%]{border-left:2px solid;height:35px}.mat-sort-header-container[_ngcontent-%COMP%]{justify-content:center!important}[_nghost-%COMP%]     .mat-paginator-container{justify-content:space-between}[_nghost-%COMP%]     .mat-paginator{background:transparent}"],data:{animation:[d.b,s.M]}}),r})();var j=o(9365);let J=(()=>{class r{constructor(){}ngOnInit(){}}return r.\u0275fac=function(e){return new(e||r)},r.\u0275cmp=t.Xpm({type:r,selectors:[["app-archive-invoice"]],decls:5,vars:0,consts:[[1,"nav-title-header","fs-4","fw-bold","text-center"],[1,"container"]],template:function(e,a){1&e&&(t.TgZ(0,"div",0),t._uU(1,"Archive > Invoice"),t.qZA(),t.TgZ(2,"div",1),t.TgZ(3,"section"),t._UZ(4,"shared-archive-invoice"),t.qZA(),t.qZA())},directives:[j.w],styles:[""]}),r})();var R=o(7767);const _=[{path:"order/all",component:(()=>{class r{constructor(){}ngOnInit(){}}return r.\u0275fac=function(e){return new(e||r)},r.\u0275cmp=t.Xpm({type:r,selectors:[["app-archive-order"]],decls:5,vars:0,consts:[[1,"nav-title-header","fs-4","fw-bold","text-center"],[1,"container"]],template:function(e,a){1&e&&(t.TgZ(0,"div",0),t._uU(1,"Archive > Order"),t.qZA(),t.TgZ(2,"div",1),t.TgZ(3,"section"),t._UZ(4,"shared-archive-order"),t.qZA(),t.qZA())},directives:[R.c],styles:[""]}),r})()},{path:"group/all",component:b},{path:"invoice/all",component:J}];let w=(()=>{class r{}return r.\u0275fac=function(e){return new(e||r)},r.\u0275mod=t.oAB({type:r}),r.\u0275inj=t.cJS({imports:[[g.Bz.forChild(_)],g.Bz]}),r})();var M=o(6018),P=o(71),z=o(3290);let L=(()=>{class r{}return r.\u0275fac=function(e){return new(e||r)},r.\u0275mod=t.oAB({type:r}),r.\u0275inj=t.cJS({imports:[[h.ez,u.u5,u.UX,w,M.SharedModule,P.E,z.kx]]}),r})()},3927:(T,m,o)=>{o.d(m,{s:()=>g});var h=o(1841);class g{constructor(i,s,d="http://127.0.0.1:8000"){this.http=i,this.entityname=s,this.baseURL=d,this.apiURL=`${this.baseURL}/${this.entityname}`}createEntity(i,s){return this.http.post(this.apiURL+s,i)}createEntityDownload(i,s){return this.http.post(this.apiURL+s,i,{responseType:"arraybuffer"})}readEntities(i,s){const d=new h.LE({fromObject:i});return this.http.get(this.apiURL+s,{params:d})}readEntity(i,s){const d=this.joinEntityUrl(i,s);return this.http.get(d)}updateEntity(i,s,d){const t=this.joinEntityUrl(i,d);return this.http.put(this.apiURL+t,s)}updateQueryEntity(i,s){return this.http.put(this.apiURL+s,i)}deleteEntity(i,s,d){const t=this.joinEntityUrl(i,d),n=new h.LE({fromObject:s});return this.http.delete(t,{params:n})}joinEntityUrl(i,s){return i?[this.apiURL+s,i].join("/"):[this.apiURL+s].join("/")}}},627:(T,m,o)=>{o.d(m,{l:()=>s});var h=o(3927);class g extends h.s{constructor(t){super(t,"order/group")}createGroup(t){return this.createEntity(t,"/create")}addOrderGroup(t){return this.createEntity(t,"/addTo")}readGroupsInProgress(){return this.readEntities(void 0,"/all/inprogress")}readGroupsOpen(){return this.readEntities(void 0,"/all/open")}findGroup(t){return this.readEntity(t,"/find")}deleteOrderGroup(t){return this.createEntity(t,"/deleteFrom")}deleteGroup(t){return this.deleteEntity(t,void 0,"/delete")}updateGroup(t,n){return this.updateQueryEntity(n,"/update/"+t)}filterGroup(t){return this.readEntities(void 0,"/get/"+t)}getStageGroups(t){return this.readEntities(void 0,"/stage/"+t)}changeState(t){return this.updateQueryEntity(t,"/update/state")}stageDone(t,n){return this.updateQueryEntity(t,"/stage/done/"+n)}archiveGroup(t){return this.createEntity(t,"/advanced/search")}}var u=o(7716),i=o(1841);let s=(()=>{class d{constructor(n){this.groupActions=new g(n)}filterGroup(n){return this.groupActions.filterGroup(n)}getAllGroupesNew(){return this.groupActions.readGroupsOpen()}getAllGroupesInProgress(){return this.groupActions.readGroupsInProgress()}addGroup(n){return this.groupActions.createGroup(n)}addOrdersToGroup(n){return this.groupActions.addOrderGroup(n)}removeOrdersFromGroup(n){return this.groupActions.deleteOrderGroup(n)}updateGroup(n,v){return this.groupActions.updateGroup(n,v)}removeGroup(n){return this.groupActions.deleteGroup(n)}infoGroup(n){return this.groupActions.findGroup(n)}updateState(n){return this.groupActions.changeState(n)}makeStageGroupDone(n,v){return this.groupActions.stageDone(n,v)}stageGroup(n){return this.groupActions.getStageGroups(n)}getGroupsPagination(n){return this.groupActions.archiveGroup(n)}}return d.\u0275fac=function(n){return new(n||d)(u.LFG(i.eN))},d.\u0275prov=u.Yz7({token:d,factory:d.\u0275fac,providedIn:"root"}),d})()}}]);