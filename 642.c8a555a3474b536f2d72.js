"use strict";(self.webpackChunklamasat=self.webpackChunklamasat||[]).push([[642],{2642:(q,f,d)=>{d.r(f),d.d(f,{OrderModule:()=>se});var _=d(8583),h=d(4655),m=d(8939),x=d(8259),Z=d.n(x),t=d(7716),p=d(1238),l=d(9724),c=d(7832),u=d(8295),T=d(9983),I=d(7539),b=d(6627);const k=function(r){return{"col-md-8":r}};function Q(r,a){if(1&r&&(t.TgZ(0,"div",10),t.TgZ(1,"div",11),t.TgZ(2,"div",12),t.TgZ(3,"label"),t._uU(4),t.qZA(),t.qZA(),t.TgZ(5,"div",13),t.TgZ(6,"h4",7),t._uU(7),t.qZA(),t.qZA(),t.qZA(),t.qZA()),2&r){const e=a.$implicit,n=a.index,o=t.oxw();t.Q6J("ngClass",t.VKq(3,k,n==o.order.length-1)),t.xp6(4),t.Oqu(e.text),t.xp6(3),t.Oqu(e.value)}}function P(r,a){if(1&r&&t._uU(0),2&r){const e=t.oxw().$implicit;t.Oqu(e.stage.name)}}function Y(r,a){1&r&&t._UZ(0,"img",32)}function H(r,a){1&r&&t._UZ(0,"img",32)}function R(r,a){if(1&r){const e=t.EpF();t.TgZ(0,"mat-step"),t.YNc(1,P,1,1,"ng-template",14),t.TgZ(2,"div",4),t.TgZ(3,"div",15),t.TgZ(4,"label",16),t._uU(5,"Default execution time"),t.qZA(),t.TgZ(6,"h4",7),t._uU(7),t.qZA(),t.qZA(),t.TgZ(8,"div",15),t.TgZ(9,"div",17),t.TgZ(10,"div",13),t.TgZ(11,"mat-form-field",18),t.TgZ(12,"mat-label"),t._uU(13,"Price"),t.qZA(),t.TgZ(14,"input",19),t.NdJ("input",function(o){return t.CHM(e).$implicit.price=o.target.value}),t.qZA(),t.TgZ(15,"span",20),t._uU(16,"$\xa0"),t.qZA(),t.qZA(),t.qZA(),t.TgZ(17,"div",21),t.TgZ(18,"mat-checkbox",22),t.NdJ("change",function(o){return t.CHM(e).$implicit.is_design=o.checked}),t._uU(19,"Add To Salary"),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.TgZ(20,"div",4),t.TgZ(21,"div",15),t.TgZ(22,"label",16),t._uU(23,"Mandatory"),t.qZA(),t.TgZ(24,"h4",7),t._uU(25),t.qZA(),t.qZA(),t.TgZ(26,"div",23),t.TgZ(27,"h4",24),t.TgZ(28,"mat-form-field",25),t.TgZ(29,"mat-label"),t._uU(30,"Note"),t.qZA(),t.TgZ(31,"textarea",26),t.NdJ("input",function(o){return t.CHM(e).$implicit.note=o.target.value}),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t._UZ(32,"div",27),t.TgZ(33,"button",28),t.NdJ("click",function(){const i=t.CHM(e).$implicit;return t.oxw().stageProcess(i,!1)}),t.TgZ(34,"mat-icon"),t._uU(35,"done_outline"),t.qZA(),t._uU(36," Done "),t.YNc(37,Y,1,0,"img",29),t.qZA(),t.TgZ(38,"button",30),t.NdJ("click",function(){const i=t.CHM(e).$implicit;return t.oxw().stageProcess(i,!0)}),t._UZ(39,"img",31),t._uU(40," Edit "),t.YNc(41,H,1,0,"img",29),t.qZA(),t.qZA()}if(2&r){const e=a.$implicit,n=t.oxw();t.xp6(7),t.hij("",e.stage.period," Days"),t.xp6(7),t.Q6J("required",1==e.is_design)("value",null==e.price?0:e.price),t.xp6(4),t.Q6J("checked",null!=e.is_design&&e.is_design),t.xp6(7),t.hij(" ",e.stage.is_required?"yes ":"no "," "),t.xp6(6),t.Q6J("value",e.note),t.xp6(2),t.Q6J("disabled","1"==e.is_done),t.xp6(4),t.Q6J("ngIf",n.loading),t.xp6(4),t.Q6J("ngIf",n.loadingEdit)}}let D=(()=>{class r{constructor(e,n,o){this._activatedRoute=e,this._orderService=n,this._SwalService=o,this.loading=!1,this.order=[{text:"Order Number :",value:"023456"},{text:"Order Name :",value:"Almahbba pastries"},{text:"Customer :",value:"Abo abdo"},{text:"Category :",value:"Offset printing"},{text:"Product :",value:"Business Card"},{text:"Dimensions :",value:"9 cm * 5 cm"},{text:"Count :",value:"1000"},{text:"Note:",value:""}]}ngOnInit(){this.subscripeRoute()}subscripeRoute(){this._activatedRoute.params.subscribe(e=>{this.orderId=+e.orderId,this.fetchOrderById()})}fetchOrderById(){this._orderService.infoOrder(this.orderId).subscribe(e=>{this.order[0].value=e.data.number,this.order[1].value=e.data.name,this.order[2].value=e.data.customer.name,this.order[3].value=e.data.product.category.name,this.order[4].value=e.data.product.name,this.order[5].value=e.data.length+" cm * "+e.data.width+" cm",this.order[6].value=e.data.count,this.order[7].value=e.data.note,this.stageOrders=e.data.stage_order})}stageProcess(e,n){const o={note:e.note,price:e.price,is_design:e.is_design};n?(this.loadingEdit=!0,this._orderService.editStage(e.id,o).pipe((0,m.x)(()=>this.loadingEdit=!1)).subscribe(()=>{this._SwalService.success("your stage has been edited")})):(this.loading=!0,this._orderService.updateStageDone(e.id,o).pipe((0,m.x)(()=>this.loading=!1)).subscribe(()=>{this.stageOrders.find(i=>{i==e&&(i.is_done=!0,this._SwalService.success("stage "+e.stage.name+" has been done successfuly"))})},i=>{460==i.status&&this._SwalService.error(e.stage.name,"There is a stage must be done before this!")}))}showError(e){Z().fire({icon:"error",title:"Oops..."+e.stage.name,text:"There is a stage must be done before this!"})}}return r.\u0275fac=function(e){return new(e||r)(t.Y36(h.gz),t.Y36(p.p),t.Y36(l.J))},r.\u0275cmp=t.Xpm({type:r,selectors:[["app-order-detail"]],decls:12,vars:2,consts:[[1,"nav-title-header","fs-4","fw-bold","text-center"],[1,"container"],[2,"margin-left","12rem","margin-top","6rem"],[1,"card","p-4",2,"border-radius","25px"],[1,"row"],["class","col-md-4",3,"ngClass",4,"ngFor","ngForOf"],[1,"mt-3",2,"margin-left","12rem"],[1,"fw-bolder"],["orientation","vertical"],[4,"ngFor","ngForOf"],[1,"col-md-4",3,"ngClass"],[1,"row",2,"align-items","baseline"],[1,"col-md-5"],[1,"col-md-7"],["matStepLabel",""],[1,"col-md-6"],[1,"mb-2"],[1,"row","align-items-baseline"],["appearance","outline"],["matInput","","type","number","min","0","placeholder","0.00",3,"required","value","input"],["matSuffix",""],[1,"col-md-4","justify-content-center"],["color","primary",3,"checked","change"],[1,"col-md-6","align-items-baseline"],[1,"fw-bolder","w-100"],["appearance","outline",1,"w-100"],["matInput","","rows","1",3,"value","input"],[1,"d-flex","flex-row"],[1,"btn","btn-success",3,"disabled","click"],["width","30 ","src","assets/Spinner-1s-257px.svg ",4,"ngIf"],[1,"btn","btn-danger","ms-2",3,"click"],["src","assets/action-data/edit W.svg ","width","20 "],["width","30 ","src","assets/Spinner-1s-257px.svg "]],template:function(e,n){1&e&&(t.TgZ(0,"div",0),t._uU(1,"Order > Info"),t.qZA(),t.TgZ(2,"div",1),t.TgZ(3,"section",2),t.TgZ(4,"div",3),t.TgZ(5,"div",4),t.YNc(6,Q,8,5,"div",5),t.qZA(),t.qZA(),t.qZA(),t.TgZ(7,"section",6),t.TgZ(8,"h1",7),t._uU(9,"Stages Details:"),t.qZA(),t.TgZ(10,"mat-stepper",8),t.YNc(11,R,42,9,"mat-step",9),t.qZA(),t.qZA(),t.qZA()),2&e&&(t.xp6(6),t.Q6J("ngForOf",n.order),t.xp6(5),t.Q6J("ngForOf",n.stageOrders))},directives:[_.sg,c.Vq,_.mk,c.C0,c.VY,u.KE,u.hX,T.Nt,u.R9,I.oG,b.Hw,_.O5],styles:[".card[_ngcontent-%COMP%]{box-shadow:-1px 2px 6px}.vl[_ngcontent-%COMP%]{border-left:2px solid;height:35px}.mat-sort-header-container[_ngcontent-%COMP%]{justify-content:center!important}mat-stepper[_ngcontent-%COMP%]{box-shadow:-1px 2px 6px;border-radius:25px}[_nghost-%COMP%]     mat-step-header .mat-step-icon-selected, .mat-step-header[_ngcontent-%COMP%]   .mat-step-icon-state-done[_ngcontent-%COMP%], .mat-step-header[_ngcontent-%COMP%]   .mat-step-icon-state-edit[_ngcontent-%COMP%]{background:#198754!important}"]}),r})();var S=d(6215);let O=(()=>{class r{constructor(){this.extraStages=new S.X([]),this.categorySelected=new S.X(null),this.toggleExtraStage=new S.X(!1)}getStages(){return this.extraStages.asObservable()}setStages(e){this.extraStages.next(e)}getCategory(){return this.categorySelected.asObservable()}setCategory(e){this.clearStages(),this.categorySelected.next(e)}getActiveExtra(){return this.toggleExtraStage.asObservable()}setActiveExtra(e){this.toggleExtraStage.next(e)}clearStages(){this.extraStages.next([])}}return r.\u0275fac=function(e){return new(e||r)},r.\u0275prov=t.Yz7({token:r,factory:r.\u0275fac}),r})();var g=d(3679),v=d(171),w=d(6058),L=d(9357),$=d(221),B=d(1988),G=d(1822),V=d(743),U=d(8590),N=d(1554),F=d(4885),j=d(2458);function z(r,a){1&r&&t._UZ(0,"img",80)}function W(r,a){1&r&&t._UZ(0,"mat-spinner")}function X(r,a){1&r&&t._UZ(0,"mat-spinner")}function K(r,a){1&r&&(t.ynx(0),t.TgZ(1,"option",81),t._uU(2,"Loading Items..."),t.qZA(),t.BQk())}function tt(r,a){if(1&r&&(t.TgZ(0,"mat-option",83),t._uU(1),t.qZA()),2&r){const e=a.$implicit;t.Q6J("value",e.name),t.xp6(1),t.hij(" ",e.name," ")}}function et(r,a){if(1&r&&(t.TgZ(0,"option",82),t._uU(1,"Choose Product"),t.qZA(),t.YNc(2,tt,2,2,"mat-option",43)),2&r){const e=t.oxw(2);t.xp6(2),t.Q6J("ngForOf",e.customers)}}function rt(r,a){if(1&r&&(t.TgZ(0,"option",83),t._uU(1),t.qZA()),2&r){const e=a.$implicit;t.Q6J("value",e.id),t.xp6(1),t.hij(" ",e.name," ")}}function nt(r,a){1&r&&t._UZ(0,"mat-spinner")}function ot(r,a){if(1&r&&(t.TgZ(0,"option",83),t._uU(1),t.qZA()),2&r){const e=a.$implicit;t.Q6J("value",e.id),t.xp6(1),t.hij(" ",e.name," ")}}function it(r,a){1&r&&t._UZ(0,"mat-spinner")}function at(r,a){1&r&&(t.ynx(0),t.TgZ(1,"option",81),t._uU(2,"Loading Items..."),t.qZA(),t.BQk())}function st(r,a){if(1&r&&(t.TgZ(0,"option",83),t._uU(1),t.qZA()),2&r){const e=a.$implicit;t.Q6J("value",e.id),t.xp6(1),t.hij(" ",e.name," ")}}function ct(r,a){if(1&r&&(t.TgZ(0,"option",82),t._uU(1,"Choose Product"),t.qZA(),t.YNc(2,st,2,2,"option",43)),2&r){const e=t.oxw(2);t.xp6(2),t.Q6J("ngForOf",e.products)}}function dt(r,a){if(1&r){const e=t.EpF();t.ynx(0),t.TgZ(1,"input",93),t.NdJ("input",function(){return t.CHM(e),t.oxw(3).calculate()}),t.qZA(),t._UZ(2,"validation-control",94),t.BQk()}}function lt(r,a){if(1&r&&(t.TgZ(0,"option",83),t._uU(1),t.qZA()),2&r){const e=a.$implicit;t.Q6J("value",e.to),t.xp6(1),t.hij(" ",e.to," ")}}function ut(r,a){if(1&r){const e=t.EpF();t.TgZ(0,"div",31),t.TgZ(1,"select",95),t.NdJ("change",function(){return t.CHM(e),t.oxw(3).calculate()}),t.TgZ(2,"option",82),t._uU(3,"Choose Count"),t.qZA(),t.YNc(4,lt,2,2,"option",43),t.qZA(),t._UZ(5,"validation-control",94),t.qZA()}if(2&r){const e=t.oxw(3);t.xp6(4),t.Q6J("ngForOf",e.counts)}}function gt(r,a){1&r&&(t.TgZ(0,"div",96),t.TgZ(1,"label",97),t._uU(2,"Actual Count"),t.qZA(),t._UZ(3,"input",98),t._UZ(4,"validation-control",99),t.qZA())}function pt(r,a){if(1&r){const e=t.EpF();t.TgZ(0,"div",84),t.TgZ(1,"div",85),t.TgZ(2,"label",86),t._uU(3,"Count "),t.TgZ(4,"span",17),t._uU(5,"*"),t.qZA(),t.qZA(),t.YNc(6,dt,3,0,"ng-container",35),t.YNc(7,ut,6,1,"ng-template",null,87,t.W1O),t.qZA(),t.YNc(9,gt,5,0,"div",88),t.TgZ(10,"div",89),t.TgZ(11,"div",90),t.TgZ(12,"input",91),t.NdJ("click",function(o){return t.CHM(e),t.oxw(2).toggleCustomProduct(o.target.checked)}),t.qZA(),t.TgZ(13,"label",92),t._uU(14,"Custom Product"),t.qZA(),t.qZA(),t.qZA(),t.qZA()}if(2&r){const e=t.MAs(8),n=t.oxw(2);t.xp6(6),t.Q6J("ngIf","direct"!=n.productSelect.pricing_type)("ngIfElse",e),t.xp6(3),t.Q6J("ngIf",n.customProductChecked)}}function mt(r,a){if(1&r){const e=t.EpF();t.TgZ(0,"div",96),t.TgZ(1,"div",100),t.TgZ(2,"div",14),t.TgZ(3,"div",101),t.TgZ(4,"h3"),t._uU(5),t.qZA(),t.qZA(),t.TgZ(6,"div",39),t.TgZ(7,"img",102),t.NdJ("click",function(){const i=t.CHM(e).i;return t.oxw(2).deleteExtra(i)}),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA()}if(2&r){const e=a.$implicit;t.xp6(5),t.Oqu(e.extraStage.name)}}function _t(r,a){if(1&r){const e=t.EpF();t.ynx(0),t.TgZ(1,"div",1),t._uU(2,"Order > Add"),t.qZA(),t.TgZ(3,"div",2),t.TgZ(4,"section",3),t.TgZ(5,"form",4),t.NdJ("ngSubmit",function(){return t.CHM(e),t.oxw().Submit()}),t.TgZ(6,"div",5),t.TgZ(7,"div",6),t.TgZ(8,"button",7),t._UZ(9,"img",8),t.YNc(10,z,1,0,"img",9),t._uU(11," Submit "),t.qZA(),t.TgZ(12,"button",10),t.NdJ("click",function(){return t.CHM(e),t.oxw().Reset()}),t._uU(13,"Clear"),t.qZA(),t.qZA(),t.qZA(),t.TgZ(14,"mat-accordion",11),t.TgZ(15,"mat-expansion-panel",12),t.TgZ(16,"mat-expansion-panel-header"),t.TgZ(17,"mat-panel-title"),t._uU(18," ORDER BASIC INFO "),t.qZA(),t.TgZ(19,"mat-panel-description",13),t.TgZ(20,"mat-icon"),t._uU(21,"info"),t.qZA(),t.qZA(),t.qZA(),t.TgZ(22,"div",14),t.TgZ(23,"div",15),t.TgZ(24,"label",16),t._uU(25,"Order Number "),t.TgZ(26,"span",17),t._uU(27,"*"),t.qZA(),t.qZA(),t._UZ(28,"input",18),t._UZ(29,"validation-control",19),t.qZA(),t.TgZ(30,"div",15),t.TgZ(31,"label",20),t._uU(32,"Order Name "),t.qZA(),t.TgZ(33,"div",21),t.TgZ(34,"span",22),t.NdJ("click",function(){return t.CHM(e),t.oxw().fetchNameNewOrder()}),t._uU(35),t.qZA(),t._UZ(36,"input",23),t._UZ(37,"validation-control",24),t.YNc(38,W,1,0,"mat-spinner",0),t.qZA(),t.qZA(),t.qZA(),t.TgZ(39,"div",14),t.TgZ(40,"div",25),t.TgZ(41,"label",26),t._uU(42,"Order Detail"),t.qZA(),t._UZ(43,"textarea",27),t._UZ(44,"validation-control",28),t.qZA(),t.qZA(),t.qZA(),t.TgZ(45,"mat-expansion-panel",12),t.TgZ(46,"mat-expansion-panel-header"),t.TgZ(47,"mat-panel-title"),t._uU(48," ORDER PRODUCT "),t.qZA(),t.TgZ(49,"mat-panel-description",13),t.TgZ(50,"mat-icon"),t._uU(51,"production_quantity_limits"),t.qZA(),t.qZA(),t.qZA(),t.TgZ(52,"div",29),t.TgZ(53,"div",30),t.TgZ(54,"form"),t.TgZ(55,"mat-label"),t._uU(56,"Customer"),t.qZA(),t.TgZ(57,"div",31),t.TgZ(58,"input",32),t.NdJ("input",function(o){return t.CHM(e),t.oxw().subscriptCustomer(o.target.value)}),t.qZA(),t.YNc(59,X,1,0,"mat-spinner",0),t.qZA(),t.TgZ(60,"mat-autocomplete",33,34),t.NdJ("optionSelected",function(o){return t.CHM(e),t.oxw().selectCustomer(o.option.value)}),t.YNc(62,K,3,0,"ng-container",35),t.YNc(63,et,3,1,"ng-template",null,36,t.W1O),t.qZA(),t.qZA(),t.qZA(),t.TgZ(65,"div",37),t.TgZ(66,"button",38),t.NdJ("click",function(){return t.CHM(e),t.oxw().navigate()}),t._uU(67," Add New + "),t.qZA(),t.qZA(),t.TgZ(68,"div",39),t.TgZ(69,"label",40),t._uU(70,"Request "),t.TgZ(71,"span",17),t._uU(72,"*"),t.qZA(),t.qZA(),t.TgZ(73,"div",31),t.TgZ(74,"select",41),t._UZ(75,"validation-control",42),t.YNc(76,rt,2,2,"option",43),t.qZA(),t.qZA(),t.qZA(),t.TgZ(77,"div",44),t.TgZ(78,"div",45),t.TgZ(79,"input",46),t.NdJ("change",function(o){return t.CHM(e),t.oxw().ChangeNewRequest(o.target.checked)}),t.qZA(),t.TgZ(80,"label",47),t._uU(81,"New Request"),t.qZA(),t.qZA(),t._UZ(82,"input",48),t.YNc(83,nt,1,0,"mat-spinner",0),t.qZA(),t.qZA(),t.TgZ(84,"div",14),t.TgZ(85,"div",49),t.TgZ(86,"label",50),t._uU(87,"Category "),t.TgZ(88,"span",17),t._uU(89,"*"),t.qZA(),t.qZA(),t.TgZ(90,"div",31),t.TgZ(91,"select",51),t.NdJ("change",function(o){return t.CHM(e),t.oxw().fetchProductsById(o.target.value)}),t.YNc(92,ot,2,2,"option",43),t.qZA(),t._UZ(93,"validation-control",52),t.qZA(),t.qZA(),t.TgZ(94,"div",49),t.TgZ(95,"label",53),t._uU(96,"Product "),t.TgZ(97,"span",17),t._uU(98,"*"),t.qZA(),t.qZA(),t.TgZ(99,"div",31),t.YNc(100,it,1,0,"mat-spinner",0),t.TgZ(101,"select",54),t.NdJ("click",function(o){return t.CHM(e),t.oxw().showQuantityPrice(o.target.value)}),t._UZ(102,"validation-control",55),t.YNc(103,at,3,0,"ng-container",35),t.YNc(104,ct,3,1,"ng-template",null,56,t.W1O),t.qZA(),t.qZA(),t.qZA(),t.TgZ(106,"div",49),t.TgZ(107,"label",57),t._uU(108,"Length "),t.TgZ(109,"span",17),t._uU(110,"*"),t.qZA(),t.qZA(),t.TgZ(111,"input",58),t.NdJ("input",function(){return t.CHM(e),t.oxw().calculate()}),t.qZA(),t._UZ(112,"validation-control",59),t.qZA(),t.TgZ(113,"div",49),t.TgZ(114,"label",60),t._uU(115,"Width "),t.TgZ(116,"span",17),t._uU(117,"*"),t.qZA(),t.qZA(),t.TgZ(118,"input",61),t.NdJ("input",function(){return t.CHM(e),t.oxw().calculate()}),t.qZA(),t._UZ(119,"validation-control",62),t.qZA(),t.qZA(),t.YNc(120,pt,15,3,"div",63),t.qZA(),t.TgZ(121,"mat-expansion-panel",64),t.TgZ(122,"mat-expansion-panel-header"),t.TgZ(123,"mat-panel-title"),t._uU(124," ORDER EXTRA STAGES "),t.qZA(),t.TgZ(125,"mat-panel-description",65),t.TgZ(126,"p",66),t._uU(127),t.qZA(),t.TgZ(128,"mat-icon"),t._uU(129,"production_quantity_limits"),t.qZA(),t.qZA(),t.qZA(),t.TgZ(130,"div",67),t.YNc(131,mt,8,1,"div",68),t.TgZ(132,"div",49),t.TgZ(133,"button",69),t.NdJ("click",function(){return t.CHM(e),t.oxw().activeExtraStage()}),t._uU(134," +Add Extra Stages "),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.TgZ(135,"mat-expansion-panel",12),t.TgZ(136,"mat-expansion-panel-header"),t.TgZ(137,"mat-panel-title"),t._uU(138," ORDER CALCULATION "),t.qZA(),t.TgZ(139,"mat-panel-description",13),t.TgZ(140,"mat-icon"),t._uU(141,"calculate"),t.qZA(),t.qZA(),t.qZA(),t.TgZ(142,"div",29),t.TgZ(143,"div",70),t.TgZ(144,"label",71),t._uU(145,"Discount"),t.qZA(),t.TgZ(146,"div",72),t.TgZ(147,"input",73),t.NdJ("input",function(){return t.CHM(e),t.oxw().calculate()}),t.qZA(),t._UZ(148,"validation-control",74),t.qZA(),t.qZA(),t.TgZ(149,"div",70),t.TgZ(150,"label",75),t._uU(151,"Total Amount "),t.TgZ(152,"span",17),t._uU(153,"*"),t.qZA(),t.qZA(),t._UZ(154,"input",76),t.qZA(),t.TgZ(155,"div",37),t.TgZ(156,"div",77),t._UZ(157,"input",78),t.TgZ(158,"label",79),t._uU(159,"Design Fee"),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.BQk()}if(2&r){const e=t.MAs(61),n=t.MAs(64),o=t.MAs(105),i=t.oxw();t.xp6(5),t.Q6J("formGroup",i.orderForm),t.xp6(5),t.Q6J("ngIf",i.loading),t.xp6(4),t.Q6J("multi",!0),t.xp6(1),t.Q6J("expanded",!0),t.xp6(20),t.hij(" ",i.orderNewName," "),t.xp6(3),t.Q6J("ngIf",i.loadingOrderNew),t.xp6(7),t.Q6J("expanded",!0),t.xp6(13),t.Q6J("matAutocomplete",e),t.xp6(1),t.Q6J("ngIf",i.loadingCustomers),t.xp6(3),t.Q6J("ngIf",i.loadingCustomers)("ngIfElse",n),t.xp6(14),t.Q6J("ngForOf",null==i.customerSelected?null:i.customerSelected.request),t.xp6(7),t.Q6J("ngIf",i.loadingRequestNew),t.xp6(9),t.Q6J("ngForOf",i.categories),t.xp6(8),t.Q6J("ngIf",i.loadingItems),t.xp6(1),t.Q6J("disabled",i.loadingItems),t.xp6(2),t.Q6J("ngIf",i.loadingItems)("ngIfElse",o),t.xp6(17),t.Q6J("ngIf",i.productSelect!=i.n),t.xp6(1),t.Q6J("disabled",null==i.productSelect),t.xp6(6),t.Oqu(i.sumExtraAmount),t.xp6(4),t.Q6J("ngForOf",i.extraStages),t.xp6(4),t.Q6J("expanded",!0)}}let ht=(()=>{class r{constructor(e,n,o,i,s,C,M,ce){this._customer=e,this._category=n,this.fb=o,this._router=i,this._orderService=s,this._orderStage=C,this._userService=M,this._validationService=ce,this.discountInternal=0,this.loading=!1,this.productIdSelected=0,this.productSelect=null,this.loadingItems=!1,this.showOrHide=!0,this.extraStages=[],this.sumExtraAmount=0,this.customProductChecked=!1,this.newRequest=!1,this.customers=[],this.selectedCustomers=void 0,this.loadingCustomers=!1,this.orderNewName="",this.loadingRequestNew=!1,this.loadingOrderNew=!1,this.formSubmit=!1}ngOnInit(){this.initialForm(),this.fetchData()}subscriptCustomer(e){this.loadingCustomers=!0,this._customer.getCustomersLazyLoad({text:e}).pipe((0,m.x)(()=>this.loadingCustomers=!1)).subscribe(n=>{this.customers=[],this.customers=n.data.data.slice()})}initialForm(){this.orderForm=this.fb.group({number:[null,g.kI.required],name:["",g.kI.nullValidator],length:[{value:0,disabled:!0},g.kI.required],width:[{value:0,disabled:!0},g.kI.required],count:[null,g.kI.required],amount:[null,g.kI.nullValidator],finale_amount:[0,g.kI.nullValidator],product_id:[null,g.kI.required],customer_id:[null,g.kI.required],category_id:[null,g.kI.required],discount:[null,g.kI.nullValidator],without_design:[!0,g.kI.nullValidator],note:[null,g.kI.nullValidator],is_custom:[null,g.kI.nullValidator],custom_count:[0,g.kI.nullValidator],extra_amount:[0,g.kI.nullValidator],extra:[null,g.kI.nullValidator],new_request:[!1,g.kI.required],request_name:[this.orderNewName,g.kI.nullValidator],request_order_id:[{value:null,disabled:!0},g.kI.nullValidator]}),this._validationService.formSubject.next({form:this.orderForm,submit:this.formSubmit}),this.orderForm.valueChanges.subscribe(()=>{this._validationService.formSubject.next({form:this.orderForm,submit:this.formSubmit})})}fetchData(){this.fetchCategories(),this.fetchActivated(),this.fetchExtraStages(),this.fetchNameNewOrder()}fetchNameNewOrder(){this.loadingOrderNew=!0,this._userService.getNewNamesModel(w.i.Order).pipe((0,m.x)(()=>this.loadingOrderNew=!1)).subscribe(e=>this.orderNewName=e.data)}fetchExtraStages(){this._orderStage.getStages().subscribe(e=>{this.extraStages=e,this.sumExtraAmount=this.extraStages.reduce((n,o)=>n+ +o.amount,0),this.calculate()})}fetchActivated(){this._orderStage.getActiveExtra().subscribe(e=>this.showOrHide=e)}fetchCategories(){this._category.getAllCategories().subscribe(e=>this.categories=e.data.slice())}fetchProductsById(e){this._orderStage.setCategory(this.categories.find(n=>n.id==+e)),this.loadingItems=!0,this._orderStage.clearStages(),this._category.infoCat(e).pipe((0,m.x)(()=>this.loadingItems=!1)).subscribe(n=>{this.products=[],this.counts=[],this.orderForm.patchValue({length:0,width:0,product_id:null,count:null,amount:null,custom_count:0}),this.productSelect=null,this.calculate(),n.data.customer.forEach(s=>{null!=this.customerSelected&&s.id==this.customerSelected.id&&(this.discountInternal=s.discount)}),n.data.products.forEach(s=>{this.products.push({id:s.id,name:s.name,quantity_price:JSON.parse(String(s.quantity_price)),category_id:s.category_id,description:s.description,length:s.length,period:s.period,price:s.price,width:s.width,category:s.category,pricing_type:s.pricing_type})})})}showQuantityPrice(e){""!=e&&(this.productIdSelected=+e,this.productSelect=this.products.find(n=>n.id==this.productIdSelected),this.counts=[],this.counts=this.productSelect.quantity_price,"space"==this.productSelect.pricing_type?(this.orderForm.get("length").enable(),this.orderForm.get("width").enable()):(this.orderForm.get("length").disable(),this.orderForm.get("width").disable()),this.orderForm.patchValue({length:this.productSelect.length,width:this.productSelect.width}))}selectCustomer(e){this.customerSelected=this.customers.find(n=>n.name==e?n:null),null==this.customerSelected||0==this.customerSelected.request.length?this.orderForm.controls.request_order_id.disable():this.orderForm.controls.request_order_id.enable(),this.orderForm.patchValue({length:0,width:0,product_id:null,count:null,amount:null,category_id:null,custom_count:0,customer_id:this.customerSelected.id}),this.discountInternal=0,this.productSelect=null,this.calculate(),this.counts=[],this.products=[]}calculate(){var n=this.orderForm.controls.discount.value;this.orderForm.patchValue({amount:null==this.productSelect?0:this.calculateAmount()});var o=+this.orderForm.controls.amount.value;this.orderForm.get("finale_amount"),this.orderForm.patchValue({finale_amount:o-o*((null==n?this.discountInternal:+n)/100)+this.sumExtraAmount})}calculateAmount(){var e=+this.orderForm.get("count").value;if("direct"==this.productSelect.pricing_type)return this.productSelect.quantity_price.find(s=>s.to==e).price;if("piece"==this.productSelect.pricing_type)return this.orderForm.get("length").enable(),this.orderForm.get("width").enable(),this.productSelect.quantity_price.sort(s=>s.from).find(s=>s.from<=e&&s.to>=e).price*e;var i=+this.orderForm.get("length").value*+this.orderForm.get("width").value;return this.productSelect.quantity_price.sort(s=>s.from).find(s=>s.from<=e&&s.to>=e).price*e*i}Submit(){this.formSubmit=!0;var e=this.orderForm.get("length").disabled;if(this.orderForm.valid){var n=[];this.extraStages.forEach(o=>{var i,s;n.push({id:o.extraStage.id,length:null!==(i=o.extraStage.lengthCustom)&&void 0!==i?i:0,width:null!==(s=o.extraStage.widthCustom)&&void 0!==s?s:0,count:o.extraStage.countCustom,amount:o.amount})}),this.orderForm.patchValue({without_design:"yes"==this.orderForm.get("without_design").value,is_custom:"yes"==this.orderForm.get("is_custom").value,extra_amount:this.sumExtraAmount,extra:n,name:this.orderNewName+this.orderForm.get("name").value}),0==this.sumExtraAmount&&this.orderForm.removeControl("extra_amount"),0==n.length&&this.orderForm.removeControl("extra"),e&&(this.orderForm.get("length").enable(),this.orderForm.get("width").enable()),this._orderService.addOrder(this.orderForm.value).subscribe(o=>{this._router.navigate(["/order/all"])},o=>{this.formSubmit=!1,e||(this.orderForm.get("length").disable(),this.orderForm.get("width").disable())})}else this._validationService.validateAllFormFields(this.orderForm),this._validationService.formSubject.next({form:this.orderForm,submit:this.formSubmit})}toggleCustomProduct(e){if(this.customProductChecked=e,e||"space"==this.productSelect.pricing_type)this.orderForm.controls.length.enable(),this.orderForm.controls.width.enable();else if(this.orderForm.controls.length.disable(),this.orderForm.controls.width.disable(),null!=this.products){var n=this.products.find(o=>o);this.orderForm.patchValue({length:n.length,width:n.width})}}navigate(){this._router.navigate(["/customer/form"])}activeExtraStage(){this._orderStage.setActiveExtra(!0)}deleteExtra(e){this.extraStages.splice(e,1),this._orderStage.setStages(this.extraStages)}Reset(){this.orderForm.reset(),this.orderForm.removeControl("extra"),this.orderForm.removeControl("without_design"),this.orderForm.removeControl("is_custom"),this.orderForm.removeControl("extra_amount"),this.extraStages=[],this.orderForm.controls.length.disable(),this.orderForm.controls.width.disable(),this.customProductChecked=!1,this.productSelect=null}ChangeNewRequest(e){this.orderForm.controls.request_order_id.disabled&&null!=this.customerSelected?this.orderForm.controls.request_order_id.enable():this.orderForm.controls.request_order_id.disable(),e&&(this.loadingRequestNew=!0,this._userService.getNewNamesModel(w.i.RequestOrder).pipe((0,m.x)(()=>this.loadingRequestNew=!1)).subscribe(n=>this.orderForm.patchValue({request_name:n.data})))}}return r.\u0275fac=function(e){return new(e||r)(t.Y36(L.v),t.Y36($.H),t.Y36(g.qu),t.Y36(h.F0),t.Y36(p.p),t.Y36(O),t.Y36(B.K),t.Y36(G.R))},r.\u0275cmp=t.Xpm({type:r,selectors:[["app-order-form"]],viewQuery:function(e,n){if(1&e&&t.Gf(v.pp,5),2&e){let o;t.iGM(o=t.CRH())&&(n.accordion=o.first)}},decls:1,vars:1,consts:[[4,"ngIf"],[1,"nav-title-header","fs-4","fw-bold","text-center"],[1,"container"],[1,"mb-5",2,"margin-left","12rem","margin-top","6rem"],[3,"formGroup","ngSubmit"],[1,"d-flex","flex-row-reverse"],[1,"p-2"],[1,"btn","btn-success"],["src","assets/action-data/save.svg","width","20"],["width","30","src","assets/Spinner-1s-257px.svg","alt","",4,"ngIf"],[1,"btn","btn-danger","ms-2",3,"click"],[1,"example-headers-align","mt-3","mb-4","col-md-4",2,"position","relative",3,"multi"],[3,"expanded"],[1,"d-flex","justify-content-end"],[1,"row"],[1,"col-md-6"],["for","number"],[1,"text-danger"],["type","text","id","number","formControlName","number",1,"form-control"],["field","number"],["for","number",1,"position-relative"],[1,"input-icons","position-relative"],["mat-raised-button","","matTooltip","Refresh New Name","matTooltipPosition","above",1,"fw-bold","h-100","p-2","position-absolute","h-100","cursor-pointer",3,"click"],["type","text","id","number","formControlName","name",1,"form-control","input-field","text-center"],["field","name"],[1,"col-md-12","mt-3"],["for","detail"],["formControlName","note","name","detail","id","detail","cols","30","rows","3",1,"form-control"],["field","note"],[1,"row","align-items-end","d-flex"],[1,"col-md-4"],[1,"select-arrow"],["type","text","placeholder","Search Customer...","aria-label","Customer","matInput","",1,"form-control",3,"matAutocomplete","input"],[3,"optionSelected"],["auto","matAutocomplete"],[4,"ngIf","ngIfElse"],["elseLoadedCustomer",""],[1,"col-md-2"],[1,"btn","btn-primary",3,"click"],[1,"col-md-3"],["for","request"],["name","","id","request","formControlName","request_order_id",1,"form-control"],["field","request_order_id"],[3,"value",4,"ngFor","ngForOf"],[1,"col-md-3","position-relative"],[1,"form-check","form-switch"],["type","checkbox","id","flexSwitchCheckDefault","formControlName","new_request",1,"form-check-input",3,"change"],["for","flexSwitchCheckDefault",1,"form-check-label"],["type","text","disabled","","formControlName","request_name",1,"form-control"],[1,"col-md-3","mt-3"],["for","category"],["name","","id","category","formControlName","category_id",1,"form-control",3,"change"],["field","category_id"],["for","product"],["name","product","id","product","formControlName","product_id",1,"form-control",3,"disabled","click"],["field","product_id"],["elseLoaded",""],["for","length"],["min","0","type","number","formControlName","length","id","length",1,"form-control",3,"input"],["field","length"],["for","width"],["min","0","type","number","formControlName","width","id","width",1,"form-control",3,"input"],["field","width"],["class","row align-items-end",4,"ngIfUll","ngIf"],[3,"disabled"],[1,"d-flex","justify-content-end","mat-description"],[1,"sum-extra-stage"],[1,"row","align-items-center"],["class","col-md-4 mt-3",4,"ngFor","ngForNdex","ngForOf"],["type","button",1,"btn","btn-primary",3,"click"],[1,"col-md-5"],["for","discount"],[1,"discount-percent"],["minlength","0","maxlength","100","max","100","min","0","type","number","formControlName","discount","id","discount",1,"form-control",3,"input"],["field","discount"],["for","amount"],["min","0","type","number","disabled","","id","amount","formControlName","finale_amount",1,"form-control"],[1,"form-check","fs-5"],["type","checkbox","id","is_charge","name","is_charge","formControlName","without_design","value","yes",1,"form-check-input"],["for","is_charge",1,"form-check-label"],["width","30","src","assets/Spinner-1s-257px.svg","alt",""],["selected","","hidden",""],["hidden","","selected",""],[3,"value"],[1,"row","align-items-end"],[1,"col-md-6","mt-3"],["for","count"],["elseTemplate",""],["class","col-md-4 mt-3",4,"ngIf"],[1,"col-md-2","mt-3"],[1,"form-check"],["formControlName","is_custom","type","checkbox","id","custom_product","name","custom_product","value","yes",1,"form-check-input",3,"click"],["for","custom_product",1,"form-check-label"],["type","number","formControlName","count","name","count","id","count","min","1",1,"form-control",3,"input"],["field","count"],["name","","id","count","formControlName","count",1,"form-control",3,"change"],[1,"col-md-4","mt-3"],["for","actual_count"],["type","number","min","1","name","actual_count","id","actual_count","formControlName","custom_count",1,"form-control"],["field","custom_count"],[1,"card","p-2"],[1,"col-md-9"],["mat-raised-button","","matTooltip","delete","matTooltipPosition","above","src","assets/action-data/delete.svg","width","23",1,"cursor-pointer","mt-3",3,"click"]],template:function(e,n){1&e&&t.YNc(0,_t,160,23,"ng-container",0),2&e&&t.Q6J("ngIf",!n.showOrHide)},directives:[_.O5,g._Y,g.JL,g.sg,v.pp,v.ib,v.yz,v.yK,v.u4,b.Hw,g.Fj,g.JJ,g.u,V.n,U.gM,g.F,u.hX,T.Nt,N.ZL,N.XC,g.EJ,_.sg,g.Wl,g.qQ,g.wV,g.Fd,g.wO,g.nD,F.$g,g.YN,g.Kr,j.ey],styles:['@charset "UTF-8";label[_ngcontent-%COMP%]{font-size:13px;margin-bottom:10px}.select-arrow[_ngcontent-%COMP%]{position:relative}.select-arrow[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]{-webkit-appearance:none;-moz-appearance:none;appearance:none}.select-arrow[_ngcontent-%COMP%]:after{position:absolute;top:9px;right:24px;content:"\\25b6";transform:rotate(90deg)}.discount-percent[_ngcontent-%COMP%]{position:relative}.discount-percent[_ngcontent-%COMP%]:after{position:absolute;top:9px;right:32px;content:"%"}.example-headers-align[_ngcontent-%COMP%]   .mat-expansion-panel-header-title[_ngcontent-%COMP%], .example-headers-align[_ngcontent-%COMP%]   .mat-expansion-panel-header-description[_ngcontent-%COMP%]{flex-basis:0}.example-headers-align[_ngcontent-%COMP%]   .mat-expansion-panel-header-description[_ngcontent-%COMP%]{justify-content:space-between;align-items:center}.example-headers-align[_ngcontent-%COMP%]   .mat-form-field[_ngcontent-%COMP%] + .mat-form-field[_ngcontent-%COMP%]{margin-left:8px}mat-expansion-panel[_ngcontent-%COMP%]{border-radius:20px;margin-bottom:20px}[_nghost-%COMP%]     mat-spinner{width:25px!important;height:25px!important;position:absolute!important;top:7px!important;right:43px!important}[_nghost-%COMP%]     mat-spinner svg{width:25px!important;height:25px!important}[_nghost-%COMP%]     .mat-progress-spinner circle, .mat-spinner[_ngcontent-%COMP%]   circle[_ngcontent-%COMP%]{stroke:#000!important}.card[_ngcontent-%COMP%]{border-radius:20px!important}.sum-extra-stage[_ngcontent-%COMP%]{position:absolute;left:0;top:3px;font-size:1.2rem!important;font-weight:bolder!important}.mat-description[_ngcontent-%COMP%]{position:relative}.input-icons[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{border-right:1px solid #ced4da}']}),r})();var Zt=d(8649);function ft(r,a){if(1&r){const e=t.EpF();t.ynx(0),t.TgZ(1,"div",6),t.TgZ(2,"div",13),t.TgZ(3,"label",15),t._uU(4,"Length "),t.TgZ(5,"span",16),t._uU(6,"*"),t.qZA(),t.qZA(),t.TgZ(7,"input",17),t.NdJ("input",function(o){return t.CHM(e),t.oxw().$implicit.lengthCustom=o.target.value}),t.qZA(),t.qZA(),t.TgZ(8,"div",13),t.TgZ(9,"label",18),t._uU(10,"Width "),t.TgZ(11,"span",16),t._uU(12,"*"),t.qZA(),t.qZA(),t.TgZ(13,"input",17),t.NdJ("input",function(o){return t.CHM(e),t.oxw().$implicit.widthCustom=o.target.value}),t.qZA(),t.qZA(),t.qZA(),t.TgZ(14,"div",12),t.TgZ(15,"div",19),t.TgZ(16,"label",20),t._uU(17,"Count"),t.qZA(),t.TgZ(18,"input",17),t.NdJ("input",function(o){return t.CHM(e),t.oxw().$implicit.countCustom=o.target.value}),t.qZA(),t.TgZ(19,"p",21),t._uU(20),t.qZA(),t.qZA(),t.qZA(),t.BQk()}if(2&r){const e=t.oxw().$implicit,n=t.oxw(2);t.xp6(7),t.Q6J("disabled",n.disableStage(e)),t.xp6(6),t.Q6J("disabled",n.disableStage(e)),t.xp6(5),t.Q6J("disabled",n.disableStage(e)),t.xp6(2),t.Oqu(e.countMessage)}}function vt(r,a){if(1&r&&(t.TgZ(0,"option",26),t._uU(1),t.qZA()),2&r){const e=a.$implicit;t.Q6J("value",e.to),t.xp6(1),t.Oqu(e.to)}}function xt(r,a){if(1&r){const e=t.EpF();t.ynx(0),t.TgZ(1,"div",6),t.TgZ(2,"div",19),t.TgZ(3,"label",20),t._uU(4,"Count"),t.qZA(),t.TgZ(5,"select",23),t.NdJ("change",function(o){return t.CHM(e),t.oxw(2).$implicit.countCustom=o.target.value}),t.TgZ(6,"option",24),t._uU(7,"Choose Count"),t.qZA(),t.YNc(8,vt,2,2,"option",25),t.qZA(),t.qZA(),t.qZA(),t.BQk()}if(2&r){const e=t.oxw(2).$implicit,n=t.oxw(2);t.xp6(5),t.Q6J("disabled",n.disableStage(e)),t.xp6(3),t.Q6J("ngForOf",e.quantity_price)}}function Tt(r,a){if(1&r){const e=t.EpF();t.TgZ(0,"div",6),t.TgZ(1,"div",19),t.TgZ(2,"label",20),t._uU(3,"Count"),t.qZA(),t.TgZ(4,"input",17),t.NdJ("input",function(o){return t.CHM(e),t.oxw(2).$implicit.countCustom=o.target.value}),t.qZA(),t.TgZ(5,"p",21),t._uU(6),t.qZA(),t.qZA(),t.qZA()}if(2&r){const e=t.oxw(2).$implicit,n=t.oxw(2);t.xp6(4),t.Q6J("disabled",n.disableStage(e)),t.xp6(2),t.Oqu(e.countMessage)}}function At(r,a){if(1&r&&(t.YNc(0,xt,9,2,"ng-container",10),t.YNc(1,Tt,7,2,"ng-template",null,22,t.W1O)),2&r){const e=t.MAs(2),n=t.oxw().$implicit;t.Q6J("ngIf","direct"==n.pricing_type)("ngIfElse",e)}}function Ct(r,a){if(1&r){const e=t.EpF();t.TgZ(0,"div",8),t.TgZ(1,"mat-accordion",9),t.TgZ(2,"mat-expansion-panel"),t.TgZ(3,"mat-expansion-panel-header"),t.TgZ(4,"mat-panel-title"),t.TgZ(5,"h2"),t._uU(6),t.qZA(),t.qZA(),t.qZA(),t.YNc(7,ft,21,4,"ng-container",10),t.YNc(8,At,3,2,"ng-template",null,11,t.W1O),t.TgZ(10,"div",12),t.TgZ(11,"div",13),t.TgZ(12,"button",14),t.NdJ("click",function(){const i=t.CHM(e).$implicit;return t.oxw(2).chooseStage(i)}),t._uU(13,"Selected"),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA()}if(2&r){const e=a.$implicit,n=t.MAs(9),o=t.oxw(2);t.xp6(6),t.Oqu(e.name),t.xp6(1),t.Q6J("ngIf","space"==e.pricing_type)("ngIfElse",n),t.xp6(5),t.Q6J("disabled",o.disableStage(e))}}function qt(r,a){if(1&r){const e=t.EpF();t.ynx(0),t.TgZ(1,"div",1),t._uU(2),t.qZA(),t.TgZ(3,"div",2),t.TgZ(4,"section"),t.TgZ(5,"div",3),t.TgZ(6,"button",4),t.NdJ("click",function(){return t.CHM(e),t.oxw().deactivatedExtra()}),t._UZ(7,"img",5),t._uU(8," Add Selected "),t.qZA(),t.qZA(),t.TgZ(9,"div",6),t.YNc(10,Ct,14,4,"div",7),t.qZA(),t.qZA(),t.qZA(),t.BQk()}if(2&r){const e=t.oxw();t.xp6(2),t.hij("Order > Extra Stages > ",e.categorySelected.name,""),t.xp6(8),t.Q6J("ngForOf",e.dataSource)}}let Ot=(()=>{class r{constructor(e,n){this._orderStage=e,this._extraStage=n,this.selectedStages=[],this.showOrHide=!1}ngOnInit(){this.fetchData(),this.fetchActivated(),this.fetchSelectedStages()}fetchSelectedStages(){this._orderStage.getStages().subscribe(e=>this.selectedStages=e)}fetchActivated(){this._orderStage.getActiveExtra().subscribe(e=>this.showOrHide=e)}fetchData(){this._orderStage.getCategory().subscribe(e=>{null!=e&&(this.categorySelected=e,this._extraStage.getStagesByCategoryId(e.id).subscribe(n=>{this.dataSource=n.data,this.dataSource.forEach(o=>{o.stageDisabled=!1,o.quantity_price=JSON.parse(String(o.quantity_price)),o.countMessage="direct"!=o.pricing_type?"count must be between "+o.quantity_price.sort(i=>i.from)[0].from+" - "+o.quantity_price.sort(i=>i.to)[o.quantity_price.length-1].to:""})}))})}chooseStage(e){this.dataSource.forEach(i=>{i.id==e.id&&(i.stageDisabled=!0)});var n=0;if("space"==e.pricing_type){var o=e.lengthCustom*e.widthCustom;n=e.quantity_price.sort(i=>i.from).find(i=>i.from<=e.countCustom&&i.to>=e.countCustom).price*e.countCustom*o}else n="piece"==e.pricing_type?e.quantity_price.sort(i=>i.from).find(i=>i.from<=e.countCustom&&i.to>=e.countCustom).price*e.countCustom:e.quantity_price.find(i=>i.to==e.countCustom).price;this.selectedStages.push({extraStage:e,amount:n})}disableStage(e){return null!=this.selectedStages.find(n=>n.extraStage.id==e.id)}deactivatedExtra(){this._orderStage.setActiveExtra(!1),this._orderStage.setStages(this.selectedStages)}}return r.\u0275fac=function(e){return new(e||r)(t.Y36(O),t.Y36(Zt.f))},r.\u0275cmp=t.Xpm({type:r,selectors:[["app-select-extra-stage"]],decls:1,vars:1,consts:[[4,"ngIf"],[1,"nav-title-header","fs-4","fw-bold","text-center"],[1,"container"],[1,"d-flex","flex-row-reverse"],[1,"btn","btn-success",3,"click"],["src","assets\\action-data\\save.svg","alt","check","width","23"],[1,"row"],["class","col-md-6 mt-3 extra-stage",4,"ngFor","ngForOf"],[1,"col-md-6","mt-3","extra-stage"],[1,"example-headers-align","mt-3","mb-1","col-md-4"],[4,"ngIf","ngIfElse"],["elseTemplate",""],[1,"row","mt-3"],[1,"col-md-6"],[1,"btn","btn-success",3,"disabled","click"],["for","length"],[1,"text-danger"],["type","number","min","1","required","",1,"form-control",3,"disabled","input"],["for","width"],[1,"col-md-12"],["for","count"],[1,"messageHint"],["elseTemplate2",""],["name","count","id","","required","",1,"form-control",3,"disabled","change"],["hidden","","selected",""],[3,"value",4,"ngFor","ngForOf"],[3,"value"]],template:function(e,n){1&e&&t.YNc(0,qt,11,2,"ng-container",0),2&e&&t.Q6J("ngIf",n.showOrHide)},directives:[_.O5,_.sg,v.pp,v.ib,v.yz,v.yK,g.YN,g.Kr],styles:["label[_ngcontent-%COMP%]{margin-bottom:.5rem!important}.messageHint[_ngcontent-%COMP%]{color:gray}"]}),r})(),bt=(()=>{class r{constructor(e){this._orderStage=e,this._orderStage.clearStages(),this._orderStage.setActiveExtra(!1)}ngOnInit(){}}return r.\u0275fac=function(e){return new(e||r)(t.Y36(O))},r.\u0275cmp=t.Xpm({type:r,selectors:[["app-order-extra-stage"]],decls:2,vars:0,template:function(e,n){1&e&&(t._UZ(0,"app-order-form"),t._UZ(1,"app-select-extra-stage"))},directives:[ht,Ot],styles:[""]}),r})();var St=d(5267),A=d(8603),yt=d(627),y=d(3935),Mt=d(1095),J=d(9992),E=d(4256);let wt=(()=>{class r{transform(e,n){return 0!==e.length&&""!==n&&void 0!==n?e.filter(o=>o.number.toLowerCase().includes(n.toLowerCase())||o.name.toLowerCase().includes(n.toLowerCase())||null!=o.product&&o.product.name.toLowerCase().includes(n.toLowerCase())||o.customer.name.toLowerCase().includes(n.toLowerCase())||0!=o.group.length&&o.group[0].name.toLowerCase().includes(n.toLowerCase())):e}}return r.\u0275fac=function(e){return new(e||r)},r.\u0275pipe=t.Yjl({name:"search",type:r,pure:!0}),r})();const Ut=["orderLists"],Nt=["groupLists"];function Ft(r,a){1&r&&(t.ynx(0),t.TgZ(1,"mat-icon"),t._uU(2,"view_list"),t.qZA(),t.BQk())}function Jt(r,a){1&r&&(t.TgZ(0,"mat-icon"),t._uU(1,"view_module"),t.qZA())}function Et(r,a){1&r&&(t.TgZ(0,"div",46),t._UZ(1,"mat-spinner"),t.qZA())}function It(r,a){if(1&r&&(t.ynx(0),t.TgZ(1,"p"),t._uU(2," Group: "),t.TgZ(3,"span"),t._uU(4),t.qZA(),t.qZA(),t.BQk()),2&r){const e=t.oxw(2).$implicit;t.xp6(4),t.Oqu(e.group[0].name)}}function kt(r,a){1&r&&(t.TgZ(0,"p"),t._uU(1,"Group: "),t.TgZ(2,"span"),t._uU(3,"not select"),t.qZA(),t.qZA())}const Qt=function(r,a){return[r,a]};function Pt(r,a){if(1&r&&(t.ynx(0),t.TgZ(1,"div",6),t.TgZ(2,"h2",51),t._uU(3),t.qZA(),t.TgZ(4,"p"),t._uU(5," Product: "),t.TgZ(6,"span"),t._uU(7),t.qZA(),t.qZA(),t.TgZ(8,"p"),t._uU(9," Customer: "),t.TgZ(10,"span"),t._uU(11),t.qZA(),t.qZA(),t.YNc(12,It,5,1,"ng-container",17),t.YNc(13,kt,4,0,"ng-template",null,52,t.W1O),t.qZA(),t.TgZ(15,"div",6),t._UZ(16,"apx-chart",53),t.qZA(),t.BQk()),2&r){const e=t.MAs(14),n=t.oxw().$implicit,o=t.oxw();t.xp6(3),t.Oqu(n.name),t.xp6(4),t.Oqu(n.product?n.product.name:"empty"),t.xp6(4),t.Oqu(n.customer.name),t.xp6(1),t.Q6J("ngIf",0!=n.group.length)("ngIfElse",e),t.xp6(4),t.Q6J("fill",o.chartOptions.fill)("series",t.WLB(10,Qt,n.percent,100-n.percent))("chart",o.chartOptions.chart)("labels",o.chartOptions.labels)("responsive",o.chartOptions.responsive)}}function Yt(r,a){if(1&r&&(t.TgZ(0,"span"),t._uU(1),t.qZA()),2&r){const e=t.oxw(2).$implicit;t.xp6(1),t.Oqu(e.product.name)}}function Ht(r,a){if(1&r&&(t.ynx(0),t.TgZ(1,"p"),t._uU(2," Group: "),t._UZ(3,"br"),t.TgZ(4,"span"),t._uU(5),t.qZA(),t.qZA(),t.BQk()),2&r){const e=t.oxw(2).$implicit;t.xp6(5),t.Oqu(e.group[0].name)}}function Rt(r,a){1&r&&(t.TgZ(0,"p"),t._uU(1," Group: "),t._UZ(2,"br"),t.TgZ(3,"span"),t._uU(4,"not select"),t.qZA(),t.qZA())}function Dt(r,a){if(1&r&&(t.TgZ(0,"div",5),t.TgZ(1,"div",54),t.TgZ(2,"h2",51),t._uU(3),t.qZA(),t.qZA(),t.qZA(),t.TgZ(4,"div",5),t.TgZ(5,"div",55),t.TgZ(6,"p",56),t._uU(7,"Product:"),t.qZA(),t.YNc(8,Yt,2,1,"span",57),t.qZA(),t.TgZ(9,"div",55),t.TgZ(10,"p"),t._uU(11," Customer: "),t._UZ(12,"br"),t.TgZ(13,"span"),t._uU(14),t.qZA(),t.qZA(),t.qZA(),t.TgZ(15,"div",55),t.YNc(16,Ht,6,1,"ng-container",17),t.YNc(17,Rt,5,0,"ng-template",null,52,t.W1O),t.qZA(),t.qZA()),2&r){const e=t.MAs(18),n=t.oxw().$implicit;t.xp6(3),t.Oqu(n.name),t.xp6(5),t.Q6J("ngIf",null!=n.product),t.xp6(6),t.Oqu(n.customer.name),t.xp6(2),t.Q6J("ngIf",0!=n.group.length)("ngIfElse",e)}}function Lt(r,a){if(1&r){const e=t.EpF();t.TgZ(0,"div",47),t.TgZ(1,"div",48),t.TgZ(2,"div",5),t.TgZ(3,"div",36),t.TgZ(4,"div",49),t.NdJ("click",function(){const i=t.CHM(e).$implicit;return t.oxw().nav(i.id)}),t.YNc(5,Pt,17,13,"ng-container",17),t.YNc(6,Dt,19,5,"ng-template",null,50,t.W1O),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA()}if(2&r){const e=t.MAs(7),n=t.oxw();t.xp6(5),t.Q6J("ngIf",n.ChangeView)("ngIfElse",e)}}function $t(r,a){1&r&&(t.TgZ(0,"div",58),t._uU(1," Loading Items... "),t.qZA())}function Bt(r,a){if(1&r&&(t.TgZ(0,"mat-list-option",59),t._uU(1),t.qZA()),2&r){const e=a.$implicit;t.Q6J("value",e.id),t.xp6(1),t.hij(" ",e.name," ")}}function Gt(r,a){1&r&&t._UZ(0,"img",61)}function Vt(r,a){if(1&r&&(t.ynx(0),t.YNc(1,Gt,1,0,"img",60),t.BQk()),2&r){const e=t.oxw();t.xp6(1),t.Q6J("ngIf",e.loading)}}function jt(r,a){1&r&&(t._UZ(0,"img",62),t._uU(1," Save "))}function zt(r,a){if(1&r&&(t.TgZ(0,"option",63),t._uU(1),t.qZA()),2&r){const e=a.$implicit;t.Q6J("value",e.id),t.xp6(1),t.hij(" ",e.name," ")}}function Wt(r,a){1&r&&(t.TgZ(0,"div",58),t._uU(1," Loading Items... "),t.qZA())}function Xt(r,a){1&r&&(t.TgZ(0,"div",58),t._uU(1," Data is empty "),t.qZA())}function Kt(r,a){if(1&r&&(t.TgZ(0,"mat-list-option",59),t._uU(1),t.qZA()),2&r){const e=a.$implicit;t.Q6J("value",e.id),t.xp6(1),t.hij(" ",e.name," ")}}function te(r,a){1&r&&t._UZ(0,"img",61)}function ee(r,a){if(1&r&&(t.ynx(0),t.YNc(1,te,1,0,"img",60),t.BQk()),2&r){const e=t.oxw();t.xp6(1),t.Q6J("ngIf",e.loading)}}function re(r,a){1&r&&(t._UZ(0,"img",62),t._uU(1," Save "))}const ne=[{path:"all",component:(()=>{class r{constructor(e,n,o,i,s,C){this._router=e,this._order=n,this._modalService=o,this._swalService=i,this._groupService=s,this._fb=C,this.messageError="",this.initChart(),this.isNotSelect=!0,this.messageAddGroup="Select to Group",this.loading=!1,this.filteringOrders=[],this.orders=[],this.groups=[],this.order_ids=[],this.ChangeView=!1,this.selectedState="waiting",this.loadingItems=!1,this.unsignedOrders=[],this.messageFilter="waiting ",this.DataState="void"}ngOnInit(){this.initOrderState(),this.initGroupState(),this.fetchData()}initChart(){this.chartOptions={fill:{colors:["#198754","#F3F3F3"]},chart:{width:170,type:"pie"},labels:["Completed","Not Completed"],responsive:[{breakpoint:480,options:{chart:{width:200},legend:{position:"bottom"}}}]}}initOrderState(){this.orderState=this._fb.group({order_ids:[null,g.kI.required],state:[null,g.kI.required]})}initGroupState(){this.groupState=this._fb.group({group_id:[null,g.kI.required],order_ids:[null,g.kI.required]})}fetchData(){this.fetchAllOrder(),this.fetchGroups()}fetchGroups(){this._groupService.filterGroup("open").subscribe(e=>this.groups=e.data.slice())}fetchAllOrder(){this.loading=!0,this.DataState="void",this.orders=[],this._order.getOrdersByState("waiting").pipe((0,m.x)(()=>this.loading=!1)).subscribe(e=>{this.orders=e.data.slice(),this.orders.forEach(n=>{n.percent=Math.floor(101*Math.random())}),this.DataState="in"})}fetchAllOrderUnsigned(){this.loading=!0,this._order.getOrdersByState("inprogress").pipe((0,m.x)(()=>this.loading=!1)).subscribe(e=>{this.unsignedOrders=e.data.slice(),this.unsignedOrders=this.unsignedOrders.filter(n=>0==n.group.length)})}SubmitGroup(e){var n=[];this.groupLists.selectedOptions.selected.forEach(o=>n.push(o.value)),this.groupState.patchValue({order_ids:n,group_id:e}),this.loading=!0,this._groupService.addOrdersToGroup(this.groupState.value).pipe((0,m.x)(()=>this.loading=!1)).subscribe(()=>{this.closeModal(),this._router.navigate(["/group/find",e])})}updateOrderStates(){var e=[];this.orderLists.selectedOptions.selected.forEach(n=>e.push(n.value)),this.orderState.patchValue({order_ids:e,state:this.selectedState}),this.loading=!0,this._order.changeState(this.orderState.value).pipe((0,m.x)(()=>this.loading=!1)).subscribe(n=>{this._swalService.success("state has been updated successfuly"),this.closeModal()})}selectOrders(e){this.fetchAllOrderUnsigned(),this.Show(e)}filterOrderState(e,n,o){this.loadingItems=!0,this.filteringOrders=[],this.selectedState=o,this.Show(e),this._order.getOrdersByState(n).pipe((0,m.x)(()=>this.loadingItems=!1)).subscribe(i=>this.filteringOrders=i.data)}filterOrders(e){this.messageFilter=e,this.DataState="void",this.loading=!0,this.orders=[],this._order.getOrdersByState(e).pipe((0,m.x)(()=>this.loading=!1)).subscribe(n=>{this.orders=n.data,this.DataState="in"})}Show(e){this.modalRef=this._modalService.open(e,{size:"md",modalClass:"mymodal",hideCloseButton:!1,centered:!1,backdrop:!0,animation:!0,keyboard:!1,closeOnOutsideClick:!0,backdropClass:"modal-backdrop"})}closeModal(){this._modalService.close(this.modalRef)}routeToAdd(){this._router.navigate(["order/form"])}nav(e){this._router.navigate(["order/find",e])}}return r.\u0275fac=function(e){return new(e||r)(t.Y36(h.F0),t.Y36(p.p),t.Y36(A.gk),t.Y36(l.J),t.Y36(yt.l),t.Y36(g.qu))},r.\u0275cmp=t.Xpm({type:r,selectors:[["app-order-main"]],viewQuery:function(e,n){if(1&e&&(t.Gf(Ut,5),t.Gf(Nt,5)),2&e){let o;t.iGM(o=t.CRH())&&(n.orderLists=o.first),t.iGM(o=t.CRH())&&(n.groupLists=o.first)}},decls:179,vars:34,consts:[[1,"nav-title-header","fs-4","fw-bold","text-center"],[1,"container"],[1,"btn-plus"],[1,"btn","btn-primary","btn-add-order",3,"click"],["mat-raised-button","","matTooltip","Add New Order","matTooltipPosition","above","src","assets/action-data/plus-circle-dotted.svg","alt","plus add","width","45"],[1,"row"],[1,"col-md-6"],[1,"order-search"],["type","text","placeholder","search on all orders",1,"form-control",3,"ngModel","ngModelChange"],[3,"matMenuTriggerFor"],[1,"ms-1"],[1,"col-md-3"],[1,"order-state"],[1,"btn","btn-success"],["r","",1,"btn","btn-primary","mb-3","btn-add",3,"disabled","click"],[1,"change-view"],[1,"btn","btn-secondary",3,"click"],[4,"ngIf","ngIfElse"],["elseView",""],["class","spinner",4,"ngIf"],["class","col-md-6 mt-3",4,"ngFor","ngForOf"],["orderModal",""],[1,"row","d-flex","align-items-baseline"],["appearance","outline"],["matInput","","placeholder","Search...",1,"w-100",3,"ngModel","ngModelChange"],["matSuffix",""],["mat-button","","color","primary",1,"w-100",3,"click"],["mat-button","","color","warn",1,"w-100",3,"click"],[1,"mb-3","mt-2","border"],["orderLists",""],["class","loading-items fs-5",4,"ngIf"],["checkboxPosition","before","color","primary",3,"value",4,"ngFor","ngForOf"],["type","button",1,"btn","btn-danger","w-100",3,"click"],["type","submit",1,"btn","btn-success","w-100",3,"disabled","click"],["elseTemplate",""],["groupModal",""],[1,"col-md-12"],[1,"test",2,"position","inherit"],[1,"select-arrow"],["id","department",1,"form-control"],["groupId",""],[3,"value",4,"ngFor","ngForOf"],["groupLists",""],["menufilter","matMenu"],["mat-menu-item","",3,"click"],["menu","matMenu"],[1,"spinner"],[1,"col-md-6","mt-3"],[1,"card","p-3"],[1,"row","cursor-pointer","align-items-center",3,"click"],["elseSmallTemplate",""],[1,"fw-bold"],["elseTemplategroup",""],[3,"fill","series","chart","labels","responsive"],[1,"col-md-12","ms-4"],[1,"col-md-4","text-center"],[1,"mb-0"],[4,"ngIf"],[1,"loading-items","fs-5"],["checkboxPosition","before","color","primary",3,"value"],["width","30","src","assets/Spinner-1s-257px.svg","alt","",4,"ngIf"],["width","30","src","assets/Spinner-1s-257px.svg","alt",""],["src","assets/action-data/save.svg","width","20"],[3,"value"]],template:function(e,n){if(1&e){const o=t.EpF();t.TgZ(0,"div",0),t._uU(1,"Order"),t.qZA(),t.TgZ(2,"div",1),t.TgZ(3,"section"),t.TgZ(4,"div",2),t.TgZ(5,"button",3),t.NdJ("click",function(){return n.routeToAdd()}),t._UZ(6,"img",4),t.qZA(),t.qZA(),t.TgZ(7,"div",5),t.TgZ(8,"div",6),t.TgZ(9,"div",7),t.TgZ(10,"input",8),t.NdJ("ngModelChange",function(s){return n.searchOrderState=s}),t.qZA(),t.TgZ(11,"button",9),t.TgZ(12,"span"),t._uU(13),t.qZA(),t.TgZ(14,"mat-icon",10),t._uU(15,"settings_input_component"),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.TgZ(16,"div",11),t.TgZ(17,"div",12),t.TgZ(18,"button",13),t._uU(19,"Order State"),t.qZA(),t.TgZ(20,"button",9),t.TgZ(21,"mat-icon"),t._uU(22,"keyboard_arrow_down"),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.TgZ(23,"div",11),t.TgZ(24,"button",14),t.NdJ("click",function(){t.CHM(o);const s=t.MAs(70);return n.selectOrders(s)}),t._uU(25),t.qZA(),t.qZA(),t.qZA(),t.TgZ(26,"div",5),t.TgZ(27,"div",15),t.TgZ(28,"button",16),t.NdJ("click",function(){return n.ChangeView=!n.ChangeView}),t.YNc(29,Ft,3,0,"ng-container",17),t.YNc(30,Jt,2,0,"ng-template",null,18,t.W1O),t.qZA(),t.qZA(),t.TgZ(32,"div",5),t.YNc(33,Et,2,0,"div",19),t.qZA(),t.YNc(34,Lt,8,2,"div",20),t.ALo(35,"search"),t.qZA(),t.qZA(),t.qZA(),t.TgZ(36,"modal",null,21),t.TgZ(38,"modal-header"),t._uU(39," State Model "),t.qZA(),t.TgZ(40,"modal-content"),t.TgZ(41,"div",22),t.TgZ(42,"div",6),t.TgZ(43,"mat-form-field",23),t.TgZ(44,"mat-label"),t._uU(45,"Search"),t.qZA(),t.TgZ(46,"input",24),t.NdJ("ngModelChange",function(s){return n.searchOrderState=s}),t.qZA(),t.TgZ(47,"mat-icon",25),t._uU(48,"search"),t.qZA(),t.qZA(),t.qZA(),t.TgZ(49,"div",11),t.TgZ(50,"button",26),t.NdJ("click",function(){return t.CHM(o),t.MAs(56).selectAll()}),t._uU(51," Select All "),t.qZA(),t.qZA(),t.TgZ(52,"div",11),t.TgZ(53,"button",27),t.NdJ("click",function(){return t.CHM(o),t.MAs(56).deselectAll()}),t._uU(54," Deselect All "),t.qZA(),t.qZA(),t.qZA(),t.TgZ(55,"mat-selection-list",28,29),t.YNc(57,$t,2,0,"div",30),t.YNc(58,Bt,2,2,"mat-list-option",31),t.ALo(59,"search"),t.qZA(),t.TgZ(60,"div",5),t.TgZ(61,"div",6),t.TgZ(62,"button",32),t.NdJ("click",function(){return n.closeModal()}),t._uU(63," X Cancel "),t.qZA(),t.qZA(),t.TgZ(64,"div",6),t.TgZ(65,"button",33),t.NdJ("click",function(){return n.updateOrderStates()}),t.YNc(66,Vt,2,1,"ng-container",17),t.YNc(67,jt,2,0,"ng-template",null,34,t.W1O),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.TgZ(69,"modal",null,35),t.TgZ(71,"modal-header"),t._uU(72," Group Model "),t.qZA(),t.TgZ(73,"modal-content"),t.TgZ(74,"div",5),t.TgZ(75,"div",36),t.TgZ(76,"div",37),t.TgZ(77,"div",38),t.TgZ(78,"select",39,40),t.YNc(80,zt,2,2,"option",41),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.TgZ(81,"div",22),t.TgZ(82,"div",6),t.TgZ(83,"mat-form-field",23),t.TgZ(84,"mat-label"),t._uU(85,"Search"),t.qZA(),t.TgZ(86,"input",24),t.NdJ("ngModelChange",function(s){return n.searchOrderGroupState=s}),t.qZA(),t.TgZ(87,"mat-icon",25),t._uU(88,"search"),t.qZA(),t.qZA(),t.qZA(),t.TgZ(89,"div",11),t.TgZ(90,"button",26),t.NdJ("click",function(){return t.CHM(o),t.MAs(96).selectAll()}),t._uU(91," Select All "),t.qZA(),t.qZA(),t.TgZ(92,"div",11),t.TgZ(93,"button",27),t.NdJ("click",function(){return t.CHM(o),t.MAs(96).deselectAll()}),t._uU(94," Deselect All "),t.qZA(),t.qZA(),t.qZA(),t.TgZ(95,"mat-selection-list",28,42),t.YNc(97,Wt,2,0,"div",30),t.YNc(98,Xt,2,0,"div",30),t.YNc(99,Kt,2,2,"mat-list-option",31),t.ALo(100,"search"),t.qZA(),t.TgZ(101,"div",5),t.TgZ(102,"div",6),t.TgZ(103,"button",32),t.NdJ("click",function(){return n.closeModal()}),t._uU(104," X Cancel "),t.qZA(),t.qZA(),t.TgZ(105,"div",6),t.TgZ(106,"button",33),t.NdJ("click",function(){t.CHM(o);const s=t.MAs(79);return n.SubmitGroup(s.value)}),t.YNc(107,ee,2,1,"ng-container",17),t.YNc(108,re,2,0,"ng-template",null,34,t.W1O),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.TgZ(110,"mat-menu",null,43),t.TgZ(112,"button",44),t.NdJ("click",function(){return n.filterOrders("waiting")}),t.TgZ(113,"mat-icon"),t._uU(114,"cached"),t.qZA(),t.TgZ(115,"span"),t._uU(116,"Waiting"),t.qZA(),t.qZA(),t.TgZ(117,"button",44),t.NdJ("click",function(){return n.filterOrders("in_design")}),t.TgZ(118,"mat-icon"),t._uU(119,"cached"),t.qZA(),t.TgZ(120,"span"),t._uU(121,"In Design"),t.qZA(),t.qZA(),t.TgZ(122,"button",44),t.NdJ("click",function(){return n.filterOrders("inprogress")}),t.TgZ(123,"mat-icon"),t._uU(124,"cached"),t.qZA(),t.TgZ(125,"span"),t._uU(126,"Inprogress"),t.qZA(),t.qZA(),t.TgZ(127,"button",44),t.NdJ("click",function(){return n.filterOrders("ready")}),t.TgZ(128,"mat-icon"),t._uU(129,"done"),t.qZA(),t.TgZ(130,"span"),t._uU(131,"Ready"),t.qZA(),t.qZA(),t.TgZ(132,"button",44),t.NdJ("click",function(){return n.filterOrders("stored")}),t.TgZ(133,"mat-icon"),t._uU(134,"storage"),t.qZA(),t.TgZ(135,"span"),t._uU(136,"Store"),t.qZA(),t.qZA(),t.TgZ(137,"button",44),t.NdJ("click",function(){return n.filterOrders("received")}),t.TgZ(138,"mat-icon"),t._uU(139,"account_circle"),t.qZA(),t.TgZ(140,"span"),t._uU(141,"Received"),t.qZA(),t.qZA(),t.TgZ(142,"button",44),t.NdJ("click",function(){return n.filterOrders("shipping_paid")}),t.TgZ(143,"mat-icon"),t._uU(144,"attach_money"),t.qZA(),t.TgZ(145,"span"),t._uU(146,"Shipping Paid"),t.qZA(),t.qZA(),t.TgZ(147,"button",44),t.NdJ("click",function(){return n.filterOrders("shipping_not_paid")}),t.TgZ(148,"mat-icon"),t._uU(149,"money_off"),t.qZA(),t.TgZ(150,"span"),t._uU(151,"Shipping not Paid"),t.qZA(),t.qZA(),t.qZA(),t.TgZ(152,"mat-menu",null,45),t.TgZ(154,"button",44),t.NdJ("click",function(){t.CHM(o);const s=t.MAs(37);return n.filterOrderState(s,"in_design","inprogress")}),t.TgZ(155,"mat-icon"),t._uU(156,"storage"),t.qZA(),t.TgZ(157,"span"),t._uU(158,"In Progress"),t.qZA(),t.qZA(),t.TgZ(159,"button",44),t.NdJ("click",function(){t.CHM(o);const s=t.MAs(37);return n.filterOrderState(s,"ready","stored")}),t.TgZ(160,"mat-icon"),t._uU(161,"storage"),t.qZA(),t.TgZ(162,"span"),t._uU(163,"Store"),t.qZA(),t.qZA(),t.TgZ(164,"button",44),t.NdJ("click",function(){t.CHM(o);const s=t.MAs(37);return n.filterOrderState(s,"stored","received")}),t.TgZ(165,"mat-icon"),t._uU(166,"account_circle"),t.qZA(),t.TgZ(167,"span"),t._uU(168,"Received"),t.qZA(),t.qZA(),t.TgZ(169,"button",44),t.NdJ("click",function(){t.CHM(o);const s=t.MAs(37);return n.filterOrderState(s,"stored","shipping_paid")}),t.TgZ(170,"mat-icon"),t._uU(171,"attach_money"),t.qZA(),t.TgZ(172,"span"),t._uU(173,"Shipping Paid"),t.qZA(),t.qZA(),t.TgZ(174,"button",44),t.NdJ("click",function(){t.CHM(o);const s=t.MAs(37);return n.filterOrderState(s,"stored","shipping_not_paid")}),t.TgZ(175,"mat-icon"),t._uU(176,"money_off"),t.qZA(),t.TgZ(177,"span"),t._uU(178,"Shipping not Paid"),t.qZA(),t.qZA(),t.qZA()}if(2&e){const o=t.MAs(31),i=t.MAs(68),s=t.MAs(96),C=t.MAs(111),M=t.MAs(153);t.xp6(2),t.Q6J("@in",n.DataState),t.xp6(8),t.Q6J("ngModel",n.searchOrderState),t.xp6(1),t.Q6J("matMenuTriggerFor",C),t.xp6(2),t.Oqu(n.messageFilter),t.xp6(7),t.Q6J("matMenuTriggerFor",M),t.xp6(4),t.Q6J("disabled",!n.isNotSelect&&0==n.order_ids.length),t.xp6(1),t.hij(" ",n.messageAddGroup," "),t.xp6(4),t.Q6J("ngIf",!n.ChangeView)("ngIfElse",o),t.xp6(4),t.Q6J("ngIf",n.loading),t.xp6(1),t.Q6J("ngForOf",t.xi3(35,25,n.orders,n.searchOrderState)),t.xp6(12),t.Q6J("ngModel",n.searchOrderState),t.xp6(11),t.Q6J("ngIf",n.loadingItems),t.xp6(1),t.Q6J("ngForOf",t.xi3(59,28,n.filteringOrders,n.searchOrderState)),t.xp6(7),t.Q6J("disabled",0==n.filteringOrders.length),t.xp6(1),t.Q6J("ngIf",n.loading)("ngIfElse",i),t.xp6(14),t.Q6J("ngForOf",n.groups),t.xp6(6),t.Q6J("ngModel",n.searchOrderGroupState),t.xp6(11),t.Q6J("ngIf",n.loadingItems),t.xp6(1),t.Q6J("ngIf",0==n.unsignedOrders.length&&!n.loadingItems),t.xp6(1),t.Q6J("ngForOf",t.xi3(100,31,n.unsignedOrders,n.searchOrderGroupState)),t.xp6(7),t.Q6J("disabled",0==n.unsignedOrders.length||0==s.selectedOptions.selected.length),t.xp6(1),t.Q6J("ngIf",n.loading)("ngIfElse",i)}},directives:[U.gM,g.Fj,g.JJ,g.On,y.p6,b.Hw,_.O5,_.sg,A.zS,A.Rb,A.Ef,u.KE,u.hX,T.Nt,u.R9,Mt.lW,J.Ub,y.VK,y.OP,F.$g,E.x,J.vS,g.YN,g.Kr],pipes:[wt],styles:["section[_ngcontent-%COMP%]{margin-left:12rem;margin-top:6rem}.card[_ngcontent-%COMP%]{box-shadow:-1px 2px 6px;border-radius:25px}.vl[_ngcontent-%COMP%]{border-left:2px solid;height:35px}#chart[_ngcontent-%COMP%]{max-width:380px;margin:35px auto;padding:0}[_nghost-%COMP%]     .apexcharts-legend, [_nghost-%COMP%]     .apexcharts-datalabels{display:none!important}span[_ngcontent-%COMP%]{font-weight:bold}.btn-plus[_ngcontent-%COMP%]{position:fixed;bottom:0;right:0;padding:50px;z-index:1000}.btn-plus[_ngcontent-%COMP%]   .btn-add-order[_ngcontent-%COMP%]{height:75px;width:75px;border-radius:50%!important}.order-state[_ngcontent-%COMP%]{position:relative;overflow:hidden}.order-state[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:nth-child(1){width:100%;text-align:left}.order-state[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:nth-child(2){position:absolute;top:0;right:10px;border:none;background:none;padding:7px;border-left:1px solid white;color:#fff}.order-search[_ngcontent-%COMP%]{position:relative;height:70%}.order-search[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{position:absolute;top:0;right:0;border:none;background:none;padding:6px;display:flex;align-items:center}mat-selection-list[_ngcontent-%COMP%]{height:16rem;overflow:auto}.loading-items[_ngcontent-%COMP%]{position:absolute;top:50%;left:35%}.spinner[_ngcontent-%COMP%]{position:absolute;left:50%;right:50%;top:50%;z-index:1000}"],data:{animation:[St.U]}}),r})()},{path:"form",component:bt},{path:"find/:orderId",component:D}];let oe=(()=>{class r{}return r.\u0275fac=function(e){return new(e||r)},r.\u0275mod=t.oAB({type:r}),r.\u0275inj=t.cJS({imports:[[h.Bz.forChild(ne)],h.Bz]}),r})();var ie=d(71),ae=d(6018);let se=(()=>{class r{}return r.\u0275fac=function(e){return new(e||r)},r.\u0275mod=t.oAB({type:r}),r.\u0275inj=t.cJS({providers:[O],imports:[[g.UX,E.X,oe,_.ez,g.u5,A.zk,ae.SharedModule,ie.E],h.Bz]}),r})()},221:(q,f,d)=>{d.d(f,{H:()=>p});var _=d(205),h=d(5304),m=d(3927);class x extends m.s{constructor(c){super(c,"management/category")}readCategory(){return this.readEntities(void 0,"/all")}createCategory(c){return this.createEntity(c,"/create")}deleteCategory(c){return this.deleteEntity(c,void 0,"/delete")}updateCategory(c,u){return this.updateQueryEntity(u,"/update/"+c)}infoCategory(c){return this.readEntity(c,"/find")}}var Z=d(7716),t=d(1841);let p=(()=>{class l{constructor(u){this.categoryActions=new x(u)}getAllCategories(){return this.categoryActions.readCategory().pipe((0,h.K)(u=>(0,_._)(u)))}createCategory(u){return this.categoryActions.createCategory(u)}removeCat(u){return this.categoryActions.deleteCategory(u)}infoCat(u){return this.categoryActions.infoCategory(u)}updateCategory(u,T){return this.categoryActions.updateCategory(u,T)}}return l.\u0275fac=function(u){return new(u||l)(Z.LFG(t.eN))},l.\u0275prov=Z.Yz7({token:l,factory:l.\u0275fac,providedIn:"root"}),l})()},9357:(q,f,d)=>{d.d(f,{v:()=>p});var _=d(205),h=d(5304),m=d(3927);class x extends m.s{constructor(c){super(c,"customer")}readCustomer(){return this.readEntities(void 0,"/all")}createCustomer(c){return this.createEntity(c,"/create")}findCustomer(c){return this.readEntity(c,"/find")}searchCustomer(c,u){return this.readEntities(c,"/quick_search/"+u)}updateCustomer(c,u){return this.updateQueryEntity(u,"/update/"+c)}deleteCustomer(c){return this.deleteEntity(c,void 0,"/delete")}searchCustomerLazyLoad(c){return this.readEntities({},"/request/search/"+c.text)}createPayment(c){return this.createEntity(c,"/payment")}}var Z=d(7716),t=d(1841);let p=(()=>{class l{constructor(u){this.customerRequests=new x(u)}getAllCustomers(){return this.customerRequests.readCustomer().pipe((0,h.K)(u=>(0,_._)(u)))}addCustomer(u){return this.customerRequests.createCustomer(u)}getDetailsCustomer(u){return this.customerRequests.findCustomer(u)}lazyLoadingCustomer(u,T){return this.customerRequests.searchCustomer(u,T)}removeCustomer(u){return this.customerRequests.deleteCustomer(u)}updateCustomerInformation(u,T){return this.customerRequests.updateCustomer(u,T)}getCustomersLazyLoad(u){return this.customerRequests.searchCustomerLazyLoad(u)}createPaymentCustomer(u){return this.customerRequests.createPayment(u)}}return l.\u0275fac=function(u){return new(u||l)(Z.LFG(t.eN))},l.\u0275prov=Z.Yz7({token:l,factory:l.\u0275fac,providedIn:"root"}),l})()},8649:(q,f,d)=>{d.d(f,{f:()=>Z});var _=d(7716),h=d(3927);class m extends h.s{constructor(p){super(p,"management/extra_stage")}createExtraStage(p){return this.createEntity(p,"/create")}readExtraStages(){return this.readEntities(void 0,"/all")}readStageByCategory(p){return this.readEntities(void 0,"/get/"+p)}findExtraStage(p){return this.readEntity(p,"/find")}deleteExtraStage(p){return this.deleteEntity(p,void 0,"/delete")}updateExtraStage(p,l){return this.updateQueryEntity(l,"/update/"+p)}}var x=d(1841);let Z=(()=>{class t{constructor(l){this.categorySelected=new _.vpe,this.stageRequests=new m(l)}getAllStagesExtra(){return this.stageRequests.readExtraStages()}getStagesByCategoryId(l){return this.stageRequests.readStageByCategory(l)}addExtraStage(l){return this.stageRequests.createExtraStage(l)}removeExtraStage(l){return this.stageRequests.deleteExtraStage(l)}updateExtraStage(l,c){return this.stageRequests.updateExtraStage(l,c)}}return t.\u0275fac=function(l){return new(l||t)(_.LFG(x.eN))},t.\u0275prov=_.Yz7({token:t,factory:t.\u0275fac,providedIn:"root"}),t})()},1238:(q,f,d)=>{d.d(f,{p:()=>t});var _=d(3927);class h extends _.s{constructor(l){super(l,"order")}createOrder(l){return this.createEntity(l,"/create")}readOrders(){return this.readEntities(void 0,"/all/inprogress")}findOrder(l){return this.readEntity(l,"/find")}filterOrders(l){return this.readEntities(void 0,"/get/"+l)}deleteOrder(l){return this.deleteEntity(l,void 0,"/delete")}updateOrder(l,c){return this.updateQueryEntity(c,"/update/"+l)}stageDone(l,c){return this.updateQueryEntity(c,"/stage/done/"+l)}updateOrderStates(l){return this.createEntity(l,"/update/state")}archiveOrder(l){return this.createEntity(l,"/advanced/search")}searchOrder(l){return this.readEntities(l,"/search")}updateStage(l,c){return this.updateQueryEntity(c,"/stage/update/"+l)}}var m=d(7716),x=d(1841),Z=d(8649);let t=(()=>{class p{constructor(c,u){this._extraStage=u,this.orderActions=new h(c)}getOrdersByState(c){return this.orderActions.filterOrders(c)}getAllOrderes(){return this.orderActions.readOrders()}addOrder(c){return this.orderActions.createOrder(c)}updateOrder(c,u){return this.orderActions.updateOrder(c,u)}removeOrder(c){return this.orderActions.deleteOrder(c)}infoOrder(c){return this.orderActions.findOrder(c)}updateStageDone(c,u){return this.orderActions.stageDone(c,u)}editStage(c,u){return this.orderActions.updateStage(c,u)}changeState(c){return this.orderActions.updateOrderStates(c)}getOrdersPagination(c){return this.orderActions.archiveOrder(c)}getOrderSearched(c){return this.orderActions.searchOrder(c)}}return p.\u0275fac=function(c){return new(c||p)(m.LFG(x.eN),m.LFG(Z.f))},p.\u0275prov=m.Yz7({token:p,factory:p.\u0275fac,providedIn:"root"}),p})()}}]);