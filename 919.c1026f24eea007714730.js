"use strict";(self.webpackChunklamasat=self.webpackChunklamasat||[]).push([[919],{8919:(R,h,l)=>{l.r(h),l.d(h,{EmployeeModule:()=>Q});var d=l(8583),r=l(3679),p=l(4655),g=l(8939),e=l(7716),Z=l(7749),_=l(4260),v=l(3927);class T extends v.s{constructor(i){super(i,"employee")}createEmployee(i){return this.createEntity(i,"/create")}readEmployees(){return this.readEntities(void 0,"/all")}findEmployee(i){return this.readEntity(i,"/find")}deleteEmployee(i){return this.deleteEntity(i,void 0,"/delete")}updateEmployee(i,t){return this.updateQueryEntity(t,"/update/"+i)}}var b=l(205),A=l(5304),q=l(1841);let y=(()=>{class o{constructor(t){this.employeeRequests=new T(t)}getAllEmployees(){return this.employeeRequests.readEmployees().pipe((0,A.K)(t=>(0,b._)(t)))}addEmployee(t){return this.employeeRequests.createEmployee(t)}getDetailsEmployee(t){return this.employeeRequests.findEmployee(t)}removeEmployee(t){return this.employeeRequests.deleteEmployee(t)}updateInfoEmployee(t,n){return this.employeeRequests.updateEmployee(t,n)}}return o.\u0275fac=function(t){return new(t||o)(e.LFG(q.eN))},o.\u0275prov=e.Yz7({token:o,factory:o.\u0275fac,providedIn:"root"}),o})();function x(o,i){1&o&&(e.ynx(0),e.TgZ(1,"button",42),e._UZ(2,"img",43),e._uU(3," Edit "),e.qZA(),e.BQk())}function E(o,i){1&o&&(e.ynx(0),e._UZ(1,"img",47),e.BQk())}function C(o,i){1&o&&e._uU(0," Save ")}function U(o,i){if(1&o&&(e.TgZ(0,"button",44),e._UZ(1,"img",45),e.YNc(2,E,2,0,"ng-container",5),e.YNc(3,C,1,0,"ng-template",null,46,e.W1O),e.qZA()),2&o){const t=e.MAs(4),n=e.oxw();e.xp6(2),e.Q6J("ngIf",n.loading)("ngIfElse",t)}}function F(o,i){if(1&o&&(e.TgZ(0,"option",48),e._uU(1),e.qZA()),2&o){const t=i.$implicit;e.Q6J("value",t.id),e.xp6(1),e.hij(" ",t.name,"")}}function I(o,i){if(1&o&&(e.TgZ(0,"option",48),e._uU(1),e.qZA()),2&o){const t=i.$implicit;e.Q6J("value",t),e.xp6(1),e.Oqu(t)}}function N(o,i){if(1&o&&(e.TgZ(0,"option",48),e._uU(1),e.qZA()),2&o){const t=i.$implicit;e.Q6J("value",t.id),e.xp6(1),e.Oqu(t.name)}}function M(o,i){if(1&o){const t=e.EpF();e.TgZ(0,"div",49),e.TgZ(1,"label"),e._uU(2),e.qZA(),e.TgZ(3,"input",50),e.NdJ("change",function(a){return e.CHM(t).$implicit.value=a.target.value}),e.qZA(),e.qZA()}if(2&o){const t=i.$implicit,n=e.oxw();e.xp6(2),e.hij("",t.type," Percentage"),e.xp6(1),e.Q6J("value",t.value)("disabled",n.isDisabled)}}let f=(()=>{class o{constructor(t,n,a,s,m,P){this._formBuilder=t,this._departmentService=n,this._branchService=a,this._employeeService=s,this._activeRoute=m,this._router=P,this.percentageType=[],this.loading=!1,this.department=[],this.branch=[],this.gender=["male","female"],this.percentageType=[{type:"Design",value:0},{type:"Providers",value:0},{type:"Special Work",value:0},{type:"Fast Work",value:0},{type:"Shipment",value:0}]}ngOnInit(){this.InitialForm(),this.fetchData(),this.subscripeRoute()}subscripeRoute(){this._activeRoute.params.subscribe(t=>{this.employeeId=+t.employeeId,this.isUpdated=null!=t.employeeId,this.isUpdated&&this.initialValueForm(),String(window.location.href).includes("form")?(this.isDisabled=!1,this.employeeForm.enable()):(this.isDisabled=!0,this.employeeForm.disable())})}initialValueForm(){this._employeeService.getDetailsEmployee(this.employeeId).subscribe(t=>{var n=t.data;this.employee=n,this.percentageType=[];var a=JSON.parse(n.salary_percentege);null!=a&&a.forEach(s=>{this.percentageType.push({type:s.type,value:s.value})}),this.employeeForm.patchValue({full_name:n.full_name,department_id:n.department.id,branch_id:n.branch.id,birthday:n.birthday,gender:n.gender,phone:n.phone,address:n.address,type_salary:n.type_salary,default_salary:n.default_salary,national_number:n.national_number,salary_percentege:this.percentageType,username:n.users[0].username,password:n.users[0].password,note:n.note})})}fetchData(){this.fetchDepartments(),this.fetchBranches()}fetchBranches(){this._branchService.getAllBranches().subscribe(t=>this.branch=t.data)}fetchDepartments(){this._departmentService.getAllDepartments().subscribe(t=>this.department=t.data)}InitialForm(){this.employeeForm=this._formBuilder.group({full_name:[null,r.kI.required],department_id:[null,r.kI.required],branch_id:[null,r.kI.required],birthday:[null,r.kI.required],username:[null,r.kI.required],gender:[null,r.kI.required],password:[null,[r.kI.required,r.kI.minLength(4),r.kI.maxLength(20)]],phone:[null,r.kI.required],address:[null],note:[null],default_salary:[0,[r.kI.min(0),r.kI.required]],user_scope:["user"],national_number:[null,[r.kI.nullValidator,r.kI.minLength(4),r.kI.maxLength(20)]],salary_percentege:[this.percentageType]})}Submit(t){this.isDisabled?(this.employeeForm.enable(),this.isDisabled=!1):(this.loading=!0,this.isUpdated?this._employeeService.updateInfoEmployee(this.employeeId,this.employeeForm.value).pipe((0,g.x)(()=>{this.loading=!1})).subscribe(n=>{this._router.navigateByUrl("employee/all")}):this._employeeService.addEmployee(t).pipe((0,g.x)(()=>{this.loading=!1})).subscribe(n=>{this._router.navigateByUrl("employee/all")}))}}return o.\u0275fac=function(t){return new(t||o)(e.Y36(r.qu),e.Y36(Z.n),e.Y36(_.b),e.Y36(y),e.Y36(p.gz),e.Y36(p.F0))},o.\u0275cmp=e.Xpm({type:o,selectors:[["app-employee-form"]],decls:90,vars:7,consts:[[1,"container"],[2,"margin-left","12rem","margin-top","6rem"],[3,"formGroup","ngSubmit"],[1,"d-flex","flex-row-reverse"],[1,"p-2"],[4,"ngIf","ngIfElse"],["elseTemplate",""],[1,"card","p-4",2,"border-radius","20px"],[1,"row"],[1,"col-md-6"],["for","fullname"],[1,"text-danger"],["type","text","id","fullname","formControlName","full_name",1,"form-control"],["for","department"],[1,"test",2,"position","inherit"],[1,"select-arrow"],["id","department","formControlName","department_id",1,"form-control"],[3,"value",4,"ngFor","ngForOf"],[1,"row","mt-4"],[1,"col-md-3"],["for","birth"],["type","date","id","birth","formControlName","birthday",1,"form-control"],["for","gender"],["name","","id","gender","formControlName","gender",1,"form-control"],["for","username"],["type","text","id","username","formControlName","username",1,"form-control"],["for","nationId"],["type","text","id","nationId","formControlName","national_number",1,"form-control"],["for","password"],["type","password","id","password","formControlName","password",1,"form-control"],["for","phone"],["type","text","id","phone","formControlName","phone",1,"form-control"],["for","branch"],["name","","id","branch","formControlName","branch_id",1,"form-control"],["for","address"],["type","text","id","address","formControlName","address",1,"form-control"],["for","basic_salary"],["type","number","min","0","id","basic_salary","formControlName","default_salary",1,"form-control"],["class","col-md-4 mt-4",4,"ngFor","ngForOf"],[1,"col-md-12"],["for","note"],["type","text","id","note","formControlName","note","rows","7",1,"form-control"],[1,"btn","btn-danger"],["src","assets/action-data/edit W.svg","width","20"],[1,"btn","btn-success"],["src","assets/action-data/save.svg","width","20"],["saveTemplate",""],["width","30","src","assets/Spinner-1s-257px.svg","alt",""],[3,"value"],[1,"col-md-4","mt-4"],["type","number","min","0","max","100",1,"form-control",3,"value","disabled","change"]],template:function(t,n){if(1&t&&(e.TgZ(0,"div",0),e.TgZ(1,"section",1),e.TgZ(2,"form",2),e.NdJ("ngSubmit",function(){return n.Submit(n.employeeForm.value)}),e.TgZ(3,"div",3),e.TgZ(4,"div",4),e.YNc(5,x,4,0,"ng-container",5),e.YNc(6,U,5,2,"ng-template",null,6,e.W1O),e.qZA(),e.qZA(),e.TgZ(8,"div",7),e.TgZ(9,"div",8),e.TgZ(10,"div",9),e.TgZ(11,"label",10),e._uU(12,"Full Name "),e.TgZ(13,"span",11),e._uU(14,"*"),e.qZA(),e.qZA(),e._UZ(15,"input",12),e.qZA(),e.TgZ(16,"div",9),e.TgZ(17,"label",13),e._uU(18,"Department "),e.TgZ(19,"span",11),e._uU(20,"*"),e.qZA(),e.qZA(),e.TgZ(21,"div",14),e.TgZ(22,"div",15),e.TgZ(23,"select",16),e.YNc(24,F,2,2,"option",17),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.TgZ(25,"div",18),e.TgZ(26,"div",19),e.TgZ(27,"label",20),e._uU(28,"Date of Birth "),e.TgZ(29,"span",11),e._uU(30,"*"),e.qZA(),e.qZA(),e._UZ(31,"input",21),e.qZA(),e.TgZ(32,"div",19),e.TgZ(33,"label",22),e._uU(34,"Gender "),e.TgZ(35,"span",11),e._uU(36,"*"),e.qZA(),e.qZA(),e.TgZ(37,"div",15),e.TgZ(38,"select",23),e.YNc(39,I,2,2,"option",17),e.qZA(),e.qZA(),e.qZA(),e.TgZ(40,"div",9),e.TgZ(41,"label",24),e._uU(42,"Username "),e.TgZ(43,"span",11),e._uU(44,"*"),e.qZA(),e.qZA(),e._UZ(45,"input",25),e.qZA(),e.qZA(),e.TgZ(46,"div",18),e.TgZ(47,"div",9),e.TgZ(48,"label",26),e._uU(49,"National ID"),e.qZA(),e._UZ(50,"input",27),e.qZA(),e.TgZ(51,"div",9),e.TgZ(52,"label",28),e._uU(53,"Password "),e.TgZ(54,"span",11),e._uU(55,"*"),e.qZA(),e.qZA(),e._UZ(56,"input",29),e.qZA(),e.qZA(),e.TgZ(57,"div",18),e.TgZ(58,"div",9),e.TgZ(59,"label",30),e._uU(60,"Phone "),e.TgZ(61,"span",11),e._uU(62,"*"),e.qZA(),e.qZA(),e._UZ(63,"input",31),e.qZA(),e.TgZ(64,"div",9),e.TgZ(65,"label",32),e._uU(66,"Branch "),e.TgZ(67,"span",11),e._uU(68,"*"),e.qZA(),e.qZA(),e.TgZ(69,"div",15),e.TgZ(70,"select",33),e.YNc(71,N,2,2,"option",17),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.TgZ(72,"div",18),e.TgZ(73,"div",9),e.TgZ(74,"label",34),e._uU(75,"Address"),e.qZA(),e._UZ(76,"input",35),e.qZA(),e.TgZ(77,"div",9),e.TgZ(78,"label",36),e._uU(79,"Basic Salary "),e.TgZ(80,"span",11),e._uU(81,"*"),e.qZA(),e.qZA(),e._UZ(82,"input",37),e.qZA(),e.qZA(),e.TgZ(83,"div",8),e.YNc(84,M,4,3,"div",38),e.qZA(),e.TgZ(85,"div",18),e.TgZ(86,"div",39),e.TgZ(87,"label",40),e._uU(88,"Note"),e.qZA(),e._UZ(89,"textarea",41),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA()),2&t){const a=e.MAs(7);e.xp6(2),e.Q6J("formGroup",n.employeeForm),e.xp6(3),e.Q6J("ngIf",n.isDisabled)("ngIfElse",a),e.xp6(19),e.Q6J("ngForOf",n.department),e.xp6(15),e.Q6J("ngForOf",n.gender),e.xp6(32),e.Q6J("ngForOf",n.branch),e.xp6(13),e.Q6J("ngForOf",n.percentageType)}},directives:[r._Y,r.JL,r.sg,d.O5,r.Fj,r.JJ,r.u,r.EJ,d.sg,r.qQ,r.wV,r.YN,r.Kr],styles:['@charset "UTF-8";label[_ngcontent-%COMP%]{font-size:13px;margin-bottom:10px}.select-arrow[_ngcontent-%COMP%]{position:relative}.select-arrow[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]{-webkit-appearance:none;-moz-appearance:none;appearance:none}.select-arrow[_ngcontent-%COMP%]:after{position:absolute;top:9px;right:24px;content:"\\25b6";transform:rotate(90deg)}']}),o})();var c=l(7238),w=l(8259),u=l.n(w);function S(o,i){if(1&o&&(e.TgZ(0,"div",8),e.TgZ(1,"p",9),e._uU(2),e.qZA(),e.qZA()),2&o){const t=i.$implicit;e.xp6(1),e.Q6J("mat-sort-header",t),e.xp6(1),e.Oqu(t)}}function D(o,i){1&o&&(e.TgZ(0,"div",10),e._UZ(1,"mat-spinner"),e.qZA())}function O(o,i){if(1&o&&(e.ynx(0),e._uU(1),e.BQk()),2&o){const t=e.oxw().$implicit;e.xp6(1),e.hij("",t.department.name," ")}}function J(o,i){1&o&&e._uU(0,"No Exsit")}function Y(o,i){if(1&o){const t=e.EpF();e.TgZ(0,"div",11),e.TgZ(1,"div",12),e.TgZ(2,"div",13),e._uU(3),e.qZA(),e.TgZ(4,"div",13),e._uU(5),e.qZA(),e.TgZ(6,"div",13),e._uU(7),e.qZA(),e.TgZ(8,"div",13),e.YNc(9,O,2,1,"ng-container",14),e.YNc(10,J,1,0,"ng-template",null,15,e.W1O),e.qZA(),e.TgZ(12,"div",13),e._uU(13),e.qZA(),e.TgZ(14,"div",16),e.TgZ(15,"img",17),e.NdJ("click",function(){const s=e.CHM(t).$implicit;return e.oxw().GetEmployeeInfo(s.id)}),e.qZA(),e._UZ(16,"div",18),e.TgZ(17,"img",19),e.NdJ("click",function(){const s=e.CHM(t).$implicit;return e.oxw().routeToEdit(s.id)}),e.qZA(),e._UZ(18,"div",18),e.TgZ(19,"img",20),e.NdJ("click",function(){const s=e.CHM(t).$implicit;return e.oxw().DeleteEmployee(s.id)}),e.qZA(),e.qZA(),e.qZA(),e.qZA()}if(2&o){const t=i.$implicit,n=e.MAs(11),a=e.oxw();e.Q6J("@in",a.DataState),e.xp6(3),e.Oqu(t.full_name),e.xp6(2),e.Oqu(t.phone),e.xp6(2),e.Oqu(t.gender),e.xp6(2),e.Q6J("ngIf",null!=t.department)("ngIfElse",n),e.xp6(4),e.Oqu(t.branch.name)}}const B=[{path:"all",component:(()=>{class o{constructor(t,n){this._employeeService=t,this._router=n,this.loadingItems=!1,this.DataState="void",this.datasource=[],this.headers=["Name","Mobile","Gender","Department","Branch","Settings"],this.sortedData=this.datasource.slice()}ngOnInit(){this.fetchData()}fetchData(){this.getEmployees()}getEmployees(){this.loadingItems=!0,this._employeeService.getAllEmployees().pipe((0,g.x)(()=>{this.loadingItems=!1})).subscribe(t=>{this.datasource=t.data,this.sortedData=this.datasource.slice(),this.DataState="in"})}GetEmployeeInfo(t){this._router.navigate(["employee/find",t])}DeleteEmployee(t){u().fire({title:"Are you sure?",text:"You will not be able to recover this imaginary file!",icon:"warning",showCancelButton:!0,confirmButtonText:"Yes, delete it!",cancelButtonText:"No, keep it"}).then(n=>{n.isConfirmed?this._employeeService.removeEmployee(t).subscribe(a=>{u().fire("Deleted!","Your imaginary file has been deleted.","success"),this.getEmployees()}):n.dismiss===u().DismissReason.cancel&&u().fire("Cancelled","Your imaginary file is safe :)","error")})}routeToAdd(){this._router.navigate(["/employee/form"])}routeToEdit(t){this._router.navigate(["/employee/form",t])}sortData(t){const n=this.datasource.slice();this.sortedData=t.active&&""!==t.direction?n.sort((a,s)=>{const m="asc"===t.direction;switch(t.active){case"Name":return this.compare(a.Name,s.Name,m);case"Mobile":return this.compare(a.Mobile,s.Mobile,m);case"Gender":return this.compare(a.Gender,s.Gender,m);case"Department":return this.compare(a.Department,s.Department,m);case"Branch":return this.compare(a.Branch,s.Branch,m);case"Settings":return this.compare(a.Settings,s.Settings,m);default:return 0}}):n}compare(t,n,a){return(t<n?-1:1)*(a?1:-1)}}return o.\u0275fac=function(t){return new(t||o)(e.Y36(y),e.Y36(p.F0))},o.\u0275cmp=e.Xpm({type:o,selectors:[["app-main"]],decls:10,vars:3,consts:[[1,"container"],[1,"d-flex","flex-row-reverse"],[1,"btn","btn-success","mb-3","btn-add",3,"click"],["matSort","",3,"matSortChange"],[1,"row"],["class","col-md-2","style","text-align: center;font-weight: bold;font-size: 17px;",4,"ngFor","ngForOf"],["class","spinner",4,"ngIf"],["class","card mt-3 p-2","style","border-radius: 20px;",4,"ngFor","ngForOf"],[1,"col-md-2",2,"text-align","center","font-weight","bold","font-size","17px"],[3,"mat-sort-header"],[1,"spinner"],[1,"card","mt-3","p-2",2,"border-radius","20px"],[1,"row",2,"text-align","center","align-items","center"],[1,"col-md-2"],[4,"ngIf","ngIfElse"],["elseTemplate",""],[1,"col-md-2",2,"display","flex","justify-content","space-evenly"],["mat-raised-button","","matTooltip","info","matTooltipPosition","above","src","assets/action-data/Group 317.svg","width","29",2,"cursor","pointer",3,"click"],[1,"vl"],["mat-raised-button","","matTooltip","edit","matTooltipPosition","above","src","assets/action-data/edit.svg","width","29",2,"cursor","pointer",3,"click"],["mat-raised-button","","matTooltip","delete","matTooltipPosition","above","src","assets/action-data/delete.svg","width","25",2,"cursor","pointer",3,"click"]],template:function(t,n){1&t&&(e.TgZ(0,"div",0),e.TgZ(1,"section"),e.TgZ(2,"div",1),e.TgZ(3,"button",2),e.NdJ("click",function(){return n.routeToAdd()}),e._uU(4,"+ Add New Employee"),e.qZA(),e.qZA(),e.TgZ(5,"div",3),e.NdJ("matSortChange",function(s){return n.sortData(s)}),e.TgZ(6,"div",4),e.YNc(7,S,3,2,"div",5),e.qZA(),e.YNc(8,D,2,0,"div",6),e.YNc(9,Y,20,7,"div",7),e.qZA(),e.qZA(),e.qZA()),2&t&&(e.xp6(7),e.Q6J("ngForOf",n.headers),e.xp6(1),e.Q6J("ngIf",n.loadingItems),e.xp6(1),e.Q6J("ngForOf",n.sortedData))},directives:[d.sg,d.O5],styles:["section[_ngcontent-%COMP%]{margin-left:12rem;margin-top:6rem}.card[_ngcontent-%COMP%]{box-shadow:-1px 2px 6px}.vl[_ngcontent-%COMP%]{border-left:2px solid;height:35px}.spinner[_ngcontent-%COMP%]{position:absolute;left:50%;right:50%;top:50%;z-index:1000}.mat-sort-header-container[_ngcontent-%COMP%]{justify-content:center!important}"],data:{animation:[(0,c.X$)("in",[(0,c.SB)("in",(0,c.oB)({opacity:1,transform:"translateY(0)"})),(0,c.eR)("void=>*",[(0,c.oB)({opacity:0,transform:"translateY(100px)"}),(0,c.jt)(1e3)])])]}}),o})()},{path:"form",component:f},{path:"form/:employeeId",component:f},{path:"find/:employeeId",component:f}];let k=(()=>{class o{}return o.\u0275fac=function(t){return new(t||o)},o.\u0275mod=e.oAB({type:o}),o.\u0275inj=e.cJS({imports:[[p.Bz.forChild(B)],p.Bz]}),o})(),Q=(()=>{class o{}return o.\u0275fac=function(t){return new(t||o)},o.\u0275mod=e.oAB({type:o}),o.\u0275inj=e.cJS({imports:[[d.ez,r.UX,r.u5,k],p.Bz]}),o})()}}]);