"use strict";(self.webpackChunklamasat=self.webpackChunklamasat||[]).push([[413],{4413:(F,g,c)=>{c.r(g),c.d(g,{GroupModule:()=>J});var l=c(8583),d=c(4655),a=c(3679),m=c(8939),t=c(7716),u=c(8603),h=c(627),_=c(9724);function v(o,n){if(1&o){const e=t.EpF();t.TgZ(0,"div",15),t.NdJ("click",function(){const i=t.CHM(e).$implicit;return t.oxw().nav(i.id)}),t.TgZ(1,"div",16),t.TgZ(2,"h1",17),t._uU(3),t.qZA(),t.TgZ(4,"h5",18),t._uU(5),t.qZA(),t.qZA(),t.qZA()}if(2&o){const e=n.$implicit;t.xp6(3),t.Oqu(e.name),t.xp6(2),t.hij("Orders Count: ",e.order_count,"")}}function Z(o,n){1&o&&t._UZ(0,"img",20)}function x(o,n){if(1&o&&(t.ynx(0),t.YNc(1,Z,1,0,"img",19),t.BQk()),2&o){const e=t.oxw();t.xp6(1),t.Q6J("ngIf",e.loading)}}function b(o,n){1&o&&(t._UZ(0,"img",21),t._uU(1," Save "))}function C(o,n){if(1&o&&(t.ynx(0),t.TgZ(1,"div",23),t.TgZ(2,"span",24),t._uU(3),t.qZA(),t.qZA(),t.BQk()),2&o){const e=t.oxw().message;t.xp6(3),t.hij(" ",e," ")}}function O(o,n){if(1&o&&t.YNc(0,C,4,1,"ng-container",22),2&o){const e=n.control;t.Q6J("ngIf",e.hasError(n.validation)&&(e.dirty||e.touched))}}const T=function(o,n){return{"is-invalid":o,"is-valid":n}},G=function(o){return{validation:"required",message:"Name is required",control:o}},M=function(o){return{validation:"maxlength",message:"Name is must be at most 8 charcters",control:o}};let A=(()=>{class o{constructor(e,r,s,i,p){this._modalService=e,this._group=r,this._router=s,this._fb=i,this._swalService=p,this.loading=!1}ngOnInit(){this.fetchData(),this.initForm()}fetchData(){this.fetchGroups()}fetchGroups(){this._group.getAllGroupesNew().subscribe(e=>{this.groups=e.data.slice()})}initForm(){this.groupGroup=this._fb.group({name:[null,[a.kI.required,a.kI.maxLength(8)]]})}Submit(e){console.log(this.groupGroup),this.groupGroup.valid&&(this.loading=!0,this._group.addGroup(e).pipe((0,m.x)(()=>this.loading=!1)).subscribe(()=>{this.fetchGroups(),this.closeModal(),this._swalService.success("your group has been created successfuly")},r=>this._swalService.error("",r.error.message.data)))}Show(e){this.groupGroup.reset(),this.modalRef=this._modalService.open(e,{size:"md",modalClass:"mymodal",hideCloseButton:!1,centered:!1,backdrop:!0,animation:!0,keyboard:!1,closeOnOutsideClick:!0,backdropClass:"modal-backdrop"})}closeModal(){this._modalService.close(this.modalRef)}nav(e){this._router.navigate(["group/find",e])}}return o.\u0275fac=function(e){return new(e||o)(t.Y36(u.gk),t.Y36(h.l),t.Y36(d.F0),t.Y36(a.qu),t.Y36(_.J))},o.\u0275cmp=t.Xpm({type:o,selectors:[["app-group-main"]],decls:30,vars:16,consts:[[1,"container"],[1,"d-flex","flex-row-reverse"],[1,"btn","btn-success","mb-3","btn-add",3,"click"],[1,"row"],["class","col-md-6 mt-4 cursor-pointer",3,"click",4,"ngFor","ngForOf"],["groupModal",""],["action"," ",3,"formGroup","ngSubmit"],["type","text","formControlName","name",1,"form-control",3,"ngClass"],[3,"ngTemplateOutlet","ngTemplateOutletContext"],[1,"col-md-6"],["type","button",1,"btn","btn-danger","w-100",3,"click"],["type","submit",1,"btn","btn-success","w-100"],[4,"ngIf","ngIfElse"],["elseTemplate",""],["formError",""],[1,"col-md-6","mt-4","cursor-pointer",3,"click"],[1,"card","p-3"],[1,"fw-bold"],[1,"text-primary"],["width","30","src","assets/Spinner-1s-257px.svg","alt","",4,"ngIf"],["width","30","src","assets/Spinner-1s-257px.svg","alt",""],["src","assets/action-data/save.svg","width","20"],[4,"ngIf"],[1,"fv-plugins-message-container"],["role","alert",1,"text-danger"]],template:function(e,r){if(1&e){const s=t.EpF();t.TgZ(0,"div",0),t.TgZ(1,"section"),t.TgZ(2,"div",1),t.TgZ(3,"button",2),t.NdJ("click",function(){t.CHM(s);const p=t.MAs(8);return r.Show(p)}),t._uU(4,"+ Add New Group"),t.qZA(),t.qZA(),t.TgZ(5,"div",3),t.YNc(6,v,6,2,"div",4),t.qZA(),t.qZA(),t.qZA(),t.TgZ(7,"modal",null,5),t.TgZ(9,"modal-header"),t._uU(10," Group Modal "),t.qZA(),t.TgZ(11,"modal-content"),t.TgZ(12,"form",6),t.NdJ("ngSubmit",function(){return r.Submit(r.groupGroup.value)}),t.TgZ(13,"label"),t._uU(14,"Name"),t.qZA(),t._UZ(15,"input",7),t.GkF(16,8),t.GkF(17,8),t._UZ(18,"br"),t.TgZ(19,"div",3),t.TgZ(20,"div",9),t.TgZ(21,"button",10),t.NdJ("click",function(){return r.closeModal()}),t._uU(22,"X Cancel"),t.qZA(),t.qZA(),t.TgZ(23,"div",9),t.TgZ(24,"button",11),t.YNc(25,x,2,1,"ng-container",12),t.YNc(26,b,2,0,"ng-template",null,13,t.W1O),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.YNc(28,O,1,1,"ng-template",null,14,t.W1O)}if(2&e){const s=t.MAs(27),i=t.MAs(29);t.xp6(6),t.Q6J("ngForOf",r.groups),t.xp6(6),t.Q6J("formGroup",r.groupGroup),t.xp6(3),t.Q6J("ngClass",t.WLB(9,T,r.groupGroup.controls.name.invalid,r.groupGroup.controls.name.valid)),t.xp6(1),t.Q6J("ngTemplateOutlet",i)("ngTemplateOutletContext",t.VKq(12,G,r.groupGroup.controls.name)),t.xp6(1),t.Q6J("ngTemplateOutlet",i)("ngTemplateOutletContext",t.VKq(14,M,r.groupGroup.controls.name)),t.xp6(8),t.Q6J("ngIf",r.loading)("ngIfElse",s)}},directives:[l.sg,u.zS,u.Rb,u.Ef,a._Y,a.JL,a.sg,a.Fj,a.JJ,a.u,l.mk,l.tP,l.O5],styles:["section[_ngcontent-%COMP%]{margin-left:12rem;margin-top:6rem}.card[_ngcontent-%COMP%]{box-shadow:-1px 2px 6px;border-radius:25px}.vl[_ngcontent-%COMP%]{border-left:2px solid;height:35px}.spinner[_ngcontent-%COMP%]{position:absolute;left:50%;right:50%;top:50%;z-index:1000}[_nghost-%COMP%]     a{text-decoration:none!important}"]}),o})();var f=c(4256);function q(o,n){1&o&&t._UZ(0,"img",6)}const k=function(o,n){return[o,n]};function S(o,n){if(1&o){const e=t.EpF();t.TgZ(0,"div",7),t.TgZ(1,"div",8),t.TgZ(2,"div",4),t.TgZ(3,"div",9),t.TgZ(4,"input",10),t.NdJ("click",function(s){const p=t.CHM(e).$implicit;return t.oxw().selectOrder(p,s.target.checked)}),t.qZA(),t.qZA(),t.TgZ(5,"div",11),t.NdJ("click",function(){const i=t.CHM(e).$implicit;return t.oxw().nav(i.id)}),t.TgZ(6,"div",4),t.TgZ(7,"div",12),t.TgZ(8,"h1",13),t._uU(9),t.qZA(),t.TgZ(10,"p"),t._uU(11,"Product: "),t.TgZ(12,"span"),t._uU(13),t.qZA(),t.qZA(),t.TgZ(14,"p"),t._uU(15,"Customer: "),t.TgZ(16,"span"),t._uU(17),t.qZA(),t.qZA(),t.qZA(),t.TgZ(18,"div",14),t._UZ(19,"apx-chart",15),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA()}if(2&o){const e=n.$implicit,r=t.oxw();t.xp6(9),t.Oqu(e.name),t.xp6(4),t.Oqu(e.product.name),t.xp6(4),t.Oqu(e.customer.name),t.xp6(2),t.Q6J("fill",r.chartOptions.fill)("series",t.WLB(8,k,e.percent,100-e.percent))("chart",r.chartOptions.chart)("labels",r.chartOptions.labels)("responsive",r.chartOptions.responsive)}}const w=[{path:"all",component:A},{path:"find/:groupId",component:(()=>{class o{constructor(e,r,s,i){this._activatedRoute=e,this._groupService=r,this._router=s,this._SwalService=i,this.orders=[],this.orderSelected=[],this.loading=!1,this.initChart()}ngOnInit(){this.subscripeParams()}initChart(){this.chartOptions={fill:{colors:["#198754","#F3F3F3"]},chart:{width:150,type:"pie"},labels:["Completed","Not Completed"],responsive:[{breakpoint:480,options:{chart:{width:200},legend:{position:"bottom"}}}]}}subscripeParams(){this._activatedRoute.params.subscribe(e=>{this.groupId=+e.groupId,this.fetchOrderGroups()})}fetchOrderGroups(){this._groupService.infoGroup(this.groupId).subscribe(e=>{this.orders=e.data.order.slice(),this.orders.forEach(r=>r.percent=Math.floor(101*Math.random()))})}selectOrder(e,r){r?this.orderSelected.push(e.id):this.orderSelected.find((s,i)=>{e.id==s&&this.orderSelected.splice(i,1)})}deleteOrders(){this.loading=!0,this._groupService.removeOrdersFromGroup({order_ids:this.orderSelected,group_id:this.groupId}).pipe((0,m.x)(()=>this.loading=!1)).subscribe(()=>{this.fetchOrderGroups(),this._SwalService.success("your selected orders have been removed")},r=>this._SwalService.error("",r.error.message.data))}nav(e){this._router.navigate(["order/find",e])}}return o.\u0275fac=function(e){return new(e||o)(t.Y36(d.gz),t.Y36(h.l),t.Y36(d.F0),t.Y36(_.J))},o.\u0275cmp=t.Xpm({type:o,selectors:[["app-group-order"]],decls:8,vars:3,consts:[[1,"container"],[1,"d-flex","flex-row-reverse"],[1,"btn","btn-danger","mb-3","btn-delete","p-2",3,"disabled","click"],["width","30","src","assets/Spinner-1s-257px.svg","alt","",4,"ngIf"],[1,"row"],["class","col-md-6 mt-4",4,"ngFor","ngForOf"],["width","30","src","assets/Spinner-1s-257px.svg","alt",""],[1,"col-md-6","mt-4"],[1,"card","p-3"],[1,"col-md-2","form-col-check"],["type","checkbox","id","is_charge","name","is_charge","value","yes",1,"form-check-input",3,"click"],[1,"col-md-10","bl-black","cursor-pointer",3,"click"],[1,"col-md-5"],[1,"fw-bold"],[1,"col-md-7","mt-4"],[3,"fill","series","chart","labels","responsive"]],template:function(e,r){1&e&&(t.TgZ(0,"div",0),t.TgZ(1,"section"),t.TgZ(2,"div",1),t.TgZ(3,"button",2),t.NdJ("click",function(){return r.deleteOrders()}),t._uU(4,"Remove Orders "),t.YNc(5,q,1,0,"img",3),t.qZA(),t.qZA(),t.TgZ(6,"div",4),t.YNc(7,S,20,11,"div",5),t.qZA(),t.qZA(),t.qZA()),2&e&&(t.xp6(3),t.Q6J("disabled",0==r.orders.length||0==r.orderSelected.length),t.xp6(2),t.Q6J("ngIf",r.loading),t.xp6(2),t.Q6J("ngForOf",r.orders))},directives:[l.O5,l.sg,f.x],styles:["section[_ngcontent-%COMP%]{margin-left:12rem;margin-top:6rem}.card[_ngcontent-%COMP%]{box-shadow:-1px 2px 6px;border-radius:25px}.vl[_ngcontent-%COMP%]{border-left:2px solid;height:35px}.spinner[_ngcontent-%COMP%]{position:absolute;left:50%;right:50%;top:50%;z-index:1000}#chart[_ngcontent-%COMP%]{max-width:380px;margin:35px auto;padding:0}[_nghost-%COMP%]     .apexcharts-legend, [_nghost-%COMP%]     .apexcharts-datalabels{display:none!important}.form-col-check[_ngcontent-%COMP%]{position:relative}.form-col-check[_ngcontent-%COMP%]   .form-check-input[_ngcontent-%COMP%]{font-size:25px;position:absolute;top:30%;left:30%}.bl-black[_ngcontent-%COMP%]{border-left:1px solid black}span[_ngcontent-%COMP%]{font-weight:bold}"]}),o})()}];let y=(()=>{class o{}return o.\u0275fac=function(e){return new(e||o)},o.\u0275mod=t.oAB({type:o}),o.\u0275inj=t.cJS({imports:[[d.Bz.forChild(w)],d.Bz]}),o})(),J=(()=>{class o{}return o.\u0275fac=function(e){return new(e||o)},o.\u0275mod=t.oAB({type:o}),o.\u0275inj=t.cJS({imports:[[l.ez,y,f.X,a.u5,a.UX,u.zk]]}),o})()}}]);