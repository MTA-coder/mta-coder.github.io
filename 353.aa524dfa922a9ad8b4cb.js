"use strict";(self.webpackChunklamasat=self.webpackChunklamasat||[]).push([[353],{4413:(Z,h,p)=>{p.r(h),p.d(h,{GroupModule:()=>G});var d=p(8583),u=p(4655),a=p(3679),n=p(8939),t=p(7716),s=p(8603),m=p(627);function _(o,i){if(1&o){const e=t.EpF();t.TgZ(0,"div",14),t.NdJ("click",function(){const l=t.CHM(e).$implicit;return t.oxw().nav(l.id)}),t.TgZ(1,"div",15),t.TgZ(2,"h1",16),t._uU(3),t.qZA(),t.TgZ(4,"h5",17),t._uU(5),t.qZA(),t.qZA(),t.qZA()}if(2&o){const e=i.$implicit;t.xp6(3),t.Oqu(e.name),t.xp6(2),t.hij("Orders Count: ",e.order.length,"")}}function v(o,i){1&o&&t._UZ(0,"img",19)}function b(o,i){if(1&o&&(t.ynx(0),t.YNc(1,v,1,0,"img",18),t.BQk()),2&o){const e=t.oxw();t.xp6(1),t.Q6J("ngIf",e.loading)}}function C(o,i){1&o&&(t._UZ(0,"img",20),t._uU(1," Save "))}let x=(()=>{class o{constructor(e,r,c,l){this._modalService=e,this._group=r,this._router=c,this._fb=l,this.loading=!1}ngOnInit(){this.fetchData(),this.initForm()}fetchData(){this.fetchGroups()}fetchGroups(){this._group.getAllGroupesNew().subscribe(e=>{this.groups=e.data.slice()})}initForm(){this.groupGroup=this._fb.group({name:[null,a.kI.required]})}Submit(e){this.groupGroup.valid&&(this.loading=!0,this._group.addGroup(e).pipe((0,n.x)(()=>this.loading=!1)).subscribe(r=>{this.fetchGroups(),this.closeModal()}))}Show(e){this.groupGroup.reset(),this.modalRef=this._modalService.open(e,{size:"md",modalClass:"mymodal",hideCloseButton:!1,centered:!1,backdrop:!0,animation:!0,keyboard:!1,closeOnOutsideClick:!0,backdropClass:"modal-backdrop"})}closeModal(){this._modalService.close(this.modalRef)}nav(e){this._router.navigate(["group/find",e])}}return o.\u0275fac=function(e){return new(e||o)(t.Y36(s.gk),t.Y36(m.l),t.Y36(u.F0),t.Y36(a.qu))},o.\u0275cmp=t.Xpm({type:o,selectors:[["app-group-main"]],decls:26,vars:4,consts:[[1,"container"],[1,"d-flex","flex-row-reverse"],[1,"btn","btn-success","mb-3","btn-add",3,"click"],[1,"row"],["class","col-md-6 mt-4 cursor-pointer",3,"click",4,"ngFor","ngForOf"],["groupModal",""],["action"," ",3,"formGroup","ngSubmit"],["for"," "],["type","text ","formControlName","name",1,"form-control"],[1,"col-md-6"],["type","button",1,"btn","btn-danger","w-100",3,"click"],["type","submit",1,"btn","btn-success","w-100"],[4,"ngIf","ngIfElse"],["elseTemplate",""],[1,"col-md-6","mt-4","cursor-pointer",3,"click"],[1,"card","p-3"],[1,"fw-bold"],[1,"text-primary"],["width","30","src","assets/Spinner-1s-257px.svg","alt","",4,"ngIf"],["width","30","src","assets/Spinner-1s-257px.svg","alt",""],["src","assets/action-data/save.svg","width","20"]],template:function(e,r){if(1&e){const c=t.EpF();t.TgZ(0,"div",0),t.TgZ(1,"section"),t.TgZ(2,"div",1),t.TgZ(3,"button",2),t.NdJ("click",function(){t.CHM(c);const g=t.MAs(8);return r.Show(g)}),t._uU(4,"+ Add New Group"),t.qZA(),t.qZA(),t.TgZ(5,"div",3),t.YNc(6,_,6,2,"div",4),t.qZA(),t.qZA(),t.qZA(),t.TgZ(7,"modal",null,5),t.TgZ(9,"modal-header"),t._uU(10," Group Modal "),t.qZA(),t.TgZ(11,"modal-content"),t.TgZ(12,"form",6),t.NdJ("ngSubmit",function(){return r.Submit(r.groupGroup.value)}),t.TgZ(13,"label",7),t._uU(14,"Name"),t.qZA(),t._UZ(15,"input",8),t._UZ(16,"br"),t.TgZ(17,"div",3),t.TgZ(18,"div",9),t.TgZ(19,"button",10),t.NdJ("click",function(){return r.closeModal()}),t._uU(20,"X Cancel"),t.qZA(),t.qZA(),t.TgZ(21,"div",9),t.TgZ(22,"button",11),t.YNc(23,b,2,1,"ng-container",12),t.YNc(24,C,2,0,"ng-template",null,13,t.W1O),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA()}if(2&e){const c=t.MAs(25);t.xp6(6),t.Q6J("ngForOf",r.groups),t.xp6(6),t.Q6J("formGroup",r.groupGroup),t.xp6(11),t.Q6J("ngIf",r.loading)("ngIfElse",c)}},directives:[d.sg,s.zS,s.Rb,s.Ef,a._Y,a.JL,a.sg,a.Fj,a.JJ,a.u,d.O5],styles:["section[_ngcontent-%COMP%]{margin-left:12rem;margin-top:6rem}.card[_ngcontent-%COMP%]{box-shadow:-1px 2px 6px;border-radius:25px}.vl[_ngcontent-%COMP%]{border-left:2px solid;height:35px}.spinner[_ngcontent-%COMP%]{position:absolute;left:50%;right:50%;top:50%;z-index:1000}[_nghost-%COMP%]     a{text-decoration:none!important}"]}),o})();var f=p(4256);const T=function(){return[60,40]};function O(o,i){if(1&o){const e=t.EpF();t.TgZ(0,"div",5),t.TgZ(1,"div",6),t.TgZ(2,"div",3),t.TgZ(3,"div",7),t.TgZ(4,"input",8),t.NdJ("click",function(c){const g=t.CHM(e).$implicit;return t.oxw().selectOrder(g,c.target.checked)}),t.qZA(),t.qZA(),t.TgZ(5,"div",9),t.NdJ("click",function(){const l=t.CHM(e).$implicit;return t.oxw().nav(l.id)}),t.TgZ(6,"div",3),t.TgZ(7,"div",10),t.TgZ(8,"h1"),t._uU(9),t.qZA(),t.TgZ(10,"p"),t._uU(11),t.qZA(),t.TgZ(12,"p"),t._uU(13),t.qZA(),t.qZA(),t.TgZ(14,"div",11),t.TgZ(15,"div",12),t.TgZ(16,"div",10),t.TgZ(17,"h1"),t._uU(18,"00%"),t.qZA(),t.TgZ(19,"p",13),t._uU(20,"Completed"),t.qZA(),t.qZA(),t.TgZ(21,"div",14),t._UZ(22,"apx-chart",15),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA()}if(2&o){const e=i.$implicit,r=t.oxw();t.xp6(9),t.Oqu(e.name),t.xp6(2),t.hij("Product: ",e.product.name," "),t.xp6(2),t.hij("Customer: ",e.customer.name," "),t.xp6(9),t.Q6J("fill",r.chartOptions.fill)("series",t.DdM(8,T))("chart",r.chartOptions.chart)("labels",r.chartOptions.labels)("responsive",r.chartOptions.responsive)}}const M=[{path:"all",component:x},{path:"find/:groupId",component:(()=>{class o{constructor(e,r,c){this._activatedRoute=e,this._groupService=r,this._router=c,this.initChart(),this.orderSelected=[]}ngOnInit(){this.subscripeParams()}initChart(){this.chartOptions={series:[60,40],fill:{colors:["#198754","#F3F3F3"]},chart:{width:125,type:"pie"},labels:["Stages Completed","Stages Not Completed"],responsive:[{breakpoint:480,options:{chart:{width:150}}}]}}subscripeParams(){this._activatedRoute.params.subscribe(e=>{this.groupId=+e.groupId,this.fetchOrderGroups()})}fetchOrderGroups(){this._groupService.infoGroup(this.groupId).subscribe(e=>this.orders=e.data.order.slice())}selectOrder(e,r){r?this.orderSelected.push(e.id):this.orderSelected.find((c,l)=>{e.id==c&&this.orderSelected.splice(l,1)})}deleteOrders(){this._groupService.removeOrdersFromGroup({order_ids:this.orderSelected,group_id:this.groupId}).subscribe(()=>this.fetchOrderGroups())}nav(e){this._router.navigate(["order/find",e])}}return o.\u0275fac=function(e){return new(e||o)(t.Y36(u.gz),t.Y36(m.l),t.Y36(u.F0))},o.\u0275cmp=t.Xpm({type:o,selectors:[["app-group-order"]],decls:7,vars:2,consts:[[1,"container"],[1,"d-flex","flex-row-reverse"],[1,"btn","btn-danger","mb-3","btn-delete","p-2",3,"disabled","click"],[1,"row"],["class","col-md-6 mt-4",4,"ngFor","ngForOf"],[1,"col-md-6","mt-4"],[1,"card","p-3"],[1,"col-md-2","form-col-check"],["type","checkbox","id","is_charge","name","is_charge","value","yes",1,"form-check-input",3,"click"],[1,"col-md-10","bl-black","cursor-pointer",3,"click"],[1,"col-md-5"],[1,"col-md-7","mt-4"],[1,"row","align-items-center"],[2,"font-size","13px"],[1,"col-md-7"],[3,"fill","series","chart","labels","responsive"]],template:function(e,r){1&e&&(t.TgZ(0,"div",0),t.TgZ(1,"section"),t.TgZ(2,"div",1),t.TgZ(3,"button",2),t.NdJ("click",function(){return r.deleteOrders()}),t._uU(4,"Remove Orders"),t.qZA(),t.qZA(),t.TgZ(5,"div",3),t.YNc(6,O,23,9,"div",4),t.qZA(),t.qZA(),t.qZA()),2&e&&(t.xp6(3),t.Q6J("disabled",0==r.orders.length),t.xp6(3),t.Q6J("ngForOf",r.orders))},directives:[d.sg,f.x],styles:["section[_ngcontent-%COMP%]{margin-left:12rem;margin-top:6rem}.card[_ngcontent-%COMP%]{box-shadow:-1px 2px 6px;border-radius:25px}.vl[_ngcontent-%COMP%]{border-left:2px solid;height:35px}.spinner[_ngcontent-%COMP%]{position:absolute;left:50%;right:50%;top:50%;z-index:1000}#chart[_ngcontent-%COMP%]{max-width:380px;margin:35px auto;padding:0}[_nghost-%COMP%]     .apexcharts-legend, [_nghost-%COMP%]     .apexcharts-datalabels, [_nghost-%COMP%]     .apexcharts-theme-dark{display:none!important}.form-col-check[_ngcontent-%COMP%]{position:relative}.form-col-check[_ngcontent-%COMP%]   .form-check-input[_ngcontent-%COMP%]{font-size:25px;position:absolute;top:30%;left:30%}.bl-black[_ngcontent-%COMP%]{border-left:1px solid black}"]}),o})()}];let A=(()=>{class o{}return o.\u0275fac=function(e){return new(e||o)},o.\u0275mod=t.oAB({type:o}),o.\u0275inj=t.cJS({imports:[[u.Bz.forChild(M)],u.Bz]}),o})(),G=(()=>{class o{}return o.\u0275fac=function(e){return new(e||o)},o.\u0275mod=t.oAB({type:o}),o.\u0275inj=t.cJS({imports:[[d.ez,A,f.X,a.u5,a.UX,s.zk]]}),o})()},3927:(Z,h,p)=>{p.d(h,{s:()=>u});var d=p(1841);class u{constructor(n,t,s="https://lamasat.preneom.com"){this.http=n,this.entityname=t,this.baseURL=s,this.apiURL=`${this.baseURL}/${this.entityname}`}createEntity(n,t){return this.http.post(this.apiURL+t,n)}createEntityDownload(n,t){return this.http.post(this.apiURL+t,n,{responseType:"arraybuffer"})}readEntities(n,t){const s=new d.LE({fromObject:n});return this.http.get(this.apiURL+t,{params:s})}readEntity(n,t){const s=this.joinEntityUrl(n,t);return this.http.get(s)}updateEntity(n,t,s){const m=this.joinEntityUrl(n,s);return this.http.put(this.apiURL+m,t)}updateQueryEntity(n,t){return this.http.put(this.apiURL+t,n)}deleteEntity(n,t,s){const m=this.joinEntityUrl(n,s),_=new d.LE({fromObject:t});return this.http.delete(m,{params:_})}joinEntityUrl(n,t){return n?[this.apiURL+t,n].join("/"):[this.apiURL+t].join("/")}}}}]);