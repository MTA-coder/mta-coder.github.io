"use strict";(self.webpackChunklamasat=self.webpackChunklamasat||[]).push([[427],{3427:(O,b,c)=>{c.r(b),c.d(b,{GroupModule:()=>vt});var _=c(8583),h=c(4655),d=c(3679),f=c(8939),i=c(6058),s=c(8259),l=c.n(s),t=c(7716),g=c(8603),m=c(627),v=c(9724),A=c(1988),U=c(8590),C=c(3935),M=c(6627),x=c(8295),G=c(9983),N=c(1095),S=c(9992),y=c(4885);let k=(()=>{class o{transform(e,n){return 0!==e.length&&""!==n&&void 0!==n?e.filter(p=>p.name.toLowerCase().includes(n.toLowerCase())):e}}return o.\u0275fac=function(e){return new(e||o)},o.\u0275pipe=t.Yjl({name:"groupSearch",type:o,pure:!0}),o})();const J=["groupLists"];function Y(o,r){1&o&&(t.TgZ(0,"div",43),t._UZ(1,"mat-spinner"),t.qZA())}function I(o,r){1&o&&(t.TgZ(0,"div",43),t._UZ(1,"mat-spinner"),t.qZA())}function F(o,r){if(1&o){const e=t.EpF();t.TgZ(0,"div",50),t.NdJ("click",function(){t.CHM(e);const p=t.oxw().$implicit;return t.oxw().remove(p.id)}),t._UZ(1,"img",51),t.qZA()}}function P(o,r){if(1&o){const e=t.EpF();t.TgZ(0,"div",44),t.YNc(1,F,2,0,"div",45),t.TgZ(2,"div",46),t.NdJ("click",function(){const a=t.CHM(e).$implicit;return t.oxw().nav(a.id)}),t.TgZ(3,"mat-icon",47),t.NdJ("click",function(){const a=t.CHM(e).$implicit;return t.oxw().navStage(a.id)}),t._uU(4,"settings"),t.qZA(),t.TgZ(5,"h3",48),t._uU(6),t.qZA(),t.TgZ(7,"h5",49),t._uU(8),t.qZA(),t.qZA(),t.qZA()}if(2&o){const e=r.$implicit,n=t.oxw();t.xp6(1),t.Q6J("ngIf",n.removeCheck),t.xp6(5),t.Oqu(e.name),t.xp6(2),t.hij("Orders Count: ",e.order_count,"")}}function D(o,r){1&o&&t._UZ(0,"mat-spinner")}function Q(o,r){1&o&&t._UZ(0,"img",53)}function E(o,r){if(1&o&&(t.ynx(0),t.YNc(1,Q,1,0,"img",52),t.BQk()),2&o){const e=t.oxw();t.xp6(1),t.Q6J("ngIf",e.loading)}}function $(o,r){1&o&&(t._UZ(0,"img",54),t._uU(1," Save "))}function H(o,r){1&o&&(t.TgZ(0,"div",55),t._uU(1," Loading Items... "),t.qZA())}function R(o,r){if(1&o&&(t.TgZ(0,"mat-list-option",56),t._uU(1),t.qZA()),2&o){const e=r.$implicit;t.Q6J("value",e.id),t.xp6(1),t.hij(" ",e.name," ")}}function j(o,r){1&o&&t._UZ(0,"img",53)}function z(o,r){if(1&o&&(t.ynx(0),t.YNc(1,j,1,0,"img",52),t.BQk()),2&o){const e=t.oxw();t.xp6(1),t.Q6J("ngIf",e.loading)}}function L(o,r){1&o&&(t._UZ(0,"img",54),t._uU(1," Save "))}function B(o,r){if(1&o&&(t.ynx(0),t.TgZ(1,"div",57),t.TgZ(2,"span",58),t._uU(3),t.qZA(),t.qZA(),t.BQk()),2&o){const e=t.oxw().message;t.xp6(3),t.hij(" ",e," ")}}function X(o,r){if(1&o&&t.YNc(0,B,4,1,"ng-container",21),2&o){const e=r.control;t.Q6J("ngIf",e.hasError(r.validation)&&(e.dirty||e.touched))}}const W=function(o,r){return{"is-invalid":o,"is-valid":r}},K=function(o){return{validation:"required",message:"Name is required",control:o}};let V=(()=>{class o{constructor(e,n,p,a,u,Z){this._modalService=e,this._group=n,this._router=p,this._fb=a,this._swalService=u,this._userService=Z,this.groups=[],this.loading=!1,this.loadingItems=!1,this.removeCheck=!1,this.loadingGroupNew=!1,this.groupNewName=""}ngOnInit(){this.fetchData(),this.initForm(),this.intiGroup()}fetchData(){this.fetchGroups()}fetchGroups(e="open"){this.loading=!0,this._group.filterGroup(e).pipe((0,f.x)(()=>{this.loading=!1,this.loadingItems=!1})).subscribe(n=>this.groups=n.data.slice())}intiGroup(){this.groupStateGroup=this._fb.group({order_ids:[null,d.kI.required],group_id:[null,d.kI.required]})}initForm(){this.groupGroup=this._fb.group({name:[null,[d.kI.required]]})}Submit(e){this.groupGroup.valid&&(this.groupGroup.get("name").setValue(this.groupNewName+this.groupGroup.get("name").value),this.loading=!0,this._group.addGroup(this.groupGroup.value).pipe((0,f.x)(()=>this.loading=!1)).subscribe(()=>{this.fetchGroups(),this.closeModal(),this._swalService.success("your group has been created successfully")},n=>this._swalService.error("",n.error.message.data)))}remove(e){l().fire({title:"Are you sure?",text:"You will not be able to recover this imaginary file!",icon:"warning",showCancelButton:!0,confirmButtonText:"Yes, delete it!",cancelButtonText:"No, keep it"}).then(n=>{n.isConfirmed?this._group.removeGroup(e).subscribe(p=>{l().fire("Deleted!","Your imaginary file has been deleted.","success"),this.fetchGroups()}):n.dismiss===l().DismissReason.cancel&&l().fire("Cancelled","Your imaginary file is safe :)","error")})}NewGroup(e){this.loadingGroupNew=!0,this.Show(e),this._userService.getNewNamesModel(i.i.Group).pipe((0,f.x)(()=>this.loadingGroupNew=!1)).subscribe(n=>this.groupNewName=n.data)}Show(e){this.groupGroup.reset(),this.modalRef=this._modalService.open(e,{size:"md",modalClass:"mymodal",hideCloseButton:!1,centered:!1,backdrop:!0,animation:!0,keyboard:!1,closeOnOutsideClick:!0,backdropClass:"modal-backdrop"})}closeModal(){this._modalService.close(this.modalRef)}nav(e){this._router.navigate(["group/find",e])}navStage(e){this._router.navigate(["group/find/stage",e])}showGroupState(e){this.loadingItems=!0,this.Show(e),this.fetchGroups()}changeState(){var e=[];this.groupLists.selectedOptions.selected.forEach(n=>e.push(n.value)),this.groupStateGroup.patchValue({group_ids:e,state:"inprogress"}),this.loading=!0,this._group.updateState(this.groupStateGroup.value).pipe((0,f.x)(()=>this.loading=!1)).subscribe(n=>{this.closeModal(),this.fetchGroups()})}}return o.\u0275fac=function(e){return new(e||o)(t.Y36(g.gk),t.Y36(m.l),t.Y36(h.F0),t.Y36(d.qu),t.Y36(v.J),t.Y36(A.K))},o.\u0275cmp=t.Xpm({type:o,selectors:[["app-group-main"]],viewQuery:function(e,n){if(1&e&&t.Gf(J,5),2&e){let p;t.iGM(p=t.CRH())&&(n.groupLists=p.first)}},decls:103,vars:31,consts:[[1,"nav-title-header","fs-4","fw-bold","text-center"],[1,"container"],[1,"btn-plus"],[1,"btn","btn-primary","btn-add-order",3,"click"],["mat-raised-button","","matTooltip","Add New Group","matTooltipPosition","above","src","assets/action-data/plus-circle-dotted.svg","alt","plus add","width","45"],[1,"row"],[1,"col-md-6","mb-3"],[1,"order-search"],["type","text","placeholder","search on all groups..",1,"form-control",3,"ngModel","ngModelChange"],[3,"matMenuTriggerFor"],[1,"ms-1"],[1,"col-md-3"],[1,"btn","btn-secondary","mb-3","btn-add","w-100",3,"click"],[1,"btn","btn-danger","mb-3","btn-add",3,"disabled","click"],["class","spinner",4,"ngIf"],["class","col-md-6 mt-3 position-relative",4,"ngFor","ngForOf"],["groupModal",""],["action"," ",3,"formGroup","ngSubmit"],[1,"input-icons","position-relative"],["mat-raised-button","","matTooltip","Refresh New Name","matTooltipPosition","above",1,"fw-bold","h-100","p-2","position-absolute","h-100","cursor-pointer"],["type","text","formControlName","name",1,"form-control","input-field","text-center",3,"ngClass"],[4,"ngIf"],[3,"ngTemplateOutlet","ngTemplateOutletContext"],[1,"col-md-6"],["type","button",1,"btn","btn-danger","w-100",3,"click"],["type","submit",1,"btn","btn-success","w-100"],[4,"ngIf","ngIfElse"],["elseTemplate",""],["stateModal",""],[1,"row","d-flex","align-items-baseline"],["appearance","outline"],["matInput","","placeholder","Search...",1,"w-100",3,"ngModel","ngModelChange"],["matSuffix",""],["mat-button","","color","primary",1,"w-100",3,"click"],["mat-button","","color","warn",1,"w-100",3,"click"],[1,"mb-3","mt-2","border"],["groupLists",""],["class","loading-items fs-5",4,"ngIf"],["checkboxPosition","before","color","primary",3,"value",4,"ngFor","ngForOf"],["type","submit",1,"btn","btn-success","w-100",3,"disabled","click"],["formError",""],["menufilter","matMenu"],["mat-menu-item","",3,"click"],[1,"spinner"],[1,"col-md-6","mt-3","position-relative"],["class","deletd-section cursor-pointer","style","position: absolute; right: 0; top: 0; z-index: 1",3,"click",4,"ngIf"],[1,"card","p-3","cursor-pointer","postion-relative",3,"click"],[1,"group-stage","p-2",3,"click"],[1,"fw-bold"],[1,"text-primary"],[1,"deletd-section","cursor-pointer",2,"position","absolute","right","0","top","0","z-index","1",3,"click"],["src","assets/action-data/close.svg","alt","","width","20",2,"cursor","pointer"],["width","30","src","assets/Spinner-1s-257px.svg","alt","",4,"ngIf"],["width","30","src","assets/Spinner-1s-257px.svg","alt",""],["src","assets/action-data/save.svg","width","20"],[1,"loading-items","fs-5"],["checkboxPosition","before","color","primary",3,"value"],[1,"fv-plugins-message-container"],["role","alert",1,"text-danger"]],template:function(e,n){if(1&e){const p=t.EpF();t.TgZ(0,"div",0),t._uU(1,"Group"),t.qZA(),t.TgZ(2,"div",1),t.TgZ(3,"section"),t.TgZ(4,"div",2),t.TgZ(5,"button",3),t.NdJ("click",function(){t.CHM(p);const u=t.MAs(30);return n.NewGroup(u)}),t._UZ(6,"img",4),t.qZA(),t.qZA(),t.TgZ(7,"div",5),t.TgZ(8,"div",6),t.TgZ(9,"div",7),t.TgZ(10,"input",8),t.NdJ("ngModelChange",function(u){return n.searchGroup=u}),t.qZA(),t.TgZ(11,"button",9),t.TgZ(12,"span"),t._uU(13,"filter"),t.qZA(),t.TgZ(14,"mat-icon",10),t._uU(15,"settings_input_component"),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.TgZ(16,"div",11),t.TgZ(17,"button",12),t.NdJ("click",function(){t.CHM(p);const u=t.MAs(54);return n.Show(u)}),t._uU(18," Change State "),t.qZA(),t.qZA(),t.TgZ(19,"div",11),t.TgZ(20,"button",13),t.NdJ("click",function(){return n.removeCheck=!n.removeCheck}),t._uU(21," - Remove Group "),t.qZA(),t.qZA(),t.qZA(),t.TgZ(22,"div",5),t.YNc(23,Y,2,0,"div",14),t.qZA(),t.TgZ(24,"div",5),t.TgZ(25,"div",5),t.YNc(26,I,2,0,"div",14),t.qZA(),t.YNc(27,P,9,3,"div",15),t.ALo(28,"groupSearch"),t.qZA(),t.qZA(),t.qZA(),t.TgZ(29,"modal",null,16),t.TgZ(31,"modal-header"),t._uU(32," Group Modal "),t.qZA(),t.TgZ(33,"modal-content"),t.TgZ(34,"form",17),t.NdJ("ngSubmit",function(){return n.Submit(n.groupGroup.value)}),t.TgZ(35,"label"),t._uU(36,"Name"),t.qZA(),t.TgZ(37,"div",18),t.TgZ(38,"span",19),t._uU(39),t.qZA(),t._UZ(40,"input",20),t.YNc(41,D,1,0,"mat-spinner",21),t.GkF(42,22),t.qZA(),t._UZ(43,"br"),t.TgZ(44,"div",5),t.TgZ(45,"div",23),t.TgZ(46,"button",24),t.NdJ("click",function(){return n.closeModal()}),t._uU(47," X Cancel "),t.qZA(),t.qZA(),t.TgZ(48,"div",23),t.TgZ(49,"button",25),t.YNc(50,E,2,1,"ng-container",26),t.YNc(51,$,2,0,"ng-template",null,27,t.W1O),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.TgZ(53,"modal",null,28),t.TgZ(55,"modal-header"),t._uU(56," State Model : "),t.TgZ(57,"small"),t.TgZ(58,"b"),t._uU(59,"inprogress"),t.qZA(),t.qZA(),t.qZA(),t.TgZ(60,"modal-content"),t.TgZ(61,"div",29),t.TgZ(62,"div",23),t.TgZ(63,"mat-form-field",30),t.TgZ(64,"mat-label"),t._uU(65,"Search"),t.qZA(),t.TgZ(66,"input",31),t.NdJ("ngModelChange",function(u){return n.searchGroup=u}),t.qZA(),t.TgZ(67,"mat-icon",32),t._uU(68,"search"),t.qZA(),t.qZA(),t.qZA(),t.TgZ(69,"div",11),t.TgZ(70,"button",33),t.NdJ("click",function(){return t.CHM(p),t.MAs(76).selectAll()}),t._uU(71," Select All "),t.qZA(),t.qZA(),t.TgZ(72,"div",11),t.TgZ(73,"button",34),t.NdJ("click",function(){return t.CHM(p),t.MAs(76).deselectAll()}),t._uU(74," Deselect All "),t.qZA(),t.qZA(),t.qZA(),t.TgZ(75,"mat-selection-list",35,36),t.YNc(77,H,2,0,"div",37),t.YNc(78,R,2,2,"mat-list-option",38),t.ALo(79,"groupSearch"),t.qZA(),t.TgZ(80,"div",5),t.TgZ(81,"div",23),t.TgZ(82,"button",24),t.NdJ("click",function(){return n.closeModal()}),t._uU(83," X Cancel "),t.qZA(),t.qZA(),t.TgZ(84,"div",23),t.TgZ(85,"button",39),t.NdJ("click",function(){return n.changeState()}),t.YNc(86,z,2,1,"ng-container",26),t.YNc(87,L,2,0,"ng-template",null,27,t.W1O),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.YNc(89,X,1,1,"ng-template",null,40,t.W1O),t.TgZ(91,"mat-menu",null,41),t.TgZ(93,"button",42),t.NdJ("click",function(){return n.fetchGroups("inprogress")}),t.TgZ(94,"mat-icon"),t._uU(95,"cached"),t.qZA(),t.TgZ(96,"span"),t._uU(97,"InProgress"),t.qZA(),t.qZA(),t.TgZ(98,"button",42),t.NdJ("click",function(){return n.fetchGroups()}),t.TgZ(99,"mat-icon"),t._uU(100,"input"),t.qZA(),t.TgZ(101,"span"),t._uU(102,"Open"),t.qZA(),t.qZA(),t.qZA()}if(2&e){const p=t.MAs(52),a=t.MAs(90),u=t.MAs(92);t.xp6(10),t.Q6J("ngModel",n.searchGroup),t.xp6(1),t.Q6J("matMenuTriggerFor",u),t.xp6(9),t.Q6J("disabled",0==n.groups.length),t.xp6(3),t.Q6J("ngIf",n.loading),t.xp6(3),t.Q6J("ngIf",n.loading),t.xp6(1),t.Q6J("ngForOf",t.xi3(28,20,n.groups,n.searchGroup)),t.xp6(7),t.Q6J("formGroup",n.groupGroup),t.xp6(5),t.Oqu(n.groupNewName),t.xp6(1),t.Q6J("ngClass",t.WLB(26,W,n.groupGroup.controls.name.invalid,n.groupGroup.controls.name.valid)),t.xp6(1),t.Q6J("ngIf",n.loadingGroupNew),t.xp6(1),t.Q6J("ngTemplateOutlet",a)("ngTemplateOutletContext",t.VKq(29,K,n.groupGroup.controls.name)),t.xp6(8),t.Q6J("ngIf",n.loading)("ngIfElse",p),t.xp6(16),t.Q6J("ngModel",n.searchGroup),t.xp6(11),t.Q6J("ngIf",n.loadingItems),t.xp6(1),t.Q6J("ngForOf",t.xi3(79,23,n.groups,n.searchGroup)),t.xp6(7),t.Q6J("disabled",0==n.groups.length),t.xp6(1),t.Q6J("ngIf",n.loading)("ngIfElse",p)}},directives:[U.gM,d.Fj,d.JJ,d.On,C.p6,M.Hw,_.O5,_.sg,g.zS,g.Rb,g.Ef,d._Y,d.JL,d.sg,d.u,_.mk,_.tP,x.KE,x.hX,G.Nt,x.R9,N.lW,S.Ub,C.VK,C.OP,y.$g,S.vS],pipes:[k],styles:[".card[_ngcontent-%COMP%]{box-shadow:-1px 2px 6px;border-radius:25px}.vl[_ngcontent-%COMP%]{border-left:2px solid;height:35px}.mat-sort-header-container[_ngcontent-%COMP%]{justify-content:center!important}a[_ngcontent-%COMP%]{text-decoration:none!important}.btn-plus[_ngcontent-%COMP%]{position:fixed;bottom:0;right:0;padding:50px;z-index:1000}.btn-plus[_ngcontent-%COMP%]   .btn-add-order[_ngcontent-%COMP%]{height:75px;width:75px;border-radius:50%!important}.order-state[_ngcontent-%COMP%]{position:relative;overflow:hidden}.order-state[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:nth-child(1){width:100%;text-align:left}.order-state[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:nth-child(2){position:absolute;top:0;right:10px;border:none;background:none;padding:7px;border-left:1px solid white;color:#fff}.order-search[_ngcontent-%COMP%]{position:relative;height:70%}.order-search[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{position:absolute;top:0;right:0;border:none;background:none;padding:6px;display:flex;align-items:center}mat-selection-list[_ngcontent-%COMP%]{height:16rem;overflow:auto}.loading-items[_ngcontent-%COMP%]{position:absolute;top:50%;left:35%}.group-stage[_ngcontent-%COMP%]{position:absolute;top:0;right:25px}.input-icons[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{border-right:1px solid #ced4da}[_nghost-%COMP%]     mat-spinner{width:25px!important;height:25px!important;position:absolute!important;top:7px!important;right:43px!important}[_nghost-%COMP%]     mat-spinner svg{width:25px!important;height:25px!important}"]}),o})();var w=c(4256);function tt(o,r){1&o&&t._UZ(0,"img",8)}const et=function(o,r){return[o,r]};function ot(o,r){if(1&o){const e=t.EpF();t.TgZ(0,"div",9),t.TgZ(1,"div",10),t.TgZ(2,"div",6),t.TgZ(3,"div",11),t.TgZ(4,"input",12),t.NdJ("click",function(p){const u=t.CHM(e).$implicit;return t.oxw().selectOrder(u,p.target.checked)}),t.qZA(),t.qZA(),t.TgZ(5,"div",13),t.NdJ("click",function(){const a=t.CHM(e).$implicit;return t.oxw().nav(a.id)}),t.TgZ(6,"div",6),t.TgZ(7,"div",14),t.TgZ(8,"h1",15),t._uU(9),t.qZA(),t.TgZ(10,"p"),t._uU(11," Product: "),t.TgZ(12,"span"),t._uU(13),t.qZA(),t.qZA(),t.TgZ(14,"p"),t._uU(15," Customer: "),t.TgZ(16,"span"),t._uU(17),t.qZA(),t.qZA(),t.qZA(),t.TgZ(18,"div",16),t._UZ(19,"apx-chart",17),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA()}if(2&o){const e=r.$implicit,n=t.oxw();t.xp6(9),t.Oqu(e.name),t.xp6(4),t.Oqu(e.product.name),t.xp6(4),t.Oqu(e.customer.name),t.xp6(2),t.Q6J("fill",n.chartOptions.fill)("series",t.WLB(8,et,e.percent,100-e.percent))("chart",n.chartOptions.chart)("labels",n.chartOptions.labels)("responsive",n.chartOptions.responsive)}}let nt=(()=>{class o{constructor(e,n,p,a){this._activatedRoute=e,this._groupService=n,this._router=p,this._SwalService=a,this.orders=[],this.orderSelected=[],this.loading=!1,this.initChart()}ngOnInit(){this.subscripeParams()}initChart(){this.chartOptions={fill:{colors:["#198754","#F3F3F3"]},chart:{width:150,type:"pie"},labels:["Completed","Not Completed"],responsive:[{breakpoint:480,options:{chart:{width:200},legend:{position:"bottom"}}}]}}subscripeParams(){this._activatedRoute.params.subscribe(e=>{this.groupId=+e.groupId,this.fetchOrderGroups()})}fetchOrderGroups(){this._groupService.infoGroup(this.groupId).subscribe(e=>{this.orders=e.data.order.slice(),this.orders.forEach(n=>n.percent=Math.floor(101*Math.random()))})}selectOrder(e,n){n?this.orderSelected.push(e.id):this.orderSelected.find((p,a)=>{e.id==p&&this.orderSelected.splice(a,1)})}deleteOrders(){this.loading=!0,this._groupService.removeOrdersFromGroup({order_ids:this.orderSelected,group_id:this.groupId}).pipe((0,f.x)(()=>this.loading=!1)).subscribe(()=>{this.fetchOrderGroups(),this._SwalService.success("your selected orders have been removed")},n=>this._SwalService.error("",n.error.message.data))}nav(e){this._router.navigate(["order/find",e])}route(){this._router.navigate(["group/find/stage/",this.groupId])}}return o.\u0275fac=function(e){return new(e||o)(t.Y36(h.gz),t.Y36(m.l),t.Y36(h.F0),t.Y36(v.J))},o.\u0275cmp=t.Xpm({type:o,selectors:[["app-group-order"]],decls:12,vars:3,consts:[[1,"nav-title-header","fs-4","fw-bold","text-center"],[1,"container"],[1,"d-flex","flex-row-reverse"],[1,"btn","btn-danger","mb-3","btn-delete","p-2",3,"disabled","click"],["width","30","src","assets/Spinner-1s-257px.svg","alt","",4,"ngIf"],[1,"btn","btn-success","mb-3","me-3","p-2",3,"click"],[1,"row"],["class","col-md-6 mt-3",4,"ngFor","ngForOf"],["width","30","src","assets/Spinner-1s-257px.svg","alt",""],[1,"col-md-6","mt-3"],[1,"card","p-3"],[1,"col-md-2","form-col-check"],["type","checkbox","id","is_charge","name","is_charge","value","yes",1,"form-check-input",3,"click"],[1,"col-md-10","bl-black","cursor-pointer",3,"click"],[1,"col-md-5"],[1,"fw-bold"],[1,"col-md-7","mt-3"],[3,"fill","series","chart","labels","responsive"]],template:function(e,n){1&e&&(t.TgZ(0,"div",0),t._uU(1,"Group > Order"),t.qZA(),t.TgZ(2,"div",1),t.TgZ(3,"section"),t.TgZ(4,"div",2),t.TgZ(5,"button",3),t.NdJ("click",function(){return n.deleteOrders()}),t._uU(6," Remove Orders "),t.YNc(7,tt,1,0,"img",4),t.qZA(),t.TgZ(8,"button",5),t.NdJ("click",function(){return n.route()}),t._uU(9,"Stages"),t.qZA(),t.qZA(),t.TgZ(10,"div",6),t.YNc(11,ot,20,11,"div",7),t.qZA(),t.qZA(),t.qZA()),2&e&&(t.xp6(5),t.Q6J("disabled",0==n.orders.length||0==n.orderSelected.length),t.xp6(2),t.Q6J("ngIf",n.loading),t.xp6(4),t.Q6J("ngForOf",n.orders))},directives:[_.O5,_.sg,w.x],styles:[".card[_ngcontent-%COMP%]{box-shadow:-1px 2px 6px;border-radius:25px}.vl[_ngcontent-%COMP%]{border-left:2px solid;height:35px}#chart[_ngcontent-%COMP%]{max-width:380px;margin:35px auto;padding:0}[_nghost-%COMP%]     .apexcharts-legend, [_nghost-%COMP%]     .apexcharts-datalabels{display:none!important}.form-col-check[_ngcontent-%COMP%]{position:relative}.form-col-check[_ngcontent-%COMP%]   .form-check-input[_ngcontent-%COMP%]{font-size:25px;position:absolute;top:30%;left:30%}.bl-black[_ngcontent-%COMP%]{border-left:1px solid black}span[_ngcontent-%COMP%]{font-weight:bold}"]}),o})();var rt=c(6926),q=c(7832);function it(o,r){if(1&o&&t._uU(0),2&o){const e=t.oxw().$implicit;t.Oqu(e.name)}}function at(o,r){if(1&o&&t._uU(0),2&o){const e=t.oxw().$implicit;t.Oqu(e.name)}}function st(o,r){1&o&&t._UZ(0,"img",28)}function pt(o,r){if(1&o){const e=t.EpF();t.TgZ(0,"mat-step"),t.YNc(1,at,1,1,"ng-template",13),t.TgZ(2,"div",4),t.TgZ(3,"div",14),t.TgZ(4,"label",15),t._uU(5,"Default execution time"),t.qZA(),t.TgZ(6,"h4",9),t._uU(7),t.qZA(),t.qZA(),t.TgZ(8,"div",14),t.TgZ(9,"div",16),t.TgZ(10,"div",17),t.TgZ(11,"mat-form-field",18),t.TgZ(12,"mat-label"),t._uU(13,"Price"),t.qZA(),t.TgZ(14,"input",19),t.NdJ("input",function(p){return t.CHM(e).$implicit.cost=p.target.value}),t.qZA(),t.TgZ(15,"span",20),t._uU(16,"$\xa0"),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.TgZ(17,"div",4),t.TgZ(18,"div",14),t.TgZ(19,"label",15),t._uU(20,"Mandatory"),t.qZA(),t.TgZ(21,"h4",9),t._uU(22),t.qZA(),t.qZA(),t.TgZ(23,"div",21),t.TgZ(24,"h4",22),t.TgZ(25,"mat-form-field",23),t.TgZ(26,"mat-label"),t._uU(27,"Note"),t.qZA(),t.TgZ(28,"textarea",24),t.NdJ("input",function(p){return t.CHM(e).$implicit.note=p.target.value}),t._uU(29),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t._UZ(30,"div",25),t.TgZ(31,"button",26),t.NdJ("click",function(){const a=t.CHM(e).$implicit,u=t.oxw().$implicit;return t.oxw().DoneStage(a.id,u.id,a.cost,a.note)}),t.TgZ(32,"mat-icon"),t._uU(33,"done_outline"),t.qZA(),t._uU(34," Done "),t.YNc(35,st,1,0,"img",27),t.qZA(),t.qZA()}if(2&o){const e=r.$implicit,n=t.oxw(2);t.xp6(7),t.hij("",e.period," Days"),t.xp6(7),t.Q6J("value",e.cost),t.xp6(8),t.hij(" ",e.is_required?"Yes":"No"," "),t.xp6(7),t.hij("                                          ",e.note,"\n                                        "),t.xp6(2),t.Q6J("disabled","inprogress"!=n.group.state||e.is_done),t.xp6(4),t.Q6J("ngIf",n.loading)}}function lt(o,r){if(1&o&&(t.TgZ(0,"mat-step"),t.YNc(1,it,1,1,"ng-template",13),t.TgZ(2,"mat-stepper",10),t.YNc(3,pt,36,6,"mat-step",11),t.qZA(),t.qZA()),2&o){const e=r.$implicit;t.xp6(3),t.Q6J("ngForOf",e.stage)}}function ut(o,r){if(1&o&&t._uU(0),2&o){const e=t.oxw().$implicit;t.Oqu(e.name)}}function ct(o,r){if(1&o&&t._uU(0),2&o){const e=t.oxw().$implicit;t.Oqu(e.name)}}function gt(o,r){1&o&&t._UZ(0,"img",28)}function dt(o,r){if(1&o){const e=t.EpF();t.TgZ(0,"mat-step"),t.YNc(1,ct,1,1,"ng-template",13),t.TgZ(2,"div",4),t.TgZ(3,"div",14),t.TgZ(4,"label",15),t._uU(5,"Default execution time"),t.qZA(),t.TgZ(6,"h4",9),t._uU(7),t.qZA(),t.qZA(),t.TgZ(8,"div",14),t.TgZ(9,"div",16),t.TgZ(10,"div",17),t.TgZ(11,"mat-form-field",18),t.TgZ(12,"mat-label"),t._uU(13,"Price"),t.qZA(),t._UZ(14,"input",29),t.TgZ(15,"span",20),t._uU(16,"$\xa0"),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.TgZ(17,"div",4),t.TgZ(18,"div",14),t.TgZ(19,"label",15),t._uU(20,"Mandatory"),t.qZA(),t.TgZ(21,"h4",9),t._uU(22),t.qZA(),t.qZA(),t.TgZ(23,"div",21),t.TgZ(24,"h4",22),t.TgZ(25,"mat-form-field",23),t.TgZ(26,"mat-label"),t._uU(27,"Note"),t.qZA(),t.TgZ(28,"textarea",24),t.NdJ("input",function(p){return t.CHM(e).$implicit.note=p.target.value}),t._uU(29),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t._UZ(30,"div",25),t.TgZ(31,"button",26),t.NdJ("click",function(){const a=t.CHM(e).$implicit,u=t.oxw().$implicit;return t.oxw(2).DoneStage(a.id,u.id,a.cost,a.note,!0)}),t.TgZ(32,"mat-icon"),t._uU(33,"done_outline"),t.qZA(),t._uU(34," Done "),t.YNc(35,gt,1,0,"img",27),t.qZA(),t.qZA()}if(2&o){const e=r.$implicit,n=t.oxw(3);t.xp6(7),t.hij("",e.period," Days"),t.xp6(7),t.Q6J("value",e.cost),t.xp6(8),t.hij(" ",e.is_required?"Yes":"No"," "),t.xp6(7),t.hij("                    ",e.note,""),t.xp6(2),t.Q6J("disabled","inprogress"!=n.group.state||e.is_done),t.xp6(4),t.Q6J("ngIf",n.loading)}}function mt(o,r){if(1&o&&(t.TgZ(0,"mat-step"),t.YNc(1,ut,1,1,"ng-template",13),t.TgZ(2,"mat-stepper",10),t.YNc(3,dt,36,6,"mat-step",11),t.qZA(),t.qZA()),2&o){const e=r.$implicit;t.xp6(3),t.Q6J("ngForOf",e.extra_stage)}}function _t(o,r){if(1&o&&(t.TgZ(0,"mat-stepper",10),t.YNc(1,mt,4,1,"mat-step",11),t.qZA()),2&o){const e=t.oxw();t.xp6(1),t.Q6J("ngForOf",e.orderExtras)}}const ht=[{path:"all",component:V},{path:"find/:groupId",component:nt},{path:"find/stage/:groupId",component:(()=>{class o{constructor(e,n,p,a){this._groupService=e,this._activatedRoute=n,this._helper=p,this._swalService=a,this.loading=!1,this.loadingEdit=!1,this.products=[],this.orderExtras=[]}ngOnInit(){this.subscribeRoute()}subscribeRoute(){this._activatedRoute.params.subscribe(e=>{this.groupId=+e.groupId,this.fetchData()})}fetchData(){this.fetchInfoGroup(),this.fetchStages()}fetchStages(){this._groupService.stageGroup(this.groupId).subscribe(e=>{this.products=e.data.product_stage.slice(),this.orderExtras=e.data.order_extra_stage.slice()})}fetchInfoGroup(){this._groupService.infoGroup(this.groupId).subscribe(e=>{this.group=e.data,this.group.forEach(n=>n.created_at=this._helper.formatDate(String(n.created_at).split("T")[0],!1))})}DoneStage(e,n,p,a,u=!1){var Z;Z=u?{order_id:n,extra_stage_id:e,price:p,note:a}:{product_id:n,stage_id:e,price:p,note:a},this.loading=!0,this._groupService.makeStageGroupDone(Z,this.groupId).pipe((0,f.x)(()=>this.loading=!1)).subscribe(Tt=>{u?this.orderExtras.find(T=>{T.id==n&&(T.is_done=!0,this._swalService.success("stage "+T.name+" has been done successfully"))}):this.products.find(T=>{T.id==n&&(T.is_done=!0,this._swalService.success("stage "+T.name+" has been done successfully"))})},Tt=>{this._swalService.error("Error","There is a stage must be done before this!")})}}return o.\u0275fac=function(e){return new(e||o)(t.Y36(m.l),t.Y36(h.gz),t.Y36(rt.s),t.Y36(v.J))},o.\u0275cmp=t.Xpm({type:o,selectors:[["app-group-stage"]],decls:31,vars:6,consts:[[1,"nav-title-header","fs-4","fw-bold","text-center"],[1,"container"],[2,"margin-left","12rem","margin-top","6rem"],[1,"card","p-4",2,"border-radius","25px"],[1,"row"],[1,"col-md-6","text-center","d-flex","align-items-center","mb-3","justify-content-between"],[1,"fw-bolder","me-2"],["type","text","disabled","",1,"form-control","w-75",3,"value"],[1,"mt-3",2,"margin-left","12rem"],[1,"fw-bolder"],["orientation","vertical"],[4,"ngFor","ngForOf"],["orientation","vertical",4,"ngIf"],["matStepLabel",""],[1,"col-md-6"],[1,"mb-2"],[1,"row","align-items-baseline"],[1,"col-md-12"],["appearance","outline"],["matInput","","type","number","min","0","placeholder","0.00",3,"value","input"],["matSuffix",""],[1,"col-md-6","align-items-baseline"],[1,"fw-bolder","w-100"],["appearance","outline",1,"w-100"],["matInput","","rows","1",3,"input"],[1,"d-flex","flex-row"],[1,"btn","btn-success",3,"disabled","click"],["width","30","src","assets/Spinner-1s-257px.svg",4,"ngIf"],["width","30","src","assets/Spinner-1s-257px.svg"],["required","","matInput","","type","number","min","0","placeholder","0.00",3,"value"]],template:function(e,n){1&e&&(t.TgZ(0,"div",0),t._uU(1,"Group > Stage"),t.qZA(),t.TgZ(2,"div",1),t.TgZ(3,"section",2),t.TgZ(4,"div",3),t.TgZ(5,"div",4),t.TgZ(6,"div",5),t.TgZ(7,"label",6),t._uU(8,"Name:"),t.qZA(),t._UZ(9,"input",7),t.qZA(),t.TgZ(10,"div",5),t.TgZ(11,"label",6),t._uU(12,"State:"),t.qZA(),t._UZ(13,"input",7),t.qZA(),t.TgZ(14,"div",5),t.TgZ(15,"label",6),t._uU(16,"Note:"),t.qZA(),t._UZ(17,"input",7),t.qZA(),t.TgZ(18,"div",5),t.TgZ(19,"label",6),t._uU(20,"Created Date:"),t.qZA(),t._UZ(21,"input",7),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.TgZ(22,"section",8),t.TgZ(23,"h1",9),t._uU(24,"Stage Details"),t.qZA(),t.TgZ(25,"mat-stepper",10),t.YNc(26,lt,4,1,"mat-step",11),t.qZA(),t.qZA(),t.TgZ(27,"section",8),t.TgZ(28,"h1",9),t._uU(29,"Extra Stages"),t.qZA(),t.YNc(30,_t,2,1,"mat-stepper",12),t.qZA(),t.qZA()),2&e&&(t.xp6(9),t.Q6J("value",n.group.name),t.xp6(4),t.Q6J("value",n.group.state),t.xp6(4),t.Q6J("value",n.group.note),t.xp6(4),t.Q6J("value",n.group.created_at),t.xp6(5),t.Q6J("ngForOf",n.products),t.xp6(4),t.Q6J("ngIf",0!=n.orderExtras.length))},directives:[q.Vq,_.sg,_.O5,q.C0,q.VY,x.KE,x.hX,G.Nt,x.R9,M.Hw],styles:[""]}),o})()}];let ft=(()=>{class o{}return o.\u0275fac=function(e){return new(e||o)},o.\u0275mod=t.oAB({type:o}),o.\u0275inj=t.cJS({imports:[[h.Bz.forChild(ht)],h.Bz]}),o})();var Zt=c(71);let vt=(()=>{class o{}return o.\u0275fac=function(e){return new(e||o)},o.\u0275mod=t.oAB({type:o}),o.\u0275inj=t.cJS({imports:[[_.ez,ft,w.X,d.u5,d.UX,g.zk,Zt.E]]}),o})()},6926:(O,b,c)=>{c.d(b,{s:()=>h});var _=c(7716);let h=(()=>{class d{constructor(){this.ReadDateClearly=i=>(i.created_at=this.formatDate(i.created_at,!1),i),this.ReadDateTimeClearly=i=>(i.created_at=this.formatDate(i.created_at,!0),i)}convertTimeAmPm(i){var s=i.getHours(),l=i.getMinutes(),t=s>=12?"pm":"am";return(s=(s%=12)||12)+":"+(l=l<10?"0"+l:l)+" "+t}convert12to24Hour(i){const[s,l]=i.split(" ");let[t,g]=s.split(":");"AM"==l?12==parseInt(t,10)&&(t="0"):parseInt(t,10)<12&&(t=(parseInt(t,10)+12).toString());let m="";return parseInt(t,10)<10&&(m="0"),m+=parseInt(t,10)+":"+g,m}convert24to12(i){var s="AM";let[l,t]=i.split(":");var g=+l;g>=12&&(12!=g&&(g-=12),s="PM");var m="";return g<=9&&(m="0"),m+g.toString()+":"+t+" "+s}diffTime(i,s){var[l,t]=i.split(":"),[g,m]=s.split(":");return 60*Math.abs(+l-+g)+Math.abs(+t-+m)}monthDiff(i,s){var l;return l=12*(s.getFullYear()-i.getFullYear()),l-=i.getMonth(),(l+=s.getMonth())<=0?0:l}getDays(i,s){for(var l=[""],t=0,g=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],m=i;m<=s&&!(++t>7);)l.push(g[m.getDay()]),m.setDate(m.getDate()+1);return l.splice(0,1),l}formatDate(i,s){var l=new Date(i),t=""+(l.getMonth()+1),g=""+l.getDate(),m=l.getFullYear();if(s)var v=this.convertTimeAmPm(l);return t.length<2&&(t="0"+t),g.length<2&&(g="0"+g),s?[m,t,g].join("-")+" "+[v].join(":"):[m,t,g].join("-")}modifyDate(i,s,l){return i.setDate(l?i.getDate()+s:i.getDate()-s),i}compareDates(i,s){return i.getFullYear()<s.getFullYear()||i.getFullYear()==s.getFullYear()&&i.getMonth()<s.getMonth()||i.getFullYear()==s.getFullYear()&&i.getMonth()==s.getMonth()&&i.getDate()<s.getDate()?-1:i.getFullYear()>s.getFullYear()||i.getFullYear()==s.getFullYear()&&i.getMonth()>s.getMonth()||i.getFullYear()==s.getFullYear()&&i.getMonth()==s.getMonth()&&i.getDate()>s.getDate()?1:0}getExtension(i){var s=i.split(".");return s[s.length-1]}isImg(i){switch(this.getExtension(i)){case"jpeg":case"jpg":case"png":return!0}return!1}}return d.\u0275fac=function(i){return new(i||d)},d.\u0275prov=_.Yz7({token:d,factory:d.\u0275fac,providedIn:"root"}),d})()}}]);