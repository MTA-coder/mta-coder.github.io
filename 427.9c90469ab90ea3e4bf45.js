"use strict";(self.webpackChunklamasat=self.webpackChunklamasat||[]).push([[427],{3427:(U,C,c)=>{c.r(C),c.d(C,{GroupModule:()=>ht});var m=c(8583),f=c(4655),g=c(3679),Z=c(8939),s=c(8259),p=c.n(s),t=c(7716),u=c(8603),d=c(627),_=c(9724),x=c(8590),h=c(3935),A=c(6627),v=c(8295),M=c(9983),S=c(1095),G=c(9992);let w=(()=>{class o{transform(e,n){return 0!==e.length&&""!==n&&void 0!==n?e.filter(a=>a.name.toLowerCase().includes(n.toLowerCase())):e}}return o.\u0275fac=function(e){return new(e||o)},o.\u0275pipe=t.Yjl({name:"groupSearch",type:o,pure:!0}),o})();const k=["groupLists"];function y(o,r){1&o&&(t.TgZ(0,"div",40),t._UZ(1,"mat-spinner"),t.qZA())}function J(o,r){1&o&&(t.TgZ(0,"div",40),t._UZ(1,"mat-spinner"),t.qZA())}function N(o,r){if(1&o){const e=t.EpF();t.TgZ(0,"div",47),t.NdJ("click",function(){t.CHM(e);const a=t.oxw().$implicit;return t.oxw().remove(a.id)}),t._UZ(1,"img",48),t.qZA()}}function Y(o,r){if(1&o){const e=t.EpF();t.TgZ(0,"div",41),t.YNc(1,N,2,0,"div",42),t.TgZ(2,"div",43),t.NdJ("click",function(){const i=t.CHM(e).$implicit;return t.oxw().nav(i.id)}),t.TgZ(3,"mat-icon",44),t.NdJ("click",function(){const i=t.CHM(e).$implicit;return t.oxw().navStage(i.id)}),t._uU(4,"settings"),t.qZA(),t.TgZ(5,"h1",45),t._uU(6),t.qZA(),t.TgZ(7,"h5",46),t._uU(8),t.qZA(),t.qZA(),t.qZA()}if(2&o){const e=r.$implicit,n=t.oxw();t.xp6(1),t.Q6J("ngIf",n.removeCheck),t.xp6(5),t.Oqu(e.name),t.xp6(2),t.hij("Orders Count: ",e.order_count,"")}}function I(o,r){1&o&&t._UZ(0,"img",50)}function F(o,r){if(1&o&&(t.ynx(0),t.YNc(1,I,1,0,"img",49),t.BQk()),2&o){const e=t.oxw();t.xp6(1),t.Q6J("ngIf",e.loading)}}function P(o,r){1&o&&(t._UZ(0,"img",51),t._uU(1," Save "))}function Q(o,r){1&o&&(t.TgZ(0,"div",52),t._uU(1," Loading Items... "),t.qZA())}function D(o,r){if(1&o&&(t.TgZ(0,"mat-list-option",53),t._uU(1),t.qZA()),2&o){const e=r.$implicit;t.Q6J("value",e.id),t.xp6(1),t.hij(" ",e.name," ")}}function E(o,r){1&o&&t._UZ(0,"img",50)}function $(o,r){if(1&o&&(t.ynx(0),t.YNc(1,E,1,0,"img",49),t.BQk()),2&o){const e=t.oxw();t.xp6(1),t.Q6J("ngIf",e.loading)}}function H(o,r){1&o&&(t._UZ(0,"img",51),t._uU(1," Save "))}function R(o,r){if(1&o&&(t.ynx(0),t.TgZ(1,"div",55),t.TgZ(2,"span",56),t._uU(3),t.qZA(),t.qZA(),t.BQk()),2&o){const e=t.oxw().message;t.xp6(3),t.hij(" ",e," ")}}function j(o,r){if(1&o&&t.YNc(0,R,4,1,"ng-container",54),2&o){const e=r.control;t.Q6J("ngIf",e.hasError(r.validation)&&(e.dirty||e.touched))}}const z=function(o,r){return{"is-invalid":o,"is-valid":r}},L=function(o){return{validation:"required",message:"Name is required",control:o}},B=function(o){return{validation:"maxlength",message:"Name is must be at most 50 charcters",control:o}},X=function(o){return{validation:"minlength",message:"Name is must be at least 4 charcters",control:o}};let V=(()=>{class o{constructor(e,n,a,i,l){this._modalService=e,this._group=n,this._router=a,this._fb=i,this._swalService=l,this.groups=[],this.loading=!1,this.loadingItems=!1,this.removeCheck=!1}ngOnInit(){this.fetchData(),this.initForm(),this.intiGroup()}fetchData(){this.fetchGroups()}fetchGroups(e="open"){this.loading=!0,this._group.filterGroup(e).pipe((0,Z.x)(()=>{this.loading=!1,this.loadingItems=!1})).subscribe(n=>this.groups=n.data.slice())}intiGroup(){this.groupStateGroup=this._fb.group({order_ids:[null,g.kI.required],group_id:[null,g.kI.required]})}initForm(){this.groupGroup=this._fb.group({name:[null,[g.kI.required,g.kI.maxLength(50),g.kI.minLength(7)]]})}Submit(e){this.groupGroup.valid&&(this.loading=!0,this._group.addGroup(e).pipe((0,Z.x)(()=>this.loading=!1)).subscribe(()=>{this.fetchGroups(),this.closeModal(),this._swalService.success("your group has been created successfuly")},n=>this._swalService.error("",n.error.message.data)))}remove(e){p().fire({title:"Are you sure?",text:"You will not be able to recover this imaginary file!",icon:"warning",showCancelButton:!0,confirmButtonText:"Yes, delete it!",cancelButtonText:"No, keep it"}).then(n=>{n.isConfirmed?this._group.removeGroup(e).subscribe(a=>{p().fire("Deleted!","Your imaginary file has been deleted.","success"),this.fetchGroups()}):n.dismiss===p().DismissReason.cancel&&p().fire("Cancelled","Your imaginary file is safe :)","error")})}Show(e){this.groupGroup.reset(),this.modalRef=this._modalService.open(e,{size:"md",modalClass:"mymodal",hideCloseButton:!1,centered:!1,backdrop:!0,animation:!0,keyboard:!1,closeOnOutsideClick:!0,backdropClass:"modal-backdrop"})}closeModal(){this._modalService.close(this.modalRef)}nav(e){this._router.navigate(["group/find",e])}navStage(e){this._router.navigate(["group/find/stage",e])}showGroupState(e){this.loadingItems=!0,this.Show(e),this.fetchGroups()}changeState(){var e=[];this.groupLists.selectedOptions.selected.forEach(n=>e.push(n.value)),this.groupStateGroup.patchValue({group_ids:e,state:"inprogress"}),this.loading=!0,this._group.updateState(this.groupStateGroup.value).pipe((0,Z.x)(()=>this.loading=!1)).subscribe(n=>{this.closeModal(),this.fetchGroups()})}}return o.\u0275fac=function(e){return new(e||o)(t.Y36(u.gk),t.Y36(d.l),t.Y36(f.F0),t.Y36(g.qu),t.Y36(_.J))},o.\u0275cmp=t.Xpm({type:o,selectors:[["app-group-main"]],viewQuery:function(e,n){if(1&e&&t.Gf(k,5),2&e){let a;t.iGM(a=t.CRH())&&(n.groupLists=a.first)}},decls:101,vars:37,consts:[[1,"nav-title-header","fs-4","fw-bold","text-center"],[1,"container"],[1,"btn-plus"],[1,"btn","btn-primary","btn-add-order",3,"click"],["mat-raised-button","","matTooltip","Add New Group","matTooltipPosition","above","src","assets/action-data/plus-circle-dotted.svg","alt","plus add","width","45"],[1,"row"],[1,"col-md-6","mb-3"],[1,"order-search"],["type","text","placeholder","search on all groups..",1,"form-control",3,"ngModel","ngModelChange"],[3,"matMenuTriggerFor"],[1,"ms-1"],["menufilter","matMenu"],["mat-menu-item","",3,"click"],[1,"col-md-3"],[1,"btn","btn-secondary","mb-3","btn-add","w-100",3,"click"],[1,"btn","btn-danger","mb-3","btn-add",3,"disabled","click"],["class","spinner",4,"ngIf"],["class","col-md-6 mt-3 position-relative",4,"ngFor","ngForOf"],["groupModal",""],["action"," ",3,"formGroup","ngSubmit"],["type","text","formControlName","name",1,"form-control",3,"ngClass"],[3,"ngTemplateOutlet","ngTemplateOutletContext"],[1,"col-md-6"],["type","button",1,"btn","btn-danger","w-100",3,"click"],["type","submit",1,"btn","btn-success","w-100"],[4,"ngIf","ngIfElse"],["elseTemplate",""],["stateModal",""],[1,"row","d-flex","align-items-baseline"],["appearance","outline"],["matInput","","placeholder","Search...",1,"w-100",3,"ngModel","ngModelChange"],["matSuffix",""],["mat-button","","color","primary",1,"w-100",3,"click"],["mat-button","","color","warn",1,"w-100",3,"click"],[1,"mb-3","mt-2","border"],["groupLists",""],["class","loading-items fs-5",4,"ngIf"],["checkboxPosition","before","color","primary",3,"value",4,"ngFor","ngForOf"],["type","submit",1,"btn","btn-success","w-100",3,"disabled","click"],["formError",""],[1,"spinner"],[1,"col-md-6","mt-3","position-relative"],["class","deletd-section cursor-pointer","style","position: absolute; right: 0; top: 0; z-index: 1",3,"click",4,"ngIf"],[1,"card","p-3","cursor-pointer","postion-relative",3,"click"],[1,"group-stage","p-2",3,"click"],[1,"fw-bold"],[1,"text-primary"],[1,"deletd-section","cursor-pointer",2,"position","absolute","right","0","top","0","z-index","1",3,"click"],["src","assets/action-data/close.svg","alt","","width","20",2,"cursor","pointer"],["width","30","src","assets/Spinner-1s-257px.svg","alt","",4,"ngIf"],["width","30","src","assets/Spinner-1s-257px.svg","alt",""],["src","assets/action-data/save.svg","width","20"],[1,"loading-items","fs-5"],["checkboxPosition","before","color","primary",3,"value"],[4,"ngIf"],[1,"fv-plugins-message-container"],["role","alert",1,"text-danger"]],template:function(e,n){if(1&e){const a=t.EpF();t.TgZ(0,"div",0),t._uU(1,"Group"),t.qZA(),t.TgZ(2,"div",1),t.TgZ(3,"section"),t.TgZ(4,"div",2),t.TgZ(5,"button",3),t.NdJ("click",function(){t.CHM(a);const l=t.MAs(42);return n.Show(l)}),t._UZ(6,"img",4),t.qZA(),t.qZA(),t.TgZ(7,"div",5),t.TgZ(8,"div",6),t.TgZ(9,"div",7),t.TgZ(10,"input",8),t.NdJ("ngModelChange",function(l){return n.searchGroup=l}),t.qZA(),t.TgZ(11,"button",9),t.TgZ(12,"span"),t._uU(13,"filter"),t.qZA(),t.TgZ(14,"mat-icon",10),t._uU(15,"settings_input_component"),t.qZA(),t.qZA(),t.TgZ(16,"mat-menu",null,11),t.TgZ(18,"button",12),t.NdJ("click",function(){return n.fetchGroups("inprogress")}),t.TgZ(19,"mat-icon"),t._uU(20,"cached"),t.qZA(),t.TgZ(21,"span"),t._uU(22,"InProgress"),t.qZA(),t.qZA(),t.TgZ(23,"button",12),t.NdJ("click",function(){return n.fetchGroups()}),t.TgZ(24,"mat-icon"),t._uU(25,"input"),t.qZA(),t.TgZ(26,"span"),t._uU(27,"Open"),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.TgZ(28,"div",13),t.TgZ(29,"button",14),t.NdJ("click",function(){t.CHM(a);const l=t.MAs(64);return n.Show(l)}),t._uU(30," Change State "),t.qZA(),t.qZA(),t.TgZ(31,"div",13),t.TgZ(32,"button",15),t.NdJ("click",function(){return n.removeCheck=!n.removeCheck}),t._uU(33," - Remove Group "),t.qZA(),t.qZA(),t.qZA(),t.TgZ(34,"div",5),t.YNc(35,y,2,0,"div",16),t.qZA(),t.TgZ(36,"div",5),t.TgZ(37,"div",5),t.YNc(38,J,2,0,"div",16),t.qZA(),t.YNc(39,Y,9,3,"div",17),t.ALo(40,"groupSearch"),t.qZA(),t.qZA(),t.qZA(),t.TgZ(41,"modal",null,18),t.TgZ(43,"modal-header"),t._uU(44," Group Modal "),t.qZA(),t.TgZ(45,"modal-content"),t.TgZ(46,"form",19),t.NdJ("ngSubmit",function(){return n.Submit(n.groupGroup.value)}),t.TgZ(47,"label"),t._uU(48,"Name"),t.qZA(),t._UZ(49,"input",20),t.GkF(50,21),t.GkF(51,21),t.GkF(52,21),t._UZ(53,"br"),t.TgZ(54,"div",5),t.TgZ(55,"div",22),t.TgZ(56,"button",23),t.NdJ("click",function(){return n.closeModal()}),t._uU(57," X Cancel "),t.qZA(),t.qZA(),t.TgZ(58,"div",22),t.TgZ(59,"button",24),t.YNc(60,F,2,1,"ng-container",25),t.YNc(61,P,2,0,"ng-template",null,26,t.W1O),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.TgZ(63,"modal",null,27),t.TgZ(65,"modal-header"),t._uU(66," State Model : "),t.TgZ(67,"small"),t.TgZ(68,"b"),t._uU(69,"inprogress"),t.qZA(),t.qZA(),t.qZA(),t.TgZ(70,"modal-content"),t.TgZ(71,"div",28),t.TgZ(72,"div",22),t.TgZ(73,"mat-form-field",29),t.TgZ(74,"mat-label"),t._uU(75,"Search"),t.qZA(),t.TgZ(76,"input",30),t.NdJ("ngModelChange",function(l){return n.searchGroup=l}),t.qZA(),t.TgZ(77,"mat-icon",31),t._uU(78,"search"),t.qZA(),t.qZA(),t.qZA(),t.TgZ(79,"div",13),t.TgZ(80,"button",32),t.NdJ("click",function(){return t.CHM(a),t.MAs(86).selectAll()}),t._uU(81," Select All "),t.qZA(),t.qZA(),t.TgZ(82,"div",13),t.TgZ(83,"button",33),t.NdJ("click",function(){return t.CHM(a),t.MAs(86).deselectAll()}),t._uU(84," Deselect All "),t.qZA(),t.qZA(),t.qZA(),t.TgZ(85,"mat-selection-list",34,35),t.YNc(87,Q,2,0,"div",36),t.YNc(88,D,2,2,"mat-list-option",37),t.ALo(89,"groupSearch"),t.qZA(),t.TgZ(90,"div",5),t.TgZ(91,"div",22),t.TgZ(92,"button",23),t.NdJ("click",function(){return n.closeModal()}),t._uU(93," X Cancel "),t.qZA(),t.qZA(),t.TgZ(94,"div",22),t.TgZ(95,"button",38),t.NdJ("click",function(){return n.changeState()}),t.YNc(96,$,2,1,"ng-container",25),t.YNc(97,H,2,0,"ng-template",null,26,t.W1O),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.YNc(99,j,1,1,"ng-template",null,39,t.W1O)}if(2&e){const a=t.MAs(17),i=t.MAs(62),l=t.MAs(100);t.xp6(10),t.Q6J("ngModel",n.searchGroup),t.xp6(1),t.Q6J("matMenuTriggerFor",a),t.xp6(21),t.Q6J("disabled",0==n.groups.length),t.xp6(3),t.Q6J("ngIf",n.loading),t.xp6(3),t.Q6J("ngIf",n.loading),t.xp6(1),t.Q6J("ngForOf",t.xi3(40,22,n.groups,n.searchGroup)),t.xp6(7),t.Q6J("formGroup",n.groupGroup),t.xp6(3),t.Q6J("ngClass",t.WLB(28,z,n.groupGroup.controls.name.invalid,n.groupGroup.controls.name.valid)),t.xp6(1),t.Q6J("ngTemplateOutlet",l)("ngTemplateOutletContext",t.VKq(31,L,n.groupGroup.controls.name)),t.xp6(1),t.Q6J("ngTemplateOutlet",l)("ngTemplateOutletContext",t.VKq(33,B,n.groupGroup.controls.name)),t.xp6(1),t.Q6J("ngTemplateOutlet",l)("ngTemplateOutletContext",t.VKq(35,X,n.groupGroup.controls.name)),t.xp6(8),t.Q6J("ngIf",n.loading)("ngIfElse",i),t.xp6(16),t.Q6J("ngModel",n.searchGroup),t.xp6(11),t.Q6J("ngIf",n.loadingItems),t.xp6(1),t.Q6J("ngForOf",t.xi3(89,25,n.groups,n.searchGroup)),t.xp6(7),t.Q6J("disabled",0==n.groups.length),t.xp6(1),t.Q6J("ngIf",n.loading)("ngIfElse",i)}},directives:[x.gM,g.Fj,g.JJ,g.On,h.p6,A.Hw,h.VK,h.OP,m.O5,m.sg,u.zS,u.Rb,u.Ef,g._Y,g.JL,g.sg,g.u,m.mk,m.tP,v.KE,v.hX,M.Nt,v.R9,S.lW,G.Ub,G.vS],pipes:[w],styles:[".card[_ngcontent-%COMP%]{box-shadow:-1px 2px 6px;border-radius:25px}.vl[_ngcontent-%COMP%]{border-left:2px solid;height:35px}[_nghost-%COMP%]     a{text-decoration:none!important}.btn-plus[_ngcontent-%COMP%]{position:fixed;bottom:0;right:0;padding:50px;z-index:1000}.btn-plus[_ngcontent-%COMP%]   .btn-add-order[_ngcontent-%COMP%]{height:75px;width:75px;border-radius:50%!important}.order-state[_ngcontent-%COMP%]{position:relative;overflow:hidden}.order-state[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:nth-child(1){width:100%;text-align:left}.order-state[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:nth-child(2){position:absolute;top:0;right:10px;border:none;background:none;padding:7px;border-left:1px solid white;color:#fff}.order-search[_ngcontent-%COMP%]{position:relative;height:70%}.order-search[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{position:absolute;top:0;right:0;border:none;background:none;padding:6px;display:flex;align-items:center}mat-selection-list[_ngcontent-%COMP%]{height:16rem;overflow:auto}.loading-items[_ngcontent-%COMP%]{position:absolute;top:50%;left:35%}.spinner[_ngcontent-%COMP%]{position:absolute;left:50%;right:50%;top:50%;z-index:1000}.group-stage[_ngcontent-%COMP%]{position:absolute;top:0;right:25px}"]}),o})();var O=c(4256);function W(o,r){1&o&&t._UZ(0,"img",8)}const K=function(o,r){return[o,r]};function tt(o,r){if(1&o){const e=t.EpF();t.TgZ(0,"div",9),t.TgZ(1,"div",10),t.TgZ(2,"div",6),t.TgZ(3,"div",11),t.TgZ(4,"input",12),t.NdJ("click",function(a){const l=t.CHM(e).$implicit;return t.oxw().selectOrder(l,a.target.checked)}),t.qZA(),t.qZA(),t.TgZ(5,"div",13),t.NdJ("click",function(){const i=t.CHM(e).$implicit;return t.oxw().nav(i.id)}),t.TgZ(6,"div",6),t.TgZ(7,"div",14),t.TgZ(8,"h1",15),t._uU(9),t.qZA(),t.TgZ(10,"p"),t._uU(11," Product: "),t.TgZ(12,"span"),t._uU(13),t.qZA(),t.qZA(),t.TgZ(14,"p"),t._uU(15," Customer: "),t.TgZ(16,"span"),t._uU(17),t.qZA(),t.qZA(),t.qZA(),t.TgZ(18,"div",16),t._UZ(19,"apx-chart",17),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA()}if(2&o){const e=r.$implicit,n=t.oxw();t.xp6(9),t.Oqu(e.name),t.xp6(4),t.Oqu(e.product.name),t.xp6(4),t.Oqu(e.customer.name),t.xp6(2),t.Q6J("fill",n.chartOptions.fill)("series",t.WLB(8,K,e.percent,100-e.percent))("chart",n.chartOptions.chart)("labels",n.chartOptions.labels)("responsive",n.chartOptions.responsive)}}let et=(()=>{class o{constructor(e,n,a,i){this._activatedRoute=e,this._groupService=n,this._router=a,this._SwalService=i,this.orders=[],this.orderSelected=[],this.loading=!1,this.initChart()}ngOnInit(){this.subscripeParams()}initChart(){this.chartOptions={fill:{colors:["#198754","#F3F3F3"]},chart:{width:150,type:"pie"},labels:["Completed","Not Completed"],responsive:[{breakpoint:480,options:{chart:{width:200},legend:{position:"bottom"}}}]}}subscripeParams(){this._activatedRoute.params.subscribe(e=>{this.groupId=+e.groupId,this.fetchOrderGroups()})}fetchOrderGroups(){this._groupService.infoGroup(this.groupId).subscribe(e=>{this.orders=e.data.order.slice(),this.orders.forEach(n=>n.percent=Math.floor(101*Math.random()))})}selectOrder(e,n){n?this.orderSelected.push(e.id):this.orderSelected.find((a,i)=>{e.id==a&&this.orderSelected.splice(i,1)})}deleteOrders(){this.loading=!0,this._groupService.removeOrdersFromGroup({order_ids:this.orderSelected,group_id:this.groupId}).pipe((0,Z.x)(()=>this.loading=!1)).subscribe(()=>{this.fetchOrderGroups(),this._SwalService.success("your selected orders have been removed")},n=>this._SwalService.error("",n.error.message.data))}nav(e){this._router.navigate(["order/find",e])}route(){this._router.navigate(["group/find/stage/",this.groupId])}}return o.\u0275fac=function(e){return new(e||o)(t.Y36(f.gz),t.Y36(d.l),t.Y36(f.F0),t.Y36(_.J))},o.\u0275cmp=t.Xpm({type:o,selectors:[["app-group-order"]],decls:12,vars:3,consts:[[1,"nav-title-header","fs-4","fw-bold","text-center"],[1,"container"],[1,"d-flex","flex-row-reverse"],[1,"btn","btn-danger","mb-3","btn-delete","p-2",3,"disabled","click"],["width","30","src","assets/Spinner-1s-257px.svg","alt","",4,"ngIf"],[1,"btn","btn-success","mb-3","me-3","p-2",3,"click"],[1,"row"],["class","col-md-6 mt-3",4,"ngFor","ngForOf"],["width","30","src","assets/Spinner-1s-257px.svg","alt",""],[1,"col-md-6","mt-3"],[1,"card","p-3"],[1,"col-md-2","form-col-check"],["type","checkbox","id","is_charge","name","is_charge","value","yes",1,"form-check-input",3,"click"],[1,"col-md-10","bl-black","cursor-pointer",3,"click"],[1,"col-md-5"],[1,"fw-bold"],[1,"col-md-7","mt-3"],[3,"fill","series","chart","labels","responsive"]],template:function(e,n){1&e&&(t.TgZ(0,"div",0),t._uU(1,"Group > Order"),t.qZA(),t.TgZ(2,"div",1),t.TgZ(3,"section"),t.TgZ(4,"div",2),t.TgZ(5,"button",3),t.NdJ("click",function(){return n.deleteOrders()}),t._uU(6," Remove Orders "),t.YNc(7,W,1,0,"img",4),t.qZA(),t.TgZ(8,"button",5),t.NdJ("click",function(){return n.route()}),t._uU(9,"Stages"),t.qZA(),t.qZA(),t.TgZ(10,"div",6),t.YNc(11,tt,20,11,"div",7),t.qZA(),t.qZA(),t.qZA()),2&e&&(t.xp6(5),t.Q6J("disabled",0==n.orders.length||0==n.orderSelected.length),t.xp6(2),t.Q6J("ngIf",n.loading),t.xp6(4),t.Q6J("ngForOf",n.orders))},directives:[m.O5,m.sg,O.x],styles:[".card[_ngcontent-%COMP%]{box-shadow:-1px 2px 6px;border-radius:25px}.vl[_ngcontent-%COMP%]{border-left:2px solid;height:35px}.spinner[_ngcontent-%COMP%]{position:absolute;left:50%;right:50%;top:50%;z-index:1000}#chart[_ngcontent-%COMP%]{max-width:380px;margin:35px auto;padding:0}[_nghost-%COMP%]     .apexcharts-legend, [_nghost-%COMP%]     .apexcharts-datalabels{display:none!important}.form-col-check[_ngcontent-%COMP%]{position:relative}.form-col-check[_ngcontent-%COMP%]   .form-check-input[_ngcontent-%COMP%]{font-size:25px;position:absolute;top:30%;left:30%}.bl-black[_ngcontent-%COMP%]{border-left:1px solid black}span[_ngcontent-%COMP%]{font-weight:bold}"]}),o})();var ot=c(6926),q=c(7832);function nt(o,r){if(1&o&&t._uU(0),2&o){const e=t.oxw().$implicit;t.Oqu(e.name)}}function rt(o,r){if(1&o&&t._uU(0),2&o){const e=t.oxw().$implicit;t.Oqu(e.name)}}function it(o,r){1&o&&t._UZ(0,"img",28)}function st(o,r){if(1&o){const e=t.EpF();t.TgZ(0,"mat-step"),t.YNc(1,rt,1,1,"ng-template",13),t.TgZ(2,"div",4),t.TgZ(3,"div",14),t.TgZ(4,"label",15),t._uU(5,"Default execution time"),t.qZA(),t.TgZ(6,"h4",9),t._uU(7),t.qZA(),t.qZA(),t.TgZ(8,"div",14),t.TgZ(9,"div",16),t.TgZ(10,"div",17),t.TgZ(11,"mat-form-field",18),t.TgZ(12,"mat-label"),t._uU(13,"Price"),t.qZA(),t.TgZ(14,"input",19),t.NdJ("input",function(a){return t.CHM(e).$implicit.cost=a.target.value}),t.qZA(),t.TgZ(15,"span",20),t._uU(16,"$\xa0"),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.TgZ(17,"div",4),t.TgZ(18,"div",14),t.TgZ(19,"label",15),t._uU(20,"Mandatory"),t.qZA(),t.TgZ(21,"h4",9),t._uU(22),t.qZA(),t.qZA(),t.TgZ(23,"div",21),t.TgZ(24,"h4",22),t.TgZ(25,"mat-form-field",23),t.TgZ(26,"mat-label"),t._uU(27,"Note"),t.qZA(),t.TgZ(28,"textarea",24),t.NdJ("input",function(a){return t.CHM(e).$implicit.note=a.target.value}),t._uU(29),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t._UZ(30,"div",25),t.TgZ(31,"button",26),t.NdJ("click",function(){const i=t.CHM(e).$implicit,l=t.oxw().$implicit;return t.oxw().DoneStage(i.id,l.id,i.cost,i.note)}),t.TgZ(32,"mat-icon"),t._uU(33,"done_outline"),t.qZA(),t._uU(34," Done "),t.YNc(35,it,1,0,"img",27),t.qZA(),t.qZA()}if(2&o){const e=r.$implicit,n=t.oxw(2);t.xp6(7),t.hij("",e.period," Days"),t.xp6(7),t.Q6J("value",e.cost),t.xp6(8),t.hij(" ",e.is_required?"Yes":"No"," "),t.xp6(7),t.hij("                                          ",e.note,"\n                                        "),t.xp6(2),t.Q6J("disabled","inprogress"!=n.group.state||e.is_done),t.xp6(4),t.Q6J("ngIf",n.loading)}}function at(o,r){if(1&o&&(t.TgZ(0,"mat-step"),t.YNc(1,nt,1,1,"ng-template",13),t.TgZ(2,"mat-stepper",10),t.YNc(3,st,36,6,"mat-step",11),t.qZA(),t.qZA()),2&o){const e=r.$implicit;t.xp6(3),t.Q6J("ngForOf",e.stage)}}function pt(o,r){if(1&o&&t._uU(0),2&o){const e=t.oxw().$implicit;t.Oqu(e.name)}}function lt(o,r){if(1&o&&t._uU(0),2&o){const e=t.oxw().$implicit;t.Oqu(e.name)}}function ct(o,r){1&o&&t._UZ(0,"img",28)}function ut(o,r){if(1&o){const e=t.EpF();t.TgZ(0,"mat-step"),t.YNc(1,lt,1,1,"ng-template",13),t.TgZ(2,"div",4),t.TgZ(3,"div",14),t.TgZ(4,"label",15),t._uU(5,"Default execution time"),t.qZA(),t.TgZ(6,"h4",9),t._uU(7),t.qZA(),t.qZA(),t.TgZ(8,"div",14),t.TgZ(9,"div",16),t.TgZ(10,"div",17),t.TgZ(11,"mat-form-field",18),t.TgZ(12,"mat-label"),t._uU(13,"Price"),t.qZA(),t._UZ(14,"input",29),t.TgZ(15,"span",20),t._uU(16,"$\xa0"),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.TgZ(17,"div",4),t.TgZ(18,"div",14),t.TgZ(19,"label",15),t._uU(20,"Mandatory"),t.qZA(),t.TgZ(21,"h4",9),t._uU(22),t.qZA(),t.qZA(),t.TgZ(23,"div",21),t.TgZ(24,"h4",22),t.TgZ(25,"mat-form-field",23),t.TgZ(26,"mat-label"),t._uU(27,"Note"),t.qZA(),t.TgZ(28,"textarea",24),t.NdJ("input",function(a){return t.CHM(e).$implicit.note=a.target.value}),t._uU(29),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t._UZ(30,"div",25),t.TgZ(31,"button",26),t.NdJ("click",function(){const i=t.CHM(e).$implicit,l=t.oxw().$implicit;return t.oxw(2).DoneStage(i.id,l.id,i.cost,i.note,!0)}),t.TgZ(32,"mat-icon"),t._uU(33,"done_outline"),t.qZA(),t._uU(34," Done "),t.YNc(35,ct,1,0,"img",27),t.qZA(),t.qZA()}if(2&o){const e=r.$implicit,n=t.oxw(3);t.xp6(7),t.hij("",e.period," Days"),t.xp6(7),t.Q6J("value",e.cost),t.xp6(8),t.hij(" ",e.is_required?"Yes":"No"," "),t.xp6(7),t.hij("                    ",e.note,""),t.xp6(2),t.Q6J("disabled","inprogress"!=n.group.state||e.is_done),t.xp6(4),t.Q6J("ngIf",n.loading)}}function gt(o,r){if(1&o&&(t.TgZ(0,"mat-step"),t.YNc(1,pt,1,1,"ng-template",13),t.TgZ(2,"mat-stepper",10),t.YNc(3,ut,36,6,"mat-step",11),t.qZA(),t.qZA()),2&o){const e=r.$implicit;t.xp6(3),t.Q6J("ngForOf",e.extra_stage)}}function dt(o,r){if(1&o&&(t.TgZ(0,"mat-stepper",10),t.YNc(1,gt,4,1,"mat-step",11),t.qZA()),2&o){const e=t.oxw();t.xp6(1),t.Q6J("ngForOf",e.orderExtras)}}const _t=[{path:"all",component:V},{path:"find/:groupId",component:et},{path:"find/stage/:groupId",component:(()=>{class o{constructor(e,n,a,i){this._groupService=e,this._activatedRoute=n,this._helper=a,this._swalService=i,this.loading=!1,this.loadingEdit=!1,this.products=[],this.orderExtras=[]}ngOnInit(){this.subscribeRoute()}subscribeRoute(){this._activatedRoute.params.subscribe(e=>{this.groupId=+e.groupId,this.fetchData()})}fetchData(){this.fetchInfoGroup(),this.fetchStages()}fetchStages(){this._groupService.stageGroup(this.groupId).subscribe(e=>{this.products=e.data.product_stage.slice(),this.orderExtras=e.data.order_extra_stage.slice()})}fetchInfoGroup(){this._groupService.infoGroup(this.groupId).subscribe(e=>{this.group=e.data,this.group.forEach(n=>{console.log(n.created_at),console.log(String(n.created_at).split("T")[0]),n.created_at=this._helper.formatDate(String(n.created_at).split("T")[0],!1)})})}DoneStage(e,n,a,i,l=!1){var b;b=l?{order_id:n,extra_stage_id:e,price:a,note:i}:{product_id:n,stage_id:e,price:a,note:i},this.loading=!0,this._groupService.makeStageGroupDone(b,this.groupId).pipe((0,Z.x)(()=>this.loading=!1)).subscribe(Zt=>{l?this.orderExtras.find(T=>{T.id==n&&(T.is_done=!0,this._swalService.success("stage "+T.name+" has been done successfully"))}):this.products.find(T=>{T.id==n&&(T.is_done=!0,this._swalService.success("stage "+T.name+" has been done successfully"))})},Zt=>{this._swalService.error("Error","There is a stage must be done before this!")})}}return o.\u0275fac=function(e){return new(e||o)(t.Y36(d.l),t.Y36(f.gz),t.Y36(ot.s),t.Y36(_.J))},o.\u0275cmp=t.Xpm({type:o,selectors:[["app-group-stage"]],decls:31,vars:6,consts:[[1,"nav-title-header","fs-4","fw-bold","text-center"],[1,"container"],[2,"margin-left","12rem","margin-top","6rem"],[1,"card","p-4",2,"border-radius","25px"],[1,"row"],[1,"col-md-6","text-center","d-flex","align-items-center","mb-3","justify-content-between"],[1,"fw-bolder","me-2"],["type","text","disabled","",1,"form-control","w-75",3,"value"],[1,"mt-3",2,"margin-left","12rem"],[1,"fw-bolder"],["orientation","vertical"],[4,"ngFor","ngForOf"],["orientation","vertical",4,"ngIf"],["matStepLabel",""],[1,"col-md-6"],[1,"mb-2"],[1,"row","align-items-baseline"],[1,"col-md-12"],["appearance","outline"],["matInput","","type","number","min","0","placeholder","0.00",3,"value","input"],["matSuffix",""],[1,"col-md-6","align-items-baseline"],[1,"fw-bolder","w-100"],["appearance","outline",1,"w-100"],["matInput","","rows","1",3,"input"],[1,"d-flex","flex-row"],[1,"btn","btn-success",3,"disabled","click"],["width","30","src","assets/Spinner-1s-257px.svg",4,"ngIf"],["width","30","src","assets/Spinner-1s-257px.svg"],["required","","matInput","","type","number","min","0","placeholder","0.00",3,"value"]],template:function(e,n){1&e&&(t.TgZ(0,"div",0),t._uU(1,"Group > Stage"),t.qZA(),t.TgZ(2,"div",1),t.TgZ(3,"section",2),t.TgZ(4,"div",3),t.TgZ(5,"div",4),t.TgZ(6,"div",5),t.TgZ(7,"label",6),t._uU(8,"Name:"),t.qZA(),t._UZ(9,"input",7),t.qZA(),t.TgZ(10,"div",5),t.TgZ(11,"label",6),t._uU(12,"State:"),t.qZA(),t._UZ(13,"input",7),t.qZA(),t.TgZ(14,"div",5),t.TgZ(15,"label",6),t._uU(16,"Note:"),t.qZA(),t._UZ(17,"input",7),t.qZA(),t.TgZ(18,"div",5),t.TgZ(19,"label",6),t._uU(20,"Created Date:"),t.qZA(),t._UZ(21,"input",7),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.TgZ(22,"section",8),t.TgZ(23,"h1",9),t._uU(24,"Stage Details"),t.qZA(),t.TgZ(25,"mat-stepper",10),t.YNc(26,at,4,1,"mat-step",11),t.qZA(),t.qZA(),t.TgZ(27,"section",8),t.TgZ(28,"h1",9),t._uU(29,"Extra Stages"),t.qZA(),t.YNc(30,dt,2,1,"mat-stepper",12),t.qZA(),t.qZA()),2&e&&(t.xp6(9),t.Q6J("value",n.group.name),t.xp6(4),t.Q6J("value",n.group.state),t.xp6(4),t.Q6J("value",n.group.note),t.xp6(4),t.Q6J("value",n.group.created_at),t.xp6(5),t.Q6J("ngForOf",n.products),t.xp6(4),t.Q6J("ngIf",0!=n.orderExtras.length))},directives:[q.Vq,m.sg,m.O5,q.C0,q.VY,v.KE,v.hX,M.Nt,v.R9,A.Hw],styles:[""]}),o})()}];let mt=(()=>{class o{}return o.\u0275fac=function(e){return new(e||o)},o.\u0275mod=t.oAB({type:o}),o.\u0275inj=t.cJS({imports:[[f.Bz.forChild(_t)],f.Bz]}),o})();var ft=c(7539);let ht=(()=>{class o{}return o.\u0275fac=function(e){return new(e||o)},o.\u0275mod=t.oAB({type:o}),o.\u0275inj=t.cJS({imports:[[m.ez,mt,O.X,g.u5,g.UX,u.zk,v.lN,M.c,ft.p9,G.ie,S.ot,A.Ps,h.Tx,x.AV,q.T5]]}),o})()},6926:(U,C,c)=>{c.d(C,{s:()=>f});var m=c(7716);let f=(()=>{class g{constructor(){this.ReadDateClearly=s=>(s.created_at=this.formatDate(s.created_at,!1),s)}convert12to24Hour(s){const[p,t]=s.split(" ");let[u,d]=p.split(":");"AM"==t?12==parseInt(u,10)&&(u="0"):parseInt(u,10)<12&&(u=(parseInt(u,10)+12).toString());let _="";return parseInt(u,10)<10&&(_="0"),_+=parseInt(u,10)+":"+d,_}convert24to12(s){var p="AM";let[t,u]=s.split(":");var d=+t;d>=12&&(12!=d&&(d-=12),p="PM");var _="";return d<=9&&(_="0"),_+d.toString()+":"+u+" "+p}diffTime(s,p){var[t,u]=s.split(":"),[d,_]=p.split(":");return 60*Math.abs(+t-+d)+Math.abs(+u-+_)}monthDiff(s,p){var t;return t=12*(p.getFullYear()-s.getFullYear()),t-=s.getMonth(),(t+=p.getMonth())<=0?0:t}getDays(s,p){for(var t=[""],u=0,d=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],_=s;_<=p&&!(++u>7);)t.push(d[_.getDay()]),_.setDate(_.getDate()+1);return t.splice(0,1),t}formatDate(s,p){var t=new Date(s),u=""+(t.getMonth()+1),d=""+t.getDate(),_=t.getFullYear();if(p)var x="23",h="59",A="59";return u.length<2&&(u="0"+u),d.length<2&&(d="0"+d),p?[_,u,d].join("-")+" "+[x,h,A].join(":"):[_,u,d].join("-")}modifyDate(s,p,t){return s.setDate(t?s.getDate()+p:s.getDate()-p),s}compareDates(s,p){return s.getFullYear()<p.getFullYear()||s.getFullYear()==p.getFullYear()&&s.getMonth()<p.getMonth()||s.getFullYear()==p.getFullYear()&&s.getMonth()==p.getMonth()&&s.getDate()<p.getDate()?-1:s.getFullYear()>p.getFullYear()||s.getFullYear()==p.getFullYear()&&s.getMonth()>p.getMonth()||s.getFullYear()==p.getFullYear()&&s.getMonth()==p.getMonth()&&s.getDate()>p.getDate()?1:0}getExtension(s){var p=s.split(".");return p[p.length-1]}isImg(s){switch(this.getExtension(s)){case"jpeg":case"jpg":case"png":return!0}return!1}}return g.\u0275fac=function(s){return new(s||g)},g.\u0275prov=m.Yz7({token:g,factory:g.\u0275fac,providedIn:"root"}),g})()}}]);