"use strict";(self.webpackChunklamasat=self.webpackChunklamasat||[]).push([[896],{896:(q,f,s)=>{s.r(f),s.d(f,{BranchModule:()=>U});var u=s(8583),r=s(3679),p=s(4655),d=s(8603),c=s(7238),g=s(8939),b=s(8259),m=s.n(b),t=s(7716),Z=s(4260),v=s(4885);function _(e,a){if(1&e&&(t.TgZ(0,"div",19),t.TgZ(1,"p"),t._uU(2),t.qZA(),t.qZA()),2&e){const n=a.$implicit;t.xp6(2),t.Oqu(n)}}function B(e,a){1&e&&(t.TgZ(0,"div",20),t._UZ(1,"mat-spinner"),t.qZA())}function x(e,a){if(1&e){const n=t.EpF();t.TgZ(0,"div",21),t.TgZ(1,"div",22),t.TgZ(2,"div",23),t._uU(3),t.qZA(),t.TgZ(4,"div",23),t._uU(5),t.qZA(),t.TgZ(6,"div",23),t._uU(7),t.qZA(),t.TgZ(8,"div",24),t.TgZ(9,"img",25),t.NdJ("click",function(){const l=t.CHM(n).$implicit,h=t.oxw(),y=t.MAs(12);return h.Show(y,!0,l.id)}),t.qZA(),t._UZ(10,"div",26),t.TgZ(11,"img",27),t.NdJ("click",function(){const l=t.CHM(n).$implicit;return t.oxw().DeleteBranch(l.id)}),t.qZA(),t.qZA(),t.qZA(),t.qZA()}if(2&e){const n=a.$implicit,i=t.oxw();t.Q6J("@in",i.DataState),t.xp6(3),t.Oqu(n.name),t.xp6(2),t.Oqu(n.note),t.xp6(2),t.Oqu(n.location)}}function T(e,a){1&e&&t._UZ(0,"img",29)}function C(e,a){if(1&e&&(t.ynx(0),t.YNc(1,T,1,0,"img",28),t.BQk()),2&e){const n=t.oxw();t.xp6(1),t.Q6J("ngIf",n.loading)}}function A(e,a){1&e&&(t._UZ(0,"img",30),t._uU(1," Save "))}const M=[{path:"all",component:(()=>{class e{constructor(n,i,o){this._branchService=n,this._modalService=i,this._formBuilder=o,this.headers=["Name","Note","Location","Settings"],this.datasource=[],this.isUpdated=!1,this.loading=!1,this.DataState="void",this.loadingItems=!1}ngOnInit(){this.initialForm(),this.fetchData()}initialForm(){this.branchGroup=this._formBuilder.group({name:[null,r.kI.required],note:[null,r.kI.nullValidator],location:[null,r.kI.nullValidator]})}fetchData(){this.getBranches()}getBranches(){this.loadingItems=!0,this._branchService.getAllBranches().pipe((0,g.x)(()=>{this.loadingItems=!1})).subscribe(n=>{this.datasource=n.data,this.DataState="in"})}Show(n,i,o){this.isUpdated=i,this.branchGroup.reset(),this.isUpdated&&(this.branchId=o,this.initialValueBranch(o)),this.modalRef=this._modalService.open(n,{size:"md",modalClass:"mymodal",hideCloseButton:!1,centered:!1,backdrop:!0,animation:!0,keyboard:!1,closeOnOutsideClick:!0,backdropClass:"modal-backdrop"})}closeModal(){this._modalService.close(this.modalRef)}Submit(n){this.isUpdated?(this.loading=!0,this._branchService.updateBranch(this.branchId,this.branchGroup.value).pipe((0,g.x)(()=>{this.loading=!1})).subscribe(i=>{this.getBranches(),this._modalService.close(this.modalRef)})):this.branchGroup.valid&&(this.loading=!0,this._branchService.addBranch(n).pipe((0,g.x)(()=>{this.loading=!1})).subscribe(i=>{this.getBranches(),this._modalService.close(this.modalRef)}))}DeleteBranch(n){m().fire({title:"Are you sure?",text:"You will not be able to recover this imaginary file!",icon:"warning",showCancelButton:!0,confirmButtonText:"Yes, delete it!",cancelButtonText:"No, keep it"}).then(i=>{i.isConfirmed?(this._branchService.removeBranch(n).subscribe(o=>{m().fire("Deleted!","Your imaginary file has been deleted.","success")}),this.getBranches()):i.dismiss===m().DismissReason.cancel&&m().fire("Cancelled","Your imaginary file is safe :)","error")})}initialValueBranch(n){this._branchService.infoBranch(n).subscribe(i=>{var o=i.data;this.branchGroup.patchValue({name:o.name,note:o.note,location:o.location})})}}return e.\u0275fac=function(n){return new(n||e)(t.Y36(Z.b),t.Y36(d.gk),t.Y36(r.qu))},e.\u0275cmp=t.Xpm({type:e,selectors:[["app-branches-main"]],decls:38,vars:6,consts:[[1,"nav_title_header","fs-4","fw-bold","text-center"],[1,"container"],[1,"d-flex","flex-row-reverse"],[1,"btn","btn-success","mb-3","btn-add",3,"click"],[1,"row"],["class","col-md-3","style","text-align: center;font-weight: bold;font-size: 17px;",4,"ngFor","ngForOf"],["class","spinner",4,"ngIf"],["class","card mt-3 p-2","style","border-radius: 20px;",4,"ngFor","ngForOf"],["brachModal",""],["action","",3,"formGroup","ngSubmit"],["for",""],["type","text","formControlName","name",1,"form-control"],["type","text","formControlName","location",1,"form-control"],["formControlName","note","name","","id","","cols","30","rows","4",1,"form-control"],[1,"col-md-6"],["type","button",1,"btn","btn-danger","w-100",3,"click"],["type","submit",1,"btn","btn-success","w-100"],[4,"ngIf","ngIfElse"],["elseTemplate",""],[1,"col-md-3",2,"text-align","center","font-weight","bold","font-size","17px"],[1,"spinner"],[1,"card","mt-3","p-2",2,"border-radius","20px"],[1,"row",2,"text-align","center","align-items","center"],[1,"col-md-3"],[1,"col-md-3",2,"display","flex","justify-content","space-evenly"],["mat-raised-button","","matTooltip","edit","matTooltipPosition","above","src","assets/action-data/edit.svg","width","29",2,"cursor","pointer",3,"click"],[1,"vl"],["mat-raised-button","","matTooltip","delete","matTooltipPosition","above","src","assets/action-data/delete.svg","width","25",2,"cursor","pointer",3,"click"],["width","30","src","assets/Spinner-1s-257px.svg","alt","",4,"ngIf"],["width","30","src","assets/Spinner-1s-257px.svg","alt",""],["src","assets/action-data/save.svg","width","20"]],template:function(n,i){if(1&n){const o=t.EpF();t.TgZ(0,"div",0),t._uU(1,"Branch"),t.qZA(),t.TgZ(2,"div",1),t.TgZ(3,"section"),t.TgZ(4,"div",2),t.TgZ(5,"button",3),t.NdJ("click",function(){t.CHM(o);const h=t.MAs(12);return i.Show(h,!1,0)}),t._uU(6,"+ Add New Branch"),t.qZA(),t.qZA(),t.TgZ(7,"div",4),t.YNc(8,_,3,1,"div",5),t.qZA(),t.YNc(9,B,2,0,"div",6),t.YNc(10,x,12,4,"div",7),t.qZA(),t.qZA(),t.TgZ(11,"modal",null,8),t.TgZ(13,"modal-header"),t._uU(14," Branch Modal "),t.qZA(),t.TgZ(15,"modal-content"),t.TgZ(16,"form",9),t.NdJ("ngSubmit",function(){return i.Submit(i.branchGroup.value)}),t.TgZ(17,"label",10),t._uU(18,"Name"),t.qZA(),t._UZ(19,"input",11),t._UZ(20,"br"),t.TgZ(21,"label",10),t._uU(22,"Location"),t.qZA(),t._UZ(23,"input",12),t._UZ(24,"br"),t.TgZ(25,"label",10),t._uU(26,"Note"),t.qZA(),t._UZ(27,"textarea",13),t._UZ(28,"br"),t.TgZ(29,"div",4),t.TgZ(30,"div",14),t.TgZ(31,"button",15),t.NdJ("click",function(){return i.closeModal()}),t._uU(32,"X Cancel"),t.qZA(),t.qZA(),t.TgZ(33,"div",14),t.TgZ(34,"button",16),t.YNc(35,C,2,1,"ng-container",17),t.YNc(36,A,2,0,"ng-template",null,18,t.W1O),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA()}if(2&n){const o=t.MAs(37);t.xp6(8),t.Q6J("ngForOf",i.headers),t.xp6(1),t.Q6J("ngIf",i.loadingItems),t.xp6(1),t.Q6J("ngForOf",i.datasource),t.xp6(6),t.Q6J("formGroup",i.branchGroup),t.xp6(19),t.Q6J("ngIf",i.loading)("ngIfElse",o)}},directives:[u.sg,u.O5,d.zS,d.Rb,d.Ef,r._Y,r.JL,r.sg,r.Fj,r.JJ,r.u,v.$g],styles:["section[_ngcontent-%COMP%]{margin-left:12rem;margin-top:6rem}.card[_ngcontent-%COMP%]{box-shadow:-1px 2px 6px}.vl[_ngcontent-%COMP%]{border-left:2px solid;height:35px}.spinner[_ngcontent-%COMP%]{position:absolute;left:50%;right:50%;top:50%;z-index:1000}"],data:{animation:[(0,c.X$)("in",[(0,c.SB)("in",(0,c.oB)({opacity:1,transform:"translateY(0)"})),(0,c.eR)("void=>*",[(0,c.oB)({opacity:0,transform:"translateY(100px)"}),(0,c.jt)(1e3)])])]}}),e})()}];let S=(()=>{class e{}return e.\u0275fac=function(n){return new(n||e)},e.\u0275mod=t.oAB({type:e}),e.\u0275inj=t.cJS({imports:[[p.Bz.forChild(M)],p.Bz]}),e})(),U=(()=>{class e{}return e.\u0275fac=function(n){return new(n||e)},e.\u0275mod=t.oAB({type:e}),e.\u0275inj=t.cJS({imports:[[u.ez,d.zk,r.u5,r.UX,S,v.Cq],p.Bz]}),e})()}}]);