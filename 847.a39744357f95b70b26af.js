"use strict";(self.webpackChunklamasat=self.webpackChunklamasat||[]).push([[847],{7847:(Y,A,r)=>{r.r(A),r.d(A,{ArchiveModule:()=>$t});var f=r(8583),M=r(4655),v=r(7238),l=r(3679),c=r(8939),t=r(7716),b=r(1238),_=r(7458),m=r(221),u=r(9357),E=r(6926),O=r(8295),U=r(9983),N=r(6627),V=r(1095),D=r(1494),T=r(3220),Z=r(7441),h=r(2458),q=r(4885);function it(s,n){if(1&s&&(t.TgZ(0,"span",34),t._uU(1),t.qZA()),2&s){const e=t.oxw(2);t.xp6(1),t.AsE(" (+",e.categorySelect.value.length-1," ",2===(null==e.categorySelect.value?null:e.categorySelect.value.length)?"other":"others",") ")}}function st(s,n){if(1&s&&(t.TgZ(0,"mat-option",35),t._uU(1),t.qZA()),2&s){const e=n.$implicit;t.Q6J("value",e.id),t.xp6(1),t.hij("",e.name," ")}}function at(s,n){if(1&s&&(t.TgZ(0,"span",34),t._uU(1),t.qZA()),2&s){const e=t.oxw(2);t.xp6(1),t.AsE(" (+",e.productSelect.value.length-1," ",2===(null==e.productSelect.value?null:e.productSelect.value.length)?"other":"others",") ")}}function nt(s,n){if(1&s&&(t.TgZ(0,"mat-option",36),t._uU(1),t.qZA()),2&s){const e=n.$implicit;t.Q6J("value",e.id)("data-name",e.name),t.xp6(1),t.hij("",e.name," ")}}function ot(s,n){if(1&s&&(t.TgZ(0,"span",34),t._uU(1),t.qZA()),2&s){const e=t.oxw(2);t.xp6(1),t.AsE(" (+",e.customerSelect.value.length-1," ",2===(null==e.customerSelect.value?null:e.customerSelect.value.length)?"other":"others",") ")}}function rt(s,n){if(1&s&&(t.TgZ(0,"mat-option",35),t._uU(1),t.qZA()),2&s){const e=n.$implicit;t.Q6J("value",e.id),t.xp6(1),t.hij("",e.name," ")}}function lt(s,n){if(1&s&&(t.TgZ(0,"mat-option",35),t._uU(1),t.qZA()),2&s){const e=n.$implicit;t.Q6J("value",e),t.xp6(1),t.hij("",e," ")}}function ct(s,n){if(1&s){const e=t.EpF();t.TgZ(0,"div",19),t.TgZ(1,"div",11),t.TgZ(2,"div",20),t.TgZ(3,"mat-form-field",4),t.TgZ(4,"mat-label"),t._uU(5,"Date Range"),t.qZA(),t.TgZ(6,"mat-date-range-input",21),t._UZ(7,"input",22),t._UZ(8,"input",23),t.qZA(),t._UZ(9,"mat-datepicker-toggle",24),t._UZ(10,"mat-date-range-picker",null,25),t.qZA(),t.qZA(),t.TgZ(12,"div",20),t.TgZ(13,"mat-form-field",4),t.TgZ(14,"mat-label"),t._uU(15,"Category"),t.qZA(),t.TgZ(16,"mat-select",26),t.TgZ(17,"mat-select-trigger"),t._uU(18),t.YNc(19,it,2,2,"span",27),t.qZA(),t.YNc(20,st,2,2,"mat-option",28),t.qZA(),t.qZA(),t.qZA(),t.TgZ(21,"div",20),t.TgZ(22,"mat-form-field",4),t.TgZ(23,"mat-label"),t._uU(24,"Product"),t.qZA(),t.TgZ(25,"mat-select",29),t.TgZ(26,"mat-select-trigger"),t._uU(27),t.YNc(28,at,2,2,"span",27),t.qZA(),t.YNc(29,nt,2,3,"mat-option",30),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.TgZ(30,"div",11),t.TgZ(31,"div",31),t.TgZ(32,"mat-form-field",4),t.TgZ(33,"mat-label"),t._uU(34,"Customer"),t.qZA(),t.TgZ(35,"mat-select",26),t.TgZ(36,"mat-select-trigger"),t._uU(37),t.YNc(38,ot,2,2,"span",27),t.qZA(),t.YNc(39,rt,2,2,"mat-option",28),t.qZA(),t.qZA(),t.qZA(),t.TgZ(40,"div",20),t.TgZ(41,"mat-form-field",4),t.TgZ(42,"mat-label"),t._uU(43,"Customer Type"),t.qZA(),t.TgZ(44,"mat-select",32),t.YNc(45,lt,2,2,"mat-option",28),t.qZA(),t.qZA(),t.qZA(),t.TgZ(46,"div",7),t.TgZ(47,"button",33),t.NdJ("click",function(){return t.CHM(e),t.oxw().filterOrders()}),t._uU(48," Get Data "),t.qZA(),t.qZA(),t.qZA(),t.qZA()}if(2&s){const e=t.MAs(11),i=t.oxw();t.Q6J("formGroup",i.filterForm),t.xp6(6),t.Q6J("rangePicker",e),t.xp6(3),t.Q6J("for",e),t.xp6(7),t.Q6J("formControl",i.categorySelect),t.xp6(2),t.hij(" ",i.categorySelect.value?i.categorySelect.value[0]:""," "),t.xp6(1),t.Q6J("ngIf",(null==i.categorySelect.value?null:i.categorySelect.value.length)>1),t.xp6(1),t.Q6J("ngForOf",i.categories),t.xp6(5),t.Q6J("formControl",i.productSelect),t.xp6(2),t.hij(" ",i.productSelect.value?i.productSelect.value[0]:""," "),t.xp6(1),t.Q6J("ngIf",(null==i.productSelect.value?null:i.productSelect.value.length)>1),t.xp6(1),t.Q6J("ngForOf",i.products),t.xp6(6),t.Q6J("formControl",i.customerSelect),t.xp6(2),t.hij(" ",i.customerSelect.value?i.customerSelect.value[0]:""," "),t.xp6(1),t.Q6J("ngIf",(null==i.customerSelect.value?null:i.customerSelect.value.length)>1),t.xp6(1),t.Q6J("ngForOf",i.customers),t.xp6(6),t.Q6J("ngForOf",i.types)}}function ht(s,n){1&s&&(t.TgZ(0,"div",37),t._UZ(1,"mat-spinner"),t.qZA())}function pt(s,n){if(1&s&&(t.TgZ(0,"div",38),t.TgZ(1,"div",39),t.TgZ(2,"div",40),t._uU(3),t.qZA(),t.TgZ(4,"div",7),t._uU(5),t.qZA(),t.TgZ(6,"div",7),t._uU(7),t.qZA(),t.TgZ(8,"div",40),t._uU(9),t.qZA(),t.TgZ(10,"div",40),t._uU(11),t.qZA(),t.qZA(),t.qZA()),2&s){const e=n.$implicit,i=t.oxw();t.Q6J("@in",i.DataState),t.xp6(3),t.Oqu(e.number),t.xp6(2),t.Oqu(e.name),t.xp6(2),t.Oqu(e.customer.name),t.xp6(2),t.Oqu(e.product.category.name),t.xp6(2),t.Oqu(e.product.name)}}const dt=[{path:"all",component:(()=>{class s{constructor(e,i,a,o,p,y){this._fb=e,this._orderService=i,this._productService=a,this._categoryService=o,this._customerService=p,this._helperService=y,this.productSelect=new l.NI,this.categorySelect=new l.NI,this.customerSelect=new l.NI,this.toggleFilter=!1,this.loadingItems=!1,this.DataState="void",this.datasource=[],this.headers=["Number","Name","Customer","Category","Product"],this.types=["partner","big","small","direct","distribution"],this.sortedData=this.datasource.slice()}ngOnInit(){this.fetchData(),this.initialControls()}fetchData(){this.fetchOrders(),this.fetchCustomers(),this.fetchProducts(),this.fetchCategories()}fetchOrders(){this.loadingItems=!0;var e=new FormData;e.append("from_date",this._helperService.formatDate(new Date("2021-01-01"),!1)),e.append("to_date",this._helperService.formatDate(Date.now(),!1)),this._orderService.getOrdersPagination(e).pipe((0,c.x)(()=>this.loadingItems=!1)).subscribe(i=>{this.datasource=i.data.data,this.sortedData=this.datasource.slice()})}fetchCustomers(){this._customerService.getAllCustomers().subscribe(e=>this.customers=e.data.data)}fetchProducts(){this._productService.getAllProducts().subscribe(e=>this.products=e.data)}fetchCategories(){this._categoryService.getAllCategories().subscribe(e=>this.categories=e.data)}initialControls(){this.initFilterForm(),this.initSearchForm()}initFilterForm(){this.filterForm=this._fb.group({from_date:[Date.now(),l.kI.required],to_date:[Date.now(),l.kI.required],category_ids:[[],l.kI.nullValidator],product_ids:[[],l.kI.nullValidator],customer_ids:[[],l.kI.nullValidator],customer_type:[null,l.kI.nullValidator]})}initSearchForm(){this.searchForm=this._fb.group({serch_text:[null,l.kI.required]})}searchOrder(e){""!=e.value?(this.searchForm.patchValue({serch_text:e.value}),this.loadingItems=!0,this._orderService.getOrderSearched(this.searchForm.value).pipe((0,c.x)(()=>this.loadingItems=!1)).subscribe(i=>{this.datasource=i.data.data,this.sortedData=this.datasource.slice()})):this.fetchOrders()}filterOrders(){this.filterForm.patchValue({category_ids:this.categorySelect.value,product_ids:this.productSelect.value,customer_ids:this.customerSelect.value,from_date:this._helperService.formatDate(this.filterForm.controls.from_date.value,!1),to_date:this._helperService.formatDate(this.filterForm.controls.to_date.value,!1)}),this.loadingItems=!0,this._orderService.getOrdersPagination(this.filterForm.value).pipe((0,c.x)(()=>this.loadingItems=!1)).subscribe(e=>{this.datasource=e.data.data,this.sortedData=this.datasource.slice()})}sortData(e){const i=this.datasource.slice();this.sortedData=e.active&&""!==e.direction?i.sort((a,o)=>{const p="asc"===e.direction;switch(e.active){case"Number":return this.compare(a.Number,o.Number,p);case"Name":return this.compare(a.Name,o.Name,p);case"Customer":return this.compare(a.Customer,o.Customer,p);case"Category":return this.compare(a.Category,o.Category,p);case"Product":return this.compare(a.Product,o.Product,p);default:return 0}}):i}compare(e,i,a){return(e<i?-1:1)*(a?1:-1)}}return s.\u0275fac=function(e){return new(e||s)(t.Y36(l.qu),t.Y36(b.p),t.Y36(_.M),t.Y36(m.H),t.Y36(u.v),t.Y36(E.s))},s.\u0275cmp=t.Xpm({type:s,selectors:[["app-archive-order"]],decls:32,vars:3,consts:[[1,"nav-title-header","fs-4","fw-bold","text-center"],[1,"container"],[1,"row","d-flex","align-items-baseline"],[1,"col-md-9"],["appearance","outline",1,"w-100"],["matInput","","placeholder","search..",3,"input"],["matSuffix",""],[1,"col-md-3"],["mat-raised-button","",1,"w-100",3,"click"],["class","card p-3","style","border-radius: 25px",3,"formGroup",4,"ngIf"],["matSort","",1,"mt-3",3,"matSortChange"],[1,"row"],["mat-sort-header","Number",1,"col-md-2","d-flex","justify-content-center",2,"text-align","center","font-weight","bold","font-size","17px"],["mat-sort-header","Name",1,"col-md-3","d-flex","justify-content-center",2,"text-align","center","font-weight","bold","font-size","17px"],["mat-sort-header","Customer",1,"col-md-3","d-flex","justify-content-center",2,"text-align","center","font-weight","bold","font-size","17px"],["mat-sort-header","Category",1,"col-md-2","d-flex","justify-content-center",2,"text-align","center","font-weight","bold","font-size","17px"],["mat-sort-header","Product",1,"col-md-2","d-flex","justify-content-center",2,"text-align","center","font-weight","bold","font-size","17px"],["class","spinner",4,"ngIf"],["class","card mt-3 p-3","style","border-radius: 20px; box-shadow: -1px 2px 6px 0px",4,"ngFor","ngForOf"],[1,"card","p-3",2,"border-radius","25px",3,"formGroup"],[1,"col-md-4"],[3,"rangePicker"],["matStartDate","","formControlName","from_date","placeholder","Start date"],["matEndDate","","formControlName","to_date","placeholder","End date"],["matSuffix","",3,"for"],["picker",""],["multiple","",3,"formControl"],["class","example-additional-selection",4,"ngIf"],[3,"value",4,"ngFor","ngForOf"],["formArrayName","product_ids","multiple","",3,"formControl"],[3,"value","data-name",4,"ngFor","ngForOf"],[1,"col-md-5"],["formControlName","customer_type"],["type","submit","mat-raised-button","","color","primary",1,"w-100",3,"click"],[1,"example-additional-selection"],[3,"value"],[3,"value","data-name"],[1,"spinner"],[1,"card","mt-3","p-3",2,"border-radius","20px","box-shadow","-1px 2px 6px 0px"],[1,"row",2,"text-align","center","align-items","center"],[1,"col-md-2"]],template:function(e,i){1&e&&(t.TgZ(0,"div",0),t._uU(1,"Archive > Order"),t.qZA(),t.TgZ(2,"div",1),t.TgZ(3,"section"),t.TgZ(4,"div",2),t.TgZ(5,"div",3),t.TgZ(6,"mat-form-field",4),t.TgZ(7,"mat-label"),t._uU(8,"Search Order"),t.qZA(),t.TgZ(9,"input",5),t.NdJ("input",function(o){return i.searchOrder(o.target)}),t.qZA(),t.TgZ(10,"mat-icon",6),t._uU(11,"search"),t.qZA(),t.qZA(),t.qZA(),t.TgZ(12,"div",7),t.TgZ(13,"button",8),t.NdJ("click",function(){return i.toggleFilter=!i.toggleFilter}),t._uU(14," Advance Search "),t.TgZ(15,"mat-icon",6),t._uU(16,"settings_input_component"),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.YNc(17,ct,49,16,"div",9),t.TgZ(18,"div",10),t.NdJ("matSortChange",function(o){return i.sortData(o)}),t.TgZ(19,"div",11),t.TgZ(20,"div",12),t._uU(21," Number "),t.qZA(),t.TgZ(22,"div",13),t._uU(23," Name "),t.qZA(),t.TgZ(24,"div",14),t._uU(25," Customer "),t.qZA(),t.TgZ(26,"div",15),t._uU(27," Category "),t.qZA(),t.TgZ(28,"div",16),t._uU(29," Product "),t.qZA(),t.qZA(),t.YNc(30,ht,2,0,"div",17),t.YNc(31,pt,12,6,"div",18),t.qZA(),t.qZA(),t.qZA()),2&e&&(t.xp6(17),t.Q6J("ngIf",i.toggleFilter),t.xp6(13),t.Q6J("ngIf",i.loadingItems),t.xp6(1),t.Q6J("ngForOf",i.sortedData))},directives:[O.KE,O.hX,U.Nt,N.Hw,O.R9,V.lW,f.O5,D.YE,D.nU,f.sg,l.JL,l.sg,T.wx,T.zY,l.Fj,l.JJ,l.u,T.By,T.nW,T._g,Z.gD,l.oH,Z.$L,l.CE,h.ey,q.$g],styles:[".mat-form-field-appearance-outline .mat-form-field-outline{background-color:#fff;border-radius:10px}.example-additional-selection[_ngcontent-%COMP%]{opacity:.75;font-size:.75em}.spinner[_ngcontent-%COMP%]{position:absolute;left:50%;right:50%;top:50%;z-index:1000}.mat-sort-header-container[_ngcontent-%COMP%]{justify-content:center!important}"],data:{animation:[(0,v.X$)("in",[(0,v.SB)("in",(0,v.oB)({opacity:1,transform:"translateY(0)"})),(0,v.eR)("void=>*",[(0,v.oB)({opacity:0,transform:"translateY(100px)"}),(0,v.jt)(1e3)])])]}}),s})()}];let ut=(()=>{class s{}return s.\u0275fac=function(e){return new(e||s)},s.\u0275mod=t.oAB({type:s}),s.\u0275inj=t.cJS({imports:[[M.Bz.forChild(dt)],M.Bz]}),s})();var d=r(6461);r(9490),r(6237),r(9765),r(6682),r(5257),r(6782),r(9761),r(9238),r(8345),r(521),r(946);const K=new t.OlP("mat-chips-default-options"),wt={separatorKeyCodes:[d.K5]};let Ft=(()=>{class s{}return s.\u0275fac=function(e){return new(e||s)},s.\u0275mod=t.oAB({type:s}),s.\u0275inj=t.cJS({providers:[h.rD,{provide:K,useValue:wt}],imports:[[h.BQ]]}),s})();r(5319),r(1439),r(5917),r(2759);var F=r(625),$=r(6994);r(7636),r(3190),r(5435),r(8002),r(3342),r(1289);const jt={provide:new t.OlP("mat-autocomplete-scroll-strategy"),deps:[F.aV],useFactory:function(s){return()=>s.scrollStrategies.reposition()}};let Wt=(()=>{class s{}return s.\u0275fac=function(e){return new(e||s)},s.\u0275mod=t.oAB({type:s}),s.\u0275inj=t.cJS({providers:[jt],imports:[[F.U8,h.Ng,h.BQ,f.ez],$.ZD,h.Ng,h.BQ]}),s})(),$t=(()=>{class s{}return s.\u0275fac=function(e){return new(e||s)},s.\u0275mod=t.oAB({type:s}),s.\u0275inj=t.cJS({imports:[[f.ez,ut,l.UX,l.u5,D.JX,O.lN,N.Ps,U.c,V.ot,Ft,T.FA,Wt,Z.LD,q.Cq]]}),s})()},221:(Y,A,r)=>{r.d(A,{H:()=>b});var f=r(205),M=r(5304),v=r(3927);class l extends v.s{constructor(m){super(m,"management/category")}readCategory(){return this.readEntities(void 0,"/all")}createCategory(m){return this.createEntity(m,"/create")}deleteCategory(m){return this.deleteEntity(m,void 0,"/delete")}updateCategory(m,u){return this.updateQueryEntity(u,"/update/"+m)}infoCategory(m){return this.readEntity(m,"/find")}}var c=r(7716),t=r(1841);let b=(()=>{class _{constructor(u){this.categoryActions=new l(u)}getAllCategories(){return this.categoryActions.readCategory().pipe((0,M.K)(u=>(0,f._)(u)))}createCategory(u){return this.categoryActions.createCategory(u)}removeCat(u){return this.categoryActions.deleteCategory(u)}infoCat(u){return this.categoryActions.infoCategory(u)}updateCategory(u,E){return this.categoryActions.updateCategory(u,E)}}return _.\u0275fac=function(u){return new(u||_)(c.LFG(t.eN))},_.\u0275prov=c.Yz7({token:_,factory:_.\u0275fac,providedIn:"root"}),_})()},3927:(Y,A,r)=>{r.d(A,{s:()=>M});var f=r(1841);class M{constructor(l,c,t="https://lamasat.preneom.com"){this.http=l,this.entityname=c,this.baseURL=t,this.apiURL=`${this.baseURL}/${this.entityname}`}createEntity(l,c){return this.http.post(this.apiURL+c,l)}createEntityDownload(l,c){return this.http.post(this.apiURL+c,l,{responseType:"arraybuffer"})}readEntities(l,c){const t=new f.LE({fromObject:l});return this.http.get(this.apiURL+c,{params:t})}readEntity(l,c){const t=this.joinEntityUrl(l,c);return this.http.get(t)}updateEntity(l,c,t){const b=this.joinEntityUrl(l,t);return this.http.put(this.apiURL+b,c)}updateQueryEntity(l,c){return this.http.put(this.apiURL+c,l)}deleteEntity(l,c,t){const b=this.joinEntityUrl(l,t),_=new f.LE({fromObject:c});return this.http.delete(b,{params:_})}joinEntityUrl(l,c){return l?[this.apiURL+c,l].join("/"):[this.apiURL+c].join("/")}}}}]);